define("core/siteRender/styleCollector",["lodash","utils","skins"],function(a,b,c){"use strict";function f(a,b,c){var d=c.styleId&&a.getDataByQuery(c.styleId,b,a.dataTypes.THEME);return{dataItem:c.dataQuery&&a.getDataByQuery(c.dataQuery,b),propertiesItem:c.propertyQuery&&a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES),styleItem:d,structure:c}}function g(b,c){c&&!b[c]&&(b[c]="s"+a.size(b))}function h(a,b){return a[b]&&d[a[b].skin]}function i(a,b,c){a.styleId&&h(b,a.styleId)?g(c,a.styleId):a.skin&&d[a.skin]&&g(c,a.skin)}function j(a,b,c,d,g){if(a.componentType&&e[a.componentType]){var h=f(c,g,a);e[a.componentType](h,b,c,d,g)}}function k(b,c,d){b.modes&&b.modes.overrides&&a.forEach(b.modes.overrides,function(a){a.styleId&&h(c,a.styleId)&&g(d,a.styleId)})}function l(c,d,e,f,g,h){i(c,d,f),k(c,d,f),j(c,d,e,f,g);var m=b.dataUtils.getChildrenData(c,!!h);a(m).compact().forEach(function(a){l(a,d,e,f,g)}).commit()}function m(c,d,e,f,g,h){i(c,d,f),j(c,d,e,f,g);var k=b.dataUtils.getChildrenData(c,!!h);a(k).compact().forEach(function(a){m(a,d,e,f,g)}).commit()}function n(a,b){e[a]=b}var d=c.skins,e={};return{collectStyleIdsFromStructure:m,collectStyleIdsFromFullStructure:l,registerClassBasedStyleCollector:n}}),define("core/fonts/FontRuler",["react","reactDOM","utils","lodash"],function(a,b,c,d){"use strict";var e=a.createClass({displayName:"FontRuler",handleFontResize:function(){this.rafID||(this.rafID=c.animationFrame.request(this.handleFontResizeRAF))},handleFontResizeRAF:function(){if(delete this.rafID,this.isMounted()){var a=b.findDOMNode(this.refs.content);if(a){var e=this.contentNodeOrigSize.width&&this.contentNodeOrigSize.height&&(a.offsetWidth!==this.contentNodeOrigSize.width||a.offsetHeight!==this.contentNodeOrigSize.height);e&&!this.triggeredResize?(this.triggeredResize=!0,d.defer(c.animationFrame.request.bind(null,this.props.onLoadCallback))):this.updateCurrentSize()}}},updateCurrentSize:function(){var a=b.findDOMNode(this.refs.wrapper),c=b.findDOMNode(this.refs.content),d=b.findDOMNode(this.refs.innerContent),e=b.findDOMNode(this.refs.innerWrapper),f={width:a.offsetWidth,height:a.offsetHeight};a.style.width=f.width-1+"px",a.style.height=f.height-1+"px",a.scrollLeft=a.scrollWidth-a.clientWidth,a.scrollTop=a.scrollHeight-a.clientHeight,d.style.width=f.width+1+"px",d.style.height=f.height+1+"px",e.scrollLeft=e.scrollWidth-e.clientWidth,e.scrollTop=e.scrollHeight-e.clientHeight,this.contentNodeOrigSize={width:c.offsetWidth,height:c.offsetHeight},this.contentNodeOrigSize.width&&this.contentNodeOrigSize.height&&(c.style.fontFamily=this.props.fontFamily+", serif")},componentDidMount:function(){this.triggeredResize=!1,this.updateCurrentSize()},componentWillUnmount:function(){this.rafID&&(c.animationFrame.cancel(this.rafID),this.rafID=null)},render:function(){var b=a.DOM.div({ref:"innerContent",refInParent:"innerContent"}),c=a.DOM.div({ref:"innerWrapper",refInParent:"innerWrapper",onScroll:this.handleFontResize,style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"}},b),d=a.DOM.div({style:{position:"relative",whiteSpace:"nowrap",fontFamily:"serif"}},c,a.DOM.span({ref:"content",className:"font-ruler-content"})),e=a.DOM.div({ref:"wrapper",refInParent:"wrapper",onScroll:this.handleFontResize,style:{position:"absolute",overflow:"hidden",fontSize:1200,left:-2e3,visibility:"hidden"}},d);return e}});return e}),define("core/fonts/FontRulersContainer",["react","lodash","core/fonts/FontRuler","utils"],function(a,b,c,d){"use strict";var e=a.createFactory(c),f=a.createClass({displayName:"FontRulersContainer",getInitialState:function(){return{loadedFonts:[]}},render:function(){var c=this.props.fontsList,f=[{key:"fontRulersContainer",style:{overflow:"hidden",visibility:"hidden",maxHeight:0,maxWidth:0,position:"absolute"}},a.DOM.style({dangerouslySetInnerHTML:{__html:'.font-ruler-content::after {content:"@#$%%^&*~IAO"}'}})],g=this.props.onLoadCallback;return b.forEach(c,function(a){b.includes(this.state.loadedFonts,a)||f.push(e({key:a,fontFamily:a,onLoadCallback:function(){var b=this.state.loadedFonts.concat(a);this.isMounted()&&(this.setState({loadedFonts:b}),d.fonts.renderedFontsList.set(b)),g()}.bind(this)}))},this),a.DOM.div.apply(void 0,f)},hasPendingFonts:function(){return b.difference(this.props.fontsList,this.state.loadedFonts).length>0}});return f}),define("core/fonts/fontsLoader",["lodash","react","fonts","core/fonts/FontRulersContainer"],function(a,b,c,d){"use strict";function f(a,b,c){return e({fontsList:a,onLoadCallback:b,ref:c,key:c})}function g(b,d,e,f){var g=a.map(b,function(a){return c.fontUtils.getPageUsedFontsList(d,a)});return this.getRulersNode(a.union.apply(a,g),e,f)}var e=b.createFactory(d);return{getRulersNode:f,getFontsLoaderNode:g}}),define("core/siteRender/WixThemeReact",["zepto","lodash","react","skins","fonts","utils","core/fonts/fontsLoader","reactDOM","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function r(a){var b=a.santaBase+"/static/css/mobileIEFix.css";return c.DOM.link({rel:"stylesheet",type:"text/css",href:b})}function s(a,d,e){return e&&(d=b.map(d.trim().split("\n"),function(a){var c=a.split("{"),d=c[0].split(",");return c[0]=b.map(d,function(a){return e+" "+a}),c.join("{")},this).join("\n")),c.DOM.style({type:"text/css",key:a,dangerouslySetInnerHTML:{__html:d||""}})}function t(a,b,c){var d="";d=f.stringUtils.startsWith(a,"#")?c+":"+a+";":c+":rgba("+a+");";var e="."+b+" {"+d+"}";return e}function u(a,c){var d=[];if(q){var f=l.getThemeFontsCss(a.THEME_DATA.font,a.THEME_DATA.color);d.push(s("theme_fonts",f,c));var g=n.getColorsCssString(a.THEME_DATA.color);d.push(s("theme_colors",g,c))}else{d=b.map(a.THEME_DATA.font,function(b,d){var e=".font_"+d+" {font:"+l.fontToCSSWithColor(b,a.THEME_DATA.color)+"}";return s("font"+d,e,c)});var e=s("color",b.map(a.THEME_DATA.color,function(a,b){return t(a,"color_"+b,"color")+"\n"+t(a,"backcolor_"+b,"background-color")}).join("\n"),c);d.push(e)}return d}function v(a,c,d,e,f,g){var h=b.get(e,"style.properties")||{},i=o.createSkinCss(c,h,a.THEME_DATA,d,f);return s(d,i,g)}function w(a,c,d,e){var g=[];if(b.forEach(b.keys(c),function(b){var f=c[b],h=a[b],i=p[h?h.skin:b];i&&g.push(v(a,i,f,h,d,e))},this),g.push(v(a,p["wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin"],"wixAds",null,d,e)),g.push(v(a,p["wysiwyg.viewer.skins.MobileAppBannerBasicSkin"],"mobileAppBanner",null,d,e)),g.push(v(a,p["skins.viewer.deadcomp.DeadCompPublicSkin"],"deadComp",null,d,e)),g.push(v(a,p["wysiwyg.viewer.skins.siteBackgroundSkin"],"siteBackground",null,d,e)),g.push(v(a,p["wysiwyg.viewer.skins.PasswordLoginSkin"],"loginDialog",null,d,e)),i.isOpen("sv_popups")){var h=f.constants.POPUP.POPUP_OVERLAY_CONTAINER;g.push(v(a,p[h.SKIN],h.STYLE_ID,null,d,e))}return g}function x(a,b){var d=(b?b+" ":"")+"."+j+" {position:absolute; display: none; z-index: "+a+"}";return[c.DOM.style({type:"text/css",key:"testStyle"},d),c.DOM.div({ref:j,className:j})]}function y(a,c,d,e){var f=[];b.forEach(a,function(a){f.push(k.getPageUsedFontsList(d,a))}),e&&f.push(e);var g=b(f).flatten().union().filter(function(a){return m.isUploadedFontFamily(a)}).value(),h=m.getUploadedFontFaceStyles(g,c);return s("uploadedFonts",h)}function z(a){return"string"==typeof a&&(b.includes(a,"color_")||b.includes(a,"font_"))?"theme":"value"}var j="testStyles",k=e.fontUtils,l=e.fontCss,m=f.fonts.uploadedFontsUtils,n=f.cssUtils,o=d.skinsRenderer,p=d.skins,q=i.isOpen("sv_fontsRefactor");return c.createClass({displayName:"WixThemeReact",getInitialState:function(){return this.testNodeIndex=0,this.waitingForStylesReady=!1,this.registeredUsedFonts=[],null},render:function(){this.testNodeIndex=(this.testNodeIndex+1)%100;var a=[{key:"theme"}],b=this.props.themeData,d=this.props.siteData,e=this.props.siteAPI,f=this.props.masterPage.data.document_data.SITE_STRUCTURE;if(b.THEME_DATA&&b.THEME_DATA.font){this.registerSkinsFontsUsage(),d.getBrowser().ie&&!d.isMobileView()&&a.push(r(d)),a=a.concat(u(b,this.props.styleRoot),w(b,this.props.loadedStyles,this.props.siteData.mobile,this.props.styleRoot),x(this.testNodeIndex,this.props.styleRoot));var h=e.getRootIdsWhichShouldBeRendered();q&&(a=a.concat(y(h,this.props.siteData.serviceTopology.mediaRootUrl,this.props.siteData,this.skinsFonts))),this.props.shouldRenderPage&&(a=a.concat(this.getFontsCssLinks(d,f),g.getFontsLoaderNode(h,d,this.waitForStylesReady,"fontsLoader")))}return c.DOM.div.apply(void 0,a)},componentWillUnmount:function(){this.afterStylesReadyCallback=null,this.waitingForStylesReady=!1},registerStylesReadyCallback:function(a){this.afterStylesReadyCallback=a},initWaitForStylesReady:function(){this.waitingForStylesReady||this.waitForStylesReady()},waitForStylesReady:function(){if(this.isMounted()){var b=h.findDOMNode(this.refs[j]);this.waitingForStylesReady=!0;var c="function"==typeof this.afterStylesReadyCallback;a(b).css("z-index")==this.testNodeIndex&&c?(this.waitingForStylesReady=!1,this.afterStylesReadyCallback()):f.animationFrame.request(this.waitForStylesReady)}},getFontsCssLinks:function(){var a=this.props.siteData;if(q){var d=a.rendererModel.siteInfo.documentType,e=k.getCssUrls(d,a.serviceTopology);return"undefined"!=typeof window&&(e=b.pick(e,function(a,b){var c=document.getElementById("font_"+b);return c?(c.removeAttribute("media"),!1):!0})),b.map(e,function(a,b){return c.DOM.link({rel:"stylesheet",type:"text/css",href:a,key:b})})}var f=k.getWixHelveticaUrl(a.serviceTopology),g="WixSite"===a.rendererModel.siteInfo.documentType?[f]:[],h=k.getWixStoredFontsCssUrlsWithParams(a.santaBase,this.getCharacterSets(),a.serviceTopology.scriptsLocationMap.santa);return g=g.concat(h),this.getGoogleFontsLinks().concat(b.map(g,function(a){return c.DOM.link({rel:"stylesheet",type:"text/css",href:a,key:a})}))},getGoogleFontsLinks:function(){this.loadedGoogleFontsLinks=this.loadedGoogleFontsLinks||[],this.loadedGoogleFonts=this.loadedGoogleFonts||[];var a=this.props.siteData,d=b.map(this.props.siteAPI.getRootIdsWhichShouldBeRendered(),k.getPageFontsMetaData.bind(null,a));d.push(k.getMetadata(this.skinsFonts));var e=b.union.apply(b,d),f=b.filter(e,{provider:"google"}),g=b.difference(f,this.loadedGoogleFonts);this.loadedGoogleFonts=b.union(f,this.loadedGoogleFonts);var h=k.getGoogleFontsUrl(g,this.getCharacterSets());return h&&this.loadedGoogleFontsLinks.push(c.DOM.link({key:"gf_"+this.loadedGoogleFontsLinks.length,rel:"stylesheet",type:"text/css",href:h})),this.loadedGoogleFontsLinks},registerSkinFontsUsage:function(a,c,d){if(this.registerInnerSkinFontsUsage(a,c,d),c.params){var e=b.keys(b.omit(c.params,function(a){return"FONT"!==a}));b.get(d,"style.properties")&&b.forEach(e,function(b){var e="",f=d.style.properties[b]||c.paramsDefaults[b],g=z(f);"value"===g?e=k.parseFontStr(f).family.toLowerCase():"theme"===g&&(e=k.getFontFamilyByStyleId(a,f)),e&&this.registerSkinFontUsage(e)},this)}},registerInnerSkinFontsUsage:function(a,c,d){c.exports&&b.forEach(c.exports,function(b){b.skin&&p[b.skin]&&this.registerSkinFontsUsage(a,p[b.skin],d)},this)},registerSkinsFontsUsage:function(){var a=this.props.themeData;b.forEach(b.keys(this.props.loadedStyles),function(b){var c=a[b],d=p[c?c.skin:b];d&&this.registerSkinFontsUsage(a.THEME_DATA,d,c)},this)},registerSkinFontUsage:function(a){this.skinsFonts=b.union(this.skinsFonts,[a])},getCharacterSets:function(){return this.props.masterPage.data.document_data.SITE_STRUCTURE.characterSets}})}),define("core/siteRender/compFactory",["react","lodash","utils"],function(a,b,c){"use strict";var d={},e={},f={};return{getCompClass:function(b){var g=f[b];if(g)return g;var h=d[b];if(!h)return void c.log.error("Component not implemented: ["+b+"]");var i=a.createClass({mixins:[h].concat(e[b])});return g=a.createFactory(i),f[b]=g,g},invalidate:function(a){delete f[a]},extend:function(a,f){return d.hasOwnProperty(a)?void(e[a]=b.union(e[a].concat(f))):void c.log.error("Trying to extend component ["+a+"] but the component is not defined")},register:function(a,b){return d[a]=b,e[a]=[],this}}}),define("core/components/propsSelectors/propsSelectorsFactory",["lodash"],function(a){"use strict";function c(a){for(var b=[a],c=0;c<b.length;c++){var d=b[c].mixins;d&&d.length&&b.push.apply(b,d)}return b}function d(c,d){var f=null;b[c]=function(b,c){return f=f||e(d),a.mapValues(f,function(a){return a.fetch(b,c)})}}function e(b){var d=c(b),e=a.map(d,function(b){return a.pick(b.propTypes,function(b){return a.isFunction(b.fetch)})});return a.defaults.apply(a,[{}].concat(e))}function f(a){return b[a]}var b={};return{registerComponent:d,getPropsSelectorForComponent:f}}),define("core/core/componentPropsBuilder",["lodash","utils","core/components/propsSelectors/propsSelectorsFactory","experiment"],function(a,b,c,d){"use strict";function e(a,b){return a.styleId&&b.getAllTheme()[a.styleId]?b.getAllTheme()[a.styleId].skin:a.skin}function f(a,c){var d=c.getSiteData();return b.layout.getStyle(a,d.getPageBottomMargin(),d.getScreenWidth(),d.getSiteWidth(),d.getSiteX())}function g(a,b,c,e){if(!c)return{};var f=d.isOpen("wixCodeBinding")&&a.getRuntimeDal().getCompProps(b);return f||a.getSiteData().getDataByQuery(c,e,"component_properties")||{}}function h(a,b,c,e){var f=d.isOpen("wixCodeBinding")&&a.getRuntimeDal().getCompData(b);return f||a.getSiteData().getDataByQuery(c,e,"document_data")}function i(a,b,c,e){return d.isOpen("wixCodeBinding"),a.getSiteData().getDataByQuery(c,e,"design_data")}function j(a,b){return b?a.styleId&&b[a.styleId]||a.skin&&b[a.skin]:a.styleId}function k(b,k,l,m,n){var o=k.getSiteData();if(c.getPropsSelectorForComponent(b.componentType))return a.assign(c.getPropsSelectorForComponent(b.componentType)({stylesMap:m,siteData:o,siteAPI:k},{structure:b,rootId:l}),{useSantaTypes:!0});var p=l||"masterPage",q=o.getExistingRootNavigationInfoWithTransitionInfo(p),r=k.getSiteAspect("behaviorsAspect"),s=b.id,t={viewerPrivateServices:n||{},structure:b,siteData:o,siteAPI:k,id:s,key:s,ref:s,refInParent:s,pageId:p,rootId:p,currentUrlPageId:o.getCurrentUrlPageId(),rootNavigationInfo:q,loadedStyles:m,styleId:j(b,m),skin:e(b,o),style:f(b.layout,k),compProp:g(k,s,b.propertyQuery,l),compActions:r.getActions("comp",s),compBehaviors:r.extractBehaviors(s)};return d.isOpen("designData")&&b.designQuery&&(t.compDesign=i(k,s,b.designQuery,l)),b.dataQuery&&(t.compData=h(k,s,b.dataQuery,l)),t}var l={getCompProps:k,getStyleId:j,getSkin:e,getCompProp:g,getCompData:h,getStyle:f};return d.isOpen("designData")&&(l.getCompDesign=i),l}),define("core/components/animatableMixin",["reactDOM","lodash"],function(a,b){"use strict";function c(a){var b=a.style.display;a.style.display="none",a.offsetHeight,a.style.display=b}return{isAnimatable:!0,shouldChildrenUpdate:!0,componentWillMount:function(){this._animatableMixin={animationsCounter:0,deferredStates:[]}},componentDidMount:function(){this._animatableMixin.setStateOrig=this.setState},componentWillUnmount:function(){this._animatableMixin.updateOnAnimationEnded=!1},animationStarted:function(){1===++this._animatableMixin.animationsCounter&&(this.setState=this.setStateDeferred),this.shouldChildrenUpdate||b(this.refs).filter("isAnimatable").invoke("animationStarted").value()},animationEnded:function(d){d=d!==!1,this.shouldChildrenUpdate||b(this.refs).filter("isAnimatable").invoke("animationEnded",!1).value();var e=this._animatableMixin;if(e.animationsCounter&&0===--e.animationsCounter&&(this.setState=e.setStateOrig),d)if(e.deferredStates.length){for(var f=e.deferredStates,g=0;g<f.length;g+=2)e.setStateOrig.call(this,f[g],f[g+1]);f.length=0}else e.updateOnAnimationEnded&&this.forceUpdate();this._updateOnAnimationEnded=!1,this.forceRedrawOnAnimationEnded===!0&&c(a.findDOMNode(this))},setStateDeferred:function(a,c){var d=this._animatableMixin.deferredStates,e=d.length;0===e||d[e-1]||c?(d.push(a),d.push(c)):(b.assign(d[e-2],a),d[e-1]=c)},shouldComponentUpdateAnimatable:function(){var a=0===this._animatableMixin.animationsCounter;return a||(this._animatableMixin.updateOnAnimationEnded=!0),a}}}),define("core/components/renderDoneMixin",["lodash","utils"],function(a,b){"use strict";function f(){if(c.length&&0===d){var b=c;c=[],a.forEach(b,function(a){a()}),f()}}function g(){0===e&&(d--,f())}function h(){0===e&&d++}function i(a){e+=a?1:-1}function j(a){return this.isMounted()?void(0===d?a():c.push(a)):void b.log.error("only invoke callAfterRenderDone if the component is mounted")}var c=[],d=0,e=0;return{componentDidMount:g,componentDidUpdate:g,componentWillMount:h,componentWillUpdate:h,toggleRenderToString:i,callAfterRenderDone:j}}),define("core/components/compActionMixinOld",["react","lodash"],function(a,b){"use strict";function c(a){var c={id:this.props.id,timeStamp:window.performance?window.performance.now():window.Date.now()};return a?(c.timeStamp=a.timeStamp||c.timeStamp,b.defaults(c,b.pick(a,b.negate(b.isObject)))):c}return{propTypes:{rootId:a.PropTypes.string.isRequired,siteAPI:a.PropTypes.object.isRequired},handleAction:function(a,d){var e=b.get(this.props.compActions,a);if(e){var f=this.props.siteAPI.getSiteAspect("behaviorsAspect");f.handleAction(e,c.call(this,d))}}}}),define("core/components/compBehaviorsExecuterMixin",["lodash"],function(a){"use strict";function b(b,c){var d=a.map(b.params,function(a){return c.params[a]});return c.callback?d.concat(c.callback):d}function c(c){a.forEach(c,function(c){var d=a.get(this.constructor,["behaviors",c.name])||a.get(this.constructor,["behaviorExtensions",c.name],{});if(a.isFunction(this[d.methodName])){var e=b(d,c);this[d.methodName].apply(this,e)}},this)}return{componentWillMount:function(){c.call(this,this.props.compBehaviors)},componentWillReceiveProps:function(a){c.call(this,a.compBehaviors)}}}),define("core/components/baseCompMixinOld",["lodash","core/components/animatableMixin","core/components/renderDoneMixin","core/components/compActionMixinOld","core/components/compBehaviorsExecuterMixin"],function(a,b,c,d,e){"use strict";function g(b){var c=a.pick(b,a.values(f)),d=a(this.props.compActions).pick(a.keys(f)).mapKeys(function(a,b){return f[b]}).mapValues(function(a){return this.handleAction.bind(this,a.name)},this).value();return a.assign(d,c,function(a,b){var c=this;return function(){a&&a.apply(c,arguments),b&&b.apply(c,arguments)}},this)}function h(b){var c=a.defaults(b||{},this.props.style);return a.get(this.props.compProp,"isHidden")&&(c.visibility="hidden"),a.isFunction(this.transformRefStyle)?this.transformRefStyle(c):c}function i(b){var c=a.compact([b,this.props.className]).join(" ");return a.isFunction(this.transformRefClasses)?this.transformRefClasses(c):c}var f={click:"onClick",dblclick:"onDoubleClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},j={mixins:[b,c,e,d],getInitialState:function(){return{}},registerReLayout:function(){this.props.siteAPI&&this.props.siteAPI.registerReLayoutPending&&this.props.siteAPI.registerReLayoutPending()},componentDidUpdate:function(){this.props.siteAPI&&this.props.siteAPI.reLayoutIfPending&&this.callAfterRenderDone(this.props.siteAPI.reLayoutIfPending.bind(this.props.siteAPI))},isComponentActive:function(b){return a.includes(b.siteAPI.getRootIdsWhichShouldBeRendered(),b.rootId)||"masterPage"===b.rootId},shouldComponentUpdate:function(a,b){var c=!this.shouldComponentUpdateAnimatable||this.shouldComponentUpdateAnimatable(a,b),d=this.isComponentActive(a),e=this.shouldComponentUpdatePage&&this.shouldComponentUpdatePage(a,b);return c&&(e||d)},updateRootRefDataStyles:function(b){if(!a.get(this.props,"compProp.isHidden")){var c=g.call(this,b);a.assign(b,c)}b.style=h.call(this,b.style),b.className=i.call(this,b.className);var d=this.props.structure,e=a.get(d,"layout.rotationInDegrees");e&&(b["data-angle"]=e)}};return{baseComp:j,_testActionsMap:f}}),define("core/components/util/animationsQueueHandler",["lodash","animations","reactDOM"],function(a,b,c){"use strict";function d(b){var c=b.comp;return a(b.animations).map(function(a){var b=[];return"object"==typeof a.refNames?(b=j(c,a.refNames.sourceRefs),a.refNames.destRefs&&(b=b.concat(j(c,a.refNames.destRefs)))):b=j(c,a.refNames),b}).flattenDeep().compact().uniq().value()}function e(c,d,e){return a.forEach(c.animations,function(c){var f=c.params||{};f="function"==typeof f?c.params():a.cloneDeep(f);var g,h,i;a.isPlainObject(c.refNames)?(g=k(d,c.refNames.sourceRefs),h=c.refNames.destRefs&&k(d,c.refNames.destRefs)):g=k(d,c.refNames),h?(i=b.transition(c.animationName,g,h,c.duration,c.delay,f),i&&e.add(i,c.position)):(i=b.animate(c.animationName,g,c.duration,c.delay,f),i&&e.add(i,c.position))}),e.get()}function f(c,f){for(var i,j,k,l,m,n;c.length;)l=c.pop(),j=l.comp,i={},l.callbacks=l.callbacks||{},k=l.params||{},k="function"==typeof k?l.params():a.cloneDeep(k),m={suppressReactRendering:k.suppressReactRendering!==!1,forgetSequenceOnComplete:k.forgetSequenceOnComplete!==!1,id:l.id},n=d(l),i.onStart=g.bind(null,n,m,l.callbacks.onStart),i.onComplete=h.bind(null,n,m,l.callbacks.onComplete,f),i.onReverseComplete=h.bind(null,n,m,l.callbacks.onReverseComplete,f),i.onInterrupt=h.bind(null,n,m,l.callbacks.onInterrupt,f),k.callbacks=i,f[l.id]=e(l,j,b.sequence(k)),l.callbacks.onInit&&l.callbacks.onInit(f[l.id])}function g(b,c,d){c.suppressReactRendering&&a.invoke(b,"animationStarted"),d&&d()}function h(b,c,d,e){c.forgetSequenceOnComplete&&delete e[c.id],c.suppressReactRendering&&a.invoke(b,"animationEnded"),d&&d()}function i(a,b){return a.refs[b]}function j(b,c){return c=a.isArray(c)?c:[c],a(c).map(function(c){return a.isArray(c)?a.reduce(c,i,b):a.isString(c)?b.refs[c]:c}).compact().value()}function k(b,d){return a.map(j(b,d),c.findDOMNode)}return{flushQueue:f,getElementsByRefs:k}}),define("core/components/animationsMixin",["lodash","animations","core/components/util/animationsQueueHandler"],function(a,b,c){"use strict";function d(b){this.comp=b,this.animations=[],this.callbacks={},this.id=a.uniqueId("seq_")}return d.prototype.add=function(a,b,c,d,e,f){return this.animations.push({refNames:a,animationName:b,duration:c,delay:d,params:e,position:f}),this},d.prototype.onCompleteAll=function(a){return this.callbacks.onComplete=a,this},d.prototype.onReverseAll=function(a){return this.callbacks.onReverseComplete=a,this},d.prototype.onInterruptAll=function(a){return this.callbacks.onInterrupt=a,this},d.prototype.onStartAll=function(a){return this.callbacks.onStart=a,this},d.prototype.onInit=function(a){this.callbacks.onInit=a},d.prototype.execute=function(a){return this.comp.executeAnimationsWhenPossible(this.comp,this.id,this.animations,this.callbacks,a),this.id},d.prototype.getId=function(){return this.id},d.prototype.hasAnimations=function(){return!a.isEmpty(this.animations)},{getInitialState:function(){return this._animationsQueue=[],this._liveSequences={},this._isBusy=!0,null},executeAnimationsWhenPossible:function(b,d,e,f,g){a.isEmpty(this._liveSequences)&&(this._liveSequences={}),a.isEmpty(this._animationsQueue)&&(this._animationsQueue=[]),this._animationsQueue.push({comp:b,id:d,animations:e,callbacks:f,params:g}),this.isBusy()||c.flushQueue(this._animationsQueue,this._liveSequences)},componentWillUpdate:function(){this._isBusy=!0},componentDidUpdate:function(){this._isBusy=!1,this.isBusy()||c.flushQueue(this._animationsQueue,this._liveSequences)},componentDidMount:function(){this._isBusy=!1},componentDidLayoutAnimations:function(){c.flushQueue(this._animationsQueue,this._liveSequences)},componentWillUnmount:function(){this._isBusy=!0,this.clearAnimationsQueue(!1)},clearAnimationsQueue:function(c){a.forEach(this._liveSequences,function(a){b.kill(a,c?1:void 0)}),this._liveSequences={},this._animationsQueue=[]},isBusy:function(){return!this.isMounted()||this._isBusy||this.props.siteAPI.isSiteBusy()},animate:function(a,b,c,d,e,f){var g=this.sequence(a,b,c,d,e);return f=f||{},f.onStart&&g.onStartAll(f.onStart),f.onInterrupt&&g.onInterruptAll(f.onInterrupt),f.onComplete&&g.onCompleteAll(f.onComplete),g.execute()},transition:function(a,b,c,d,e,f,g){return this.animate({sourceRefs:a,destRefs:b},c,d,e,f,g)},sequence:function(a,b,c,e,f){var g=new d(this);return arguments.length&&g.add.apply(g,arguments),g},getSequence:function(a){return a?this._liveSequences[a]:null},stopSequence:function(a,c){var d=this.getSequence(a);d&&(b.kill(d,c),delete this._liveSequences[a])},reverseSequence:function(a){var b=this.getSequence(a);b&&b.reversed(!b.reversed())},easeStartSequence:function(a,c,d,e){var f=this.getSequence(a);f&&b.animateTimeScale(f,c,0,1,d,e)},easeStopSequence:function(a,c,d,e){var g,f=this.getSequence(a);f&&(e=e||{},g=e.onComplete||function(){},e.onComplete=function(){g(),this.stopSequence(a)}.bind(this),f.paused()?this.stopSequence(a):b.animateTimeScale(f,c,1,0,d,e))},getAnimationProperties:function(a){return b.getProperties(a)},addTickerEvent:b.addTickerEvent,removeTickerEvent:b.removeTickerEvent}}),define("core/components/actionsAspectActions/triggerTypesConsts",[],function(){"use strict";return{DID_LAYOUT:"didLayout",SCROLL:"scroll",RESIZE:"resize",PAGE_CHANGED:"pageChanged",POPUP_CHANGED:"popupChange",PAGE_RELOADED:"pageReloaded",SITE_READY:"siteReady",TRANSITION_ENDED:"transitionEnded",MODE_CHANGED_INIT:"modeChangedInit",MODE_CHANGED_EXECUTE:"modeChangedExecute",ACTIONS_ADDED_LAYOUTED:"actionsAddedLayouted",ACTIONS_REMOVED:"actionsRemoved"}}),define("core/siteRender/WixPageReact",["lodash","react","core/siteRender/compFactory","utils","core/core/componentPropsBuilder","core/components/baseCompMixinOld","core/components/animationsMixin","core/components/actionsAspectActions/triggerTypesConsts","reactDOM","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function n(b,c,d){return a.get(b.getDataByQuery(c.behaviorQuery,d,b.dataTypes.BEHAVIORS),"items",[])}function o(b,c,e){var f=e.getSiteData(),g=f.isBehaviorsDataMapExist()?n(f,c):c&&c.behaviors||[],h=a.isString(g)?JSON.parse(g):g,i={},j=!a.get(e.getRuntimeDal().getCompProps(c.id),"isHidden");j&&(i[c.id]=h||[]),i[c.id]=h||[];var k=d.dataUtils.getChildrenData(c,b);return a.transform(k,function(c,d){a.assign(c,o(b,d,e))},i)}function p(b,c,e){var f={},g=e.getCompProps(c.id)||{};return g.isHidden||g.isDisabled||(f[c.id]=e.getActionsAndBehaviors(c.id)),a.transform(d.dataUtils.getChildrenData(c,b),function(c,d){a.assign(c,p(b,d,e))},f)}function q(b,c){return a.map(b,function(b){if(b.behavior&&b.action)return b;var d={name:b.action,sourceId:b.sourceId||c,type:"comp"},e=a.omit(b,["action","sourceId","pageId","duration","delay"]);return e.targetId=e.targetId||c,a.assign(e.params,a.pick(b,["duration","delay"])),{action:d,behavior:e}})}function r(b){var c=j.isOpen("sv_hoverBox");b=c?b:this.props;var d=b.siteAPI.getSiteAspect("behaviorsAspect"),e=b.siteData.isMobileView(),f=b.siteAPI.getRuntimeDal(),g=p(e,b.structure,f),h=a.mapValues(g,q);h=a(h).reject(a.isEmpty).flatten().value(),d.setBehaviorsForActions(h,b.rootId)}function s(b){var c=b.siteAPI.getSiteAspect("actionsAspect"),d=o(b.siteData.isMobileView(),b.structure,b.siteAPI);a.forEach(d,function(a,d){c.registerBehaviors(d,b.rootId,a)},this)}function t(b){return a.zipObject(b,a.times(b.length,a.constant(!0)))}function u(b,c,d){d[c.id]&&a.get(c,"layout.docked")&&(b.dimentions=d[c.id],b.style.width&&(b.style.width=d[c.id].width),b.style.height&&(b.style.height=d[c.id].height))}function v(a){return"SITE_PAGES"===a}function w(a,c){var d={pageConstructor:b.createFactory(V),componentPropsBuilder:e,skin:"skins.core.InlineSkin"};return j.isOpen("sv_hoverBox")&&(d.activeModes=a,d.measureMap=c),d}function x(b){return a.includes(["Page","Document"],b)}function y(a,b,c,d){var e={pageStub:a,style:{width:b}};return a&&(e.style.display="none"),j.isOpen("sv_hoverBox")&&(e.activeModes=c,e.measureMap=d),e}function z(b,c,d,f,g,h){var i=A(f,b.rootId,b.structure.id,b.siteData),k=e.getCompProps(f,b.siteAPI,b.rootId,b.loadedStyles,b.viewerPrivateServices);return i&&(k.style=a.merge(k.style||{},i)),x(f.type)&&a.merge(k,y(d,b.siteData.getSiteWidth(),b.activeModes,b.measureMap)),u(k,f,c),v(f.id)&&a.merge(k,w(b.activeModes,b.measureMap)),j.isOpen("sv_hoverBox")&&(k.isAffectedByModeChanges=g,h&&(k.className=(k.className||"")+" transitioning-comp")),k}function A(b,c,d,e){if(b.id===d)return{visibility:"hidden"};var f,g=e.isPageLandingPage(e.getPrimaryPageId())&&"masterPage"===c,h=a.includes(l,b.componentType);return g&&!h&&(f={display:"none"}),f}function B(b,c){var d=[],e=a.get(b,"modes.definitions");if(e&&e.length){var f=a.map(e,"modeId"),g=a.keys(c);d=a.intersection(g,f)}return!a.isEmpty(d)}function C(b,c,e,f,g,h){for(var i={},j=function(a,b){return{structure:b,anyChangeInParentActiveModes:a}},k=c.siteData,l=d.structureDimensions.createDimensionsMap(c.structure,k.getScreenSize(),k.getSiteWidth(),k.isMobileView()),n=[{structure:b,anyChangeInParentActiveModes:!1}];n.length;){var o=n.shift(),p=o.structure,q=Q(e,c),r=R(e,c)&&B(p,q),s=o.anyChangeInParentActiveModes||r,u=s&&!!g[p.id],v=h[p.id]===m.TRANSITION,w=v||u,x=E(p,k.isMobileView(),f),y=a.map(x,a.partial(j,s)),A=z(c,l,f,p,s,w);A.childrenSet=t(a.map(x,"id")),i[p.id]=A,n.push.apply(n,y)}return i}function D(b,c){var e;return a.includes(k,c.componentType)?!0:(e=d.dataUtils.getChildrenData(c,b),a.some(e,D.bind(null,b)))}function E(b,c,e){var f=d.dataUtils.getChildrenData(b,c);return e&&(f=a.filter(f,D.bind(null,c))),f}function F(a,b,c,d){return c[a]?c[a]:b[a]?b[a]:d[a]}function G(b,c,d){function g(b){for(var h=c[b],i=a.keys(h.childrenSet),j=0;j<i.length;j++)g(i[j]);var k=a.filter(i,f),l=d[b]||k.length;l&&(e[b]=a.clone(h),e[b].childrenSet=t(k))}var e={},f=a.partial(a.has,e);return g(b),e}function H(b,c,d,e,f){var g=G(e,d,f),h=a.mapValues(b,function(b){return a.pick(b,"id","childrenSet")}),i=a.mapValues(c,function(b){return a.pick(b,"id","childrenSet")}),j=a.mapValues(g,function(b){return a.pick(b,"id","childrenSet")});return a.merge(h,i,j)}function I(b,c,d,e,f){for(var g=H(c,d,e,b,f),h={},i=[b];i.length;){var j=i.shift(),k=g[j].childrenSet;h[j]=a.clone(F(j,c,d,e)),h[j].childrenSet=k,i.push.apply(i,a.keys(k))}return h}function J(b){return a.omit(b,["childrenSet","isAffectedByModeChanges"])}function K(b,c){var d=b[c],e=a.keys(d.childrenSet),f=J(d);return f.children=a.map(e,a.partial(K,b)),f}function L(b,c){var d={};return a.forEach(c,function(a,c){var e=b&&b[c];a&&!e&&(d[c]=m.ENTER)}),a.forEach(b,function(a,e){var f=c&&c[e],g=b&&b[e];a&&!f?d[e]=m.LEAVE:g&&f&&c[e].isAffectedByModeChanges&&(d[e]=m.TRANSITION)}),d}function M(a){return a&&c.getCompClass(a)||b.DOM.div}function N(b){var c=a.clone(b);c.children=a.map(b.children,N);var d=M(c.structure.componentType);return d(c)}function O(a,b,c,d,e){var f=b.getSiteAspect("actionsAspect");f.executeAction("modeChange",h.MODE_CHANGED_INIT,{componentAnimations:c,transitioningComponentsPrevLayout:d,pageId:a,onComplete:e})}function P(a){var b=a.getSiteAspect("actionsAspect");b.executeAction("modeChange",h.MODE_CHANGED_EXECUTE)}function Q(b,c){var d=a.get(c,"rootId",""),e=a.get(b,["activeModes",d],{}),f=a.get(c,["activeModes",d],{}),g=a({}).assign(e,f).keys().value();return a.transform(g,function(a,b){var c=e[b],d=f[b];c&&!d?a[b]=!1:!c&&d&&(a[b]=!0)},{})}function R(b,c){return j.isOpen("sv_hoverBox")?!a.isEmpty(Q(b,c)):!1}function S(b){return j.isOpen("sv_hoverBox")?!a.isEmpty(b):!1}function T(b,c,d,e,f){if(!e)return{};var g=b.getSiteAspect("windowScrollEvent"),h=g.getScrollPosition(),i=a.partial(a.eq,m.TRANSITION);return a(d).pick(i).mapValues(function(a,b){return{width:e.width[b],height:e.height[b],left:e.absoluteLeft[b]-f.getSiteX()-h.x,top:e.absoluteTop[b]-h.y,rotation:c[b].structure.layout.rotationInDegrees}}).value()}function U(a){return!this.isComponentActive(a)}var k=["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAWidget"],l=["wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.PagesContainer"],m={ENTER:d.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:d.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:d.siteConstants.Animations.Modes.AnimationType.TRANSITION},V=b.createClass({displayName:"WixPageReact",
mixins:[f.baseComp,g],componentWillMount:function(){this.currentlyAnimatingComponents={},this.childrenAnimations={},this.transitioningChildrenPrevLayout={},this.renderedCompPropsMap={},this.prevCompPropsMap={},this.props.siteAPI&&(s.call(this,this.props),r.call(this,this.props)),this.updateRenderedCompPropsMap(this.props,this.props)},shouldComponentUpdatePage:function(a){return this.isComponentActive(a)},isStub:function(){return this.props.pageStub},updateRenderedCompPropsMap:function(b,c){var d=this.prevCompPropsMap,e=this.currentlyAnimatingComponents,f=C(b.structure,b,c,U.call(this,b),d,e),g=j.isOpen("sv_hoverBox");g&&R(c,b)&&(this.childrenAnimations=L(d,f),this.transitioningChildrenPrevLayout=T(b.siteAPI,d,this.childrenAnimations,b.measureMap,b.siteData),a.assign(e,this.childrenAnimations),O(b.rootId,b.siteAPI,this.childrenAnimations,this.transitioningChildrenPrevLayout,this.handleModeChangeAnimationsFinished)),g&&S(e)?this.renderedCompPropsMap=I(b.structure.id,d,f,this.renderedCompPropsMap,e):this.renderedCompPropsMap=f,this.prevCompPropsMap=f},componentWillUpdate:function(a){r.call(this,a),j.isOpen("sv_hoverBox")&&(s.call(this,a,this.props),U.call(this,a)&&this.props.siteAPI.deactivateModesInPage(this.props.rootId)),this.updateRenderedCompPropsMap(a,this.props)},render:function(){var a=K(this.renderedCompPropsMap,this.props.structure.id);return N(a)},componentDidLayout:function(){if(j.isOpen("wixCodeBinding")){var a=this.props.siteAPI.getSiteAspect("WidgetAspect").areAllActiveRootWidgetsReady(this.props.rootId);a&&(i.findDOMNode(this).style.visibility="")}else i.findDOMNode(this).style.visibility=""},componentDidUpdate:function(){var b=this.props.rootId,c=this.props.siteAPI;if(j.isOpen("sv_hoverBox"))s.call(this,this.props),a.isEmpty(this.childrenAnimations)||(P(c),this.childrenAnimations={},this.transitioningChildrenPrevLayout={});else{var d=c.getSiteAspect("actionsAspect");d.isPageRegistered(b)||(d.setPageAsRegistered(b),s.call(this,this.props))}},handleModeChangeAnimationsFinished:function(b){this.currentlyAnimatingComponents=a.omit(this.currentlyAnimatingComponents,a.keys(b)),S(this.currentlyAnimatingComponents)||this.forceUpdate()}});return V}),define("core/siteRender/wixBackgroundInstantiator",["core/siteRender/compFactory","core/core/componentPropsBuilder"],function(a,b){"use strict";var c="wysiwyg.viewer.components.SiteBackground",d={id:"SITE_BACKGROUND",skin:"wysiwyg.viewer.skins.siteBackgroundSkin",componentType:c,styleId:"siteBackground"};return{getWixBgStructure:function(){return d},getWixBgComponent:function(e){var f=b.getCompProps(d,e),g=a.getCompClass(c);return g(f)}}}),define("core/bi/errors.json",[],function(){return{JAVASCRIPT_ERROR:{errorName:"JAVASCRIPT_ERROR",errorCode:111022,severity:"fatal",params:{p1:"errorMsg",p2:"url",p3:"line",p4:"column"}},CONSOLE_ERROR:{errorName:"CONSOLE_ERROR",errorCode:111023,severity:"error",params:{p1:"errorMsg"}},REQUIREJS_ERROR:{errorName:"REQUIREJS_ERROR",errorCode:111024,severity:"fatal",params:{p1:"errorMsg",p2:"modules"}},REQUIREJS_RETRY_ERROR:{errorName:"REQUIREJS_RETRY_ERROR",errorCode:111025,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},NULL_SITE_ERROR:{errorName:"NULL_SITE_ERROR",errorCode:112e3,severity:"error",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_DESKTOP_BACKGROUND_ITEM",errorCode:112001,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_MOBILE_BACKGROUND_ITEM",errorCode:112002,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}}}}),define("core/bi/errors",["core/bi/errors.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;return b.forEach(a,function(a,b){a.errorName=b}),d.register("core","error",a),a}),define("core/siteRender/SiteAPI",["utils","zepto","lodash","core/bi/errors","experiment"],function(a,b,c,d,e){"use strict";function g(a,b){!a&&arguments.length&&"undefined"!=typeof window&&(b=b||"unknown",window.wixBiSession&&window.wixBiSession.sendError(d.NULL_SITE_ERROR,b)),this._site=a,e.isOpen("santaTypes")&&c.bindAll(this)}function h(a,b){var c=this.getActiveModes()[a];return!(!c||!c[b])}var f=a.logger;return g.prototype={reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(){this._site.registerReLayoutPending()},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(a){return this._site&&this._site.siteAspects&&this._site.siteAspects[a]},getSiteData:function(){return this._site.props.siteData},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(a,b){var c=this.getSiteData();c&&c.wixBiSession&&void 0===c.wixBiSession[a]&&(c.wixBiSession[a]=b)},setBiMarker:function(a){this.setBiParam(a,c.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){var b=this._site.props.siteData;return!(!b.getExistingRootNavigationInfo(b.getFocusedRootId()).pageItemId&&!a.nonPageItemZoom.getZoomedImageData())},openPopup:function(a,b,c){window.open(a,b,c)},isPageLandingPage:function(a){return this.getSiteData().isPageLandingPage(a)},scrollToAnchor:function(b,c){var d=a.scrollAnchors.calcAnchorScrollToPosition(b,this);return this._site.scrollToAnchor(d,c)},getAllRenderedRootIds:function(){return this._site.getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return this._site.getRootIdsWhichShouldBeRendered()},navigateToPage:function(a,b,c){var d=!1;this._site.tryToNavigate(a,b,d,c)},updatePageNavInfo:function(a,b,c){var d=this.getSiteData(),e=!1;if(a.pageId!==d.getPrimaryPageId()&&a.pageId!==d.getCurrentPopupId())throw"you need to navigate to page if it's a different page";this._site.tryToNavigate(a,b,e,c)},forceUpdate:function(a){this._site.forceUpdate(a)},getComponentsByPageId:function(a){return this._site.getComponentsByPageId(a)},getPageUrl:function(a){return this.getPageUrlFor(this.getSiteData().getCurrentUrlPageId(),a)},getPageData:function(){return this.getSiteData().getDataByQuery(this.getSiteData().getCurrentUrlPageId())},setPageTitle:function(a,b,c){var d=this.getPageData();d.title=a,d.descriptionSEO=b,d.pageTitleSEO=c},setPageMetaKeywords:function(a){var b=this.getPageData();b.metaKeywordsSEO=a},setPageMetaOgTags:function(a){var b=this.getPageData();b.metaOgTags=a},getPageUrlFor:function(b,c){var d=this.getSiteData().getDataByQuery(b);if(!d)return"";var e=a.wixUrlParser.getUrl(this.getSiteData(),{pageId:b,title:d.pageUriSEO},c);return e},initFacebookRemarketing:function(){f.initFacebookRemarketingPixel(this.getSiteData())},initGoogleRemarketing:function(){f.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){f.fireGoogleRemarketingPixel()},initYandexMetrika:function(){f.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(a){f.reportYandexPageHit(a)},reportBI:function(a,b){f.reportBI(this._site.props.siteData,a,b)},reportCurrentPageEvent:function(a){var b=this._site.props.siteData;a||(a=c.isString(b.currentUrl)?b.currentUrl:b.currentUrl.full);var d=b.getExternalBaseUrl().replace(/\/$/,""),e=a.replace(d,"");f.reportPageEvent(b,e)},reportPageEvent:function(a){f.reportPageEvent(this._site.props.siteData,a)},reportBeatEvent:function(a,b){f.reportBeatEvent(this._site.props.siteData,a,b)},reportBeatStart:function(a){this.reportBeatEvent("start",a)},reportBeatFinish:function(a){this.reportBeatEvent("finish",a)},reportPageBI:function(){f.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},isSiteBusy:function(){return this._site.isBusy},isSiteBusyIncludingTransition:function(){var a=this.getSiteAspect("actionsAspect");return this.isSiteBusy()||a&&a.isDuringPageTransition()},setSiteScrollingEnabled:function(a){a?b("html").removeClass("disableSiteScroll"):b("html").addClass("disableSiteScroll")},enterFullScreenMode:function(c){return"undefined"==typeof window?void a.log.warn("SiteAPI.enterFullScreenMode should only be called from client specific code!"):(b("body").addClass("fullScreenMode"),void(c&&!c.scrollable||b("body").addClass("fullScreenMode-scrollable")))},exitFullScreenMode:function(){return"undefined"==typeof window?void a.log.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!"):(b("body").removeClass("fullScreenMode"),void b("body").removeClass("fullScreenMode-scrollable"))},forceBackground:function(a){document.body.style.background=a},disableForcedBackground:function(){document.body.style.background=""},passClickEvent:function(a){this._site.clickHandler(a)},getRuntimeDal:function(){return this.getSiteDataAPI().runtime},hasPendingFonts:function(){return this._site.refs.theme.refs.fontsLoader.hasPendingFonts()},getCurrentPopupId:function(){return this.getSiteData().getCurrentPopupId()},openPopupPage:function(a){this.navigateToPage({pageId:a},!0)},closePopupPage:function(){this.navigateToPage(this.getSiteData().getRootNavigationInfo(),!0)},isPopupOpened:function(){return this.getSiteData().isPopupOpened()},getSiteDataAPI:function(){return this._site.props.viewerPrivateServices.siteDataAPI},getPointers:function(){return this._site.props.viewerPrivateServices.pointers},getActiveModes:function(){return this.getSiteDataAPI().getActiveModes()},activateModeById:function(a,b,c){h.call(this,b,c)||(this.getSiteDataAPI().activateModeById(a,b,c),this.forceUpdate())},activateMode:function(a,b){var c=this.getPointers().components.getPageOfComponent(a).id,d=this.getActiveModes()[c];d&&d[b]||(this.getSiteDataAPI().activateMode(a,b),this.forceUpdate())},deactivateModeById:function(a,b,c){var d=this.getActiveModes()[b];d&&d[c]&&(this.getSiteDataAPI().deactivateModeById(a,b,c),this.forceUpdate())},deactivateMode:function(a,b){var c=this.getPointers().components.getPageOfComponent(a).id,d=this.getActiveModes()[c];d&&d[b]&&(this.getSiteDataAPI().deactivateMode(a,b),this.forceUpdate())},deactivateModesInPage:function(a){var b=this.getActiveModes()[a];c.isEmpty(b)||(this.getSiteDataAPI().deactivateModesInPage(a),this.forceUpdate())},switchModesByIds:function(a,b,c,d){var e=this.getActiveModes()[b];e&&!e[c]&&e[d]||(this.getSiteDataAPI().switchModesByIds(a,b,c,d),this.forceUpdate())},resetAllActiveModes:function(){this.getSiteDataAPI().resetAllActiveModes(),this.forceUpdate()},showSelectionSharer:function(a,b){this._site.refs.selectionSharer.show(a,b)},hideSelectionSharer:function(){this._site.refs.selectionSharer.isVisible()&&this._site.refs.selectionSharer.hide()},isSelectionSharerVisible:function(){return c.get(this._site,"refs.selectionSharer")&&this._site.refs.selectionSharer.isVisible()},getWixCodeAppApi:function(){return this._site.props.wixCodeAppApi}},g}),define("core/core/siteAspectsRegistry",[],function(){"use strict";var a={};return{registerSiteAspect:function(b,c){a[b]=c},getAllAspectConstructors:function(){return a},getSiteAspectConstructor:function(b){return a[b]}}}),define("core/siteRender/SiteAspectsSiteAPI",["lodash","core/siteRender/SiteAPI"],function(a,b){"use strict";function c(a){b.call(this,a,"Site Aspect")}return c.prototype=a.create(b.prototype,{constructor:c}),c.prototype.getComponentById=function(a,b){var c=null,d=b||this.getRootOfComponentId(a);return d&&(c=this.getComponentsByPageId(d)[a]),c||(c=this._site.getAspectsContainer().refs[a]),c||"SITE_BACKGROUND"!==a&&"WIX_ADS"!==a||(c=this._site.refs[a]),c||null},c.prototype.getRootOfComponentId=function(b){var c=this._site.getPageOfComp(b),d=c&&c.props.rootId,e=this._site.getMasterPage();return!d&&e&&e.refs.SITE_PAGES&&a.forEach(e.refs.SITE_PAGES.refs,function(a,c){return a.refs&&a.refs[b]?(d=c,!1):void 0}),d||null},c.prototype.getCurrentPage=function(){return this._site.getPrimaryPage()},c.prototype.getCurrentPopup=function(){return this._site.getCurrentPopup()},c.prototype.getAllRenderedRoots=function(){return a.map(this.getAllRenderedRootIds,this.getPageById,this)},c.prototype.getMasterPage=function(){return this._site.getMasterPage()},c.prototype.getPageById=function(a){return this._site.getPageById(a)},c.prototype.registerToMessage=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.message,a)},c.prototype.registerToSiteReady=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,a)},c.prototype.registerToScroll=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.scroll,a)},c.prototype.registerToResize=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.resize,a)},c.prototype.registerToOrientationChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,a)},c.prototype.registerToModeChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,a)},c.prototype.registerToSlideChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.slideChange,a)},c.prototype.registerToComponentDidMount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.mount,a)},c.prototype.registerToSiteWillMount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.willMount,a)},c.prototype.registerToSiteWillUpdate=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.willUpdate,a)},c.prototype.registerToDidLayout=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,a)},c.prototype.unRegisterFromDidLayout=function(a){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,a)},c.prototype.registerToWillUnmount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,a)},c.prototype.registerToUrlPageChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.urlPageChange,a)},c.prototype.registerToRenderedRootsChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.renderedRootsChanged,a)},c.prototype.registerToAddedRenderedRootsDidLayout=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.addedRenderedRootsDidLayout,a)},c.prototype.registerToPopupChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.popupChange,a)},c.prototype.registerToKeyDown=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,a)},c.prototype.registerToWindowTouchEvent=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a.toLowerCase()],b)},c.prototype.registerToFocusEvents=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a],b)},c.prototype.registerToVisibilityChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,a)},c.prototype.registerToOrientationChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,a)},c.prototype.getSiteAPI=function(){return this._site.siteAPI},c.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()},c.prototype.scrollSiteBy=function(a,b){this.getSiteContainer().scrollBy(a,b)},c.prototype.scrollSiteTo=function(a,b){this.getSiteContainer().scrollTo(a,b)},c.prototype.getWindowSize=function(){var a=this.getSiteContainer();return{height:a.innerHeight,width:a.innerWidth}},c.prototype.getDocumentSize=function(){return{height:document.documentElement.clientHeight||document.body.clientHeight,width:document.documentElement.clientWidth||document.body.clientWidth}},c.prototype.getSiteScroll=function(){var a=this.getSiteContainer()||{};return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}},c.prototype.getCurrentPopupScroll=function(){var b=document.getElementById("POPUPS_ROOT");return{x:a.get(b,"scrollLeft",0),y:a.get(b,"scrollTop",0)}},c.prototype.getBrowserFlags=function(){return this.getSiteAPI().getSiteData().browserFlags()},c.prototype.getVisibilityState=function(){var a="undefined"!=typeof document;return{hidden:a&&document.hidden}},c.prototype.getAspectComponentByRef=function(a){var b=this._site.refs.siteAspectsContainer;return b.refs[a]},c.prototype.setSiteRootHiddenState=function(a,b){this._site.setState({siteRootHidden:a},b)},c.prototype.notifyAspects=function(a){this._site.notifyAspects(a)},c}),define("core/siteRender/siteAspectsMixin",["lodash","zepto","core/core/siteAspectsRegistry","core/siteRender/SiteAspectsSiteAPI","experiment","utils"],function(a,b,c,d,e,f){"use strict";function h(b,c,d){return a.map(b,function(b){var e=b[c];return a.isFunction(e)?e.apply(b,d)||g:g})}function m(){this.notifyAspects("orientationchange"),this.timeout=window.setTimeout(this.notifyAspects.bind(this,j.resize),300)}function n(){var b=this.siteAPI.getRootIdsWhichShouldBeRendered();if(!a.isEqual(b,this._previoslyRenderedRoots)){var c=a.difference(this._previoslyRenderedRoots,b),d=a.difference(b,this._previoslyRenderedRoots);this._rootsAddedAndNotYetLayouted=a(this._rootsAddedAndNotYetLayouted).concat(d).difference(c).uniq().value(),this._previoslyRenderedRoots=a.clone(b),this.notifyAspects(i.renderedRootsChanged,d,c)}}var g=[],i={mount:"mount",unmount:"unmount",urlPageChange:"urlPageChange",renderedRootsChanged:"renderedRootsChanged",addedRenderedRootsDidLayout:"addedRenderedRootsDidLayout",popupChange:"popupChange",modeChange:"modeChange",slideChange:"slideChange",didLayout:"didLayout",siteReady:"siteReady",willMount:"willMount",willUpdate:"willUpdate"},j={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"},k={visibilitychange:"visibilitychange"},l=a.assign(a.clone(i),j,k),o={didLayout:function(){if(!a.isEmpty(this._rootsAddedAndNotYetLayouted)){var b=this._rootsAddedAndNotYetLayouted;this._rootsAddedAndNotYetLayouted=[],this.notifyAspects(i.addedRenderedRootsDidLayout,b)}}};return{supportedEvents:l,getAllSiteAspects:function(){return this._addMissingAspects(),this.siteAspects},getInitialState:function(){this._aspectsSiteAPI=new d(this),this.siteAspects={},this._siteAspectsEventsRegistry={},this._listenersOnWindow=[],this._listenersOnDocument=[],this._previoslyRenderedRoots=[],this._rootsAddedAndNotYetLayouted=[]},componentWillMount:function(){this._addMissingAspects(),this.notifyAspects(this.supportedEvents.willMount)},componentWillUpdate:function(){this.notifyAspects(this.supportedEvents.willUpdate)},_addMissingAspects:function(){a.forEach(c.getAllAspectConstructors(),function(a,b){this.siteAspects[b]||(this.siteAspects[b]=new a(this._aspectsSiteAPI))},this)},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectsReactComponents:function(){return a.flattenDeep(h(this.siteAspects,"getReactComponents",[this.loadedStyles]))},getAspectsComponentStructures:function(){return a.flattenDeep(h(this.siteAspects,"getComponentStructures"))},componentDidMount:function(){var e,c=b(window),d=b(document);a.forEach(j,function(a){e={eventName:a,listener:this.notifyAspects.bind(this,a)},this._listenersOnWindow.push(e),c.on(a,e.listener)},this),a.forEach(k,function(a){e={eventName:a,listener:this.notifyAspects.bind(this,a)},this._listenersOnDocument.push(e),d.on(a,e.listener)},this),e={eventName:j.orientationchange,listener:m.bind(this)},this._listenersOnWindow.push(e),c.on(e.eventName,e.listener),this.notifyAspects("mount"),n.call(this)},componentDidUpdate:function(){this.isChangingUrlPage&&this.notifyAspects("urlPageChange"),e.isOpen("sv_popups")&&this.isChangingPopup&&this.notifyAspects("popupChange"),n.call(this)},componentWillUnmount:function(){var c=b(window),d=b(document);a.forEach(this._listenersOnWindow,function(a){c.off(a.eventName,a.listener)}),a.forEach(this._listenersOnDocument,function(a){d.off(a.eventName,a.listener)}),window.clearTimeout(this.timeout),this._aspectsSiteAPI.onSiteUnmount(),this.notifyAspects("unmount")},notifyAspects:function(b){a.has(o,b)&&o[b].apply(this,a.rest(arguments));var c=this._siteAspectsEventsRegistry[b];if(c&&c.length){var d=c.slice();a.invoke(d,"apply",void 0,a.rest(arguments))}},registerAspectToEvent:function(a,b){return a===i.siteReady&&this.siteIsReady?void b():l[a]?(this._siteAspectsEventsRegistry[a]=this._siteAspectsEventsRegistry[a]||[],void this._siteAspectsEventsRegistry[a].push(b)):void f.log.error("this event isn't supported by site "+a)},unregisterAspectFromEvent:function(a,b){var c=this._siteAspectsEventsRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}}}),define("core/siteRender/siteAspectsDomContainer",["react"],function(a){"use strict";return a.createClass({displayName:"siteAspectsDomContainer",render:function(){return a.DOM.div(null,this.props.aspectsCompsFunc())}})}),define("core/siteRender/extraSiteHeight",["react"],function(a){"use strict";return a.createClass({displayName:"extraSiteHeight",render:function(){return a.DOM.div({style:{height:this.props.siteData.renderFlags.extraSiteHeight,position:"relative"}})}})}),define("core/siteRender/blockingLayer",["lodash","react"],function(a,b){"use strict";var c=Math.pow(2,31)-2;return b.createClass({displayName:"blockingLayer",getStyle:function(){return a.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:c},this.props.siteData.renderFlags.blockingLayer||this.props.siteData.renderFlags.blockingPopupLayer)},render:function(){return b.DOM.div({style:this.getStyle()})}})}),define("core/siteRender/wixAdsInstatiator",["core/siteRender/compFactory","core/core/componentPropsBuilder","lodash"],function(a,b,c){"use strict";var d={mobile:{footerLabel:"7c3dbd_67131d7bd570478689be752141d4e28a.jpg",adUrl:"http://www.wix.com/"},desktop:{topLabel:'<span class="smallMusa">(Wix-Logo) </span>Create a <span class="smallLogo">Wix</span> site!',topContent:'100s of templates<br />No coding needed<br /><span class="emphasis spacer">Start now >></span>',footerLabel:'<div class="adFootBox"><div class="siteBanner" ><div class="siteBanner"><div class="wrapper"><div class="bigMusa">(Wix Logo)</div><div class="txt shd" style="color:#fff">This site was created using </div> <div class="txt shd"><a href="http://www.wix.com?utm_campaign=vir_wixad_live" style="color:#fff"> WIX.com. </a></div> <div class="txt shd" style="color:#fff"> Create your own for FREE <span class="emphasis"> >></span></div></div></div></div></div>',adUrl:"http://www.wix.com/lpviral/en900viral?utm_campaign=vir_wixad_live"}};return{getStructure:function(a){var b=a.isMobileView(),c=b?"wysiwyg.viewer.components.WixAdsMobile":"wysiwyg.viewer.components.WixAdsDesktop",d="wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin";return{id:a.WIX_ADS_ID,skin:d,componentType:c,styleId:"wixAds",layout:{position:b?"static":"absolute"}}},getWixAdsComponent:function(e){var h,f=e.getSiteData(),g=f.isMobileView();h=g?f.mobileAdData&&!c.isEmpty(f.mobileAdData.adUrl)?f.mobileAdData:d.mobile:f.adData&&!c.isEmpty(f.adData.adUrl)?f.adData:d.desktop;var i=this.getStructure(f),j=i.componentType,k=a.getCompClass(j),l=b.getCompProps(i,e);return l.adData=h,k(l)}}}),define("core/siteRender/mobileAppBannerInstantiator",["lodash","core/siteRender/compFactory","core/core/componentPropsBuilder","utils","experiment"],function(a,b,c,d,e){"use strict";function g(){return{id:"MOBILE_APP_BANNER",skin:"wysiwyg.viewer.skins.MobileAppBannerBasicSkin",componentType:f,styleId:"mobileAppBanner",layout:{position:"static"}}}function l(b){return a.isString(b)&&!a.isEmpty(b)}var f="wysiwyg.viewer.components.MobileAppBanner",h=function(a){return a.getExternalBaseUrl()+"/app"},i="wixMobileAppBanner",j=12096e5,k=d.cookieUtils;return{shouldShowMobileAppBanner:function(a){var b=e.isOpen("mobileAppBannerOnMobile"),c=e.isOpen("mobileAppBannerOnDesktop");return this.isHidden||!b&&!c?!1:a.isPageLandingPage(a.getPrimaryPageId())?!1:this.getMobileAppBannerModel(a)?this.doesHideBannerCookieExist()?!1:a.isMobileView()&&b?!0:!(a.isMobileView()||!c):!1},getMobileAppBannerModel:function(a){var b=a.getClientSpecMapEntriesByType("mobileapp")[0];return b&&l(b.name)&&l(b.iconUrl)?{appName:b.name,iconUrl:b.iconUrl}:null},setHideBannerCookie:function(a){var b=(new Date).toGMTString();k.setCookie(i,b,j,a.currentUrl.hostname,a.getMainPagePath(),!1),k.getCookie(i)||k.setCookie(i,b,j,a.currentUrl.hostname,void 0,!1)},doesHideBannerCookieExist:function(){return!a.isUndefined(k.getCookie(i))},closeBanner:function(a){var b=a.getSiteData();this.isHidden=!0,this.setHideBannerCookie(b),a.forceUpdate()},getMobileAppBannerComponent:function(a){var d=a.getSiteData();if(this.shouldShowMobileAppBanner(d)){var e=c.getCompProps(g(),a);e.siteData=d,e.bannerModel=this.getMobileAppBannerModel(d),e.appDownloadUrl=h(d),e.closeBanner=this.closeBanner.bind(this,a);var i=b.getCompClass(f);return i(e)}}}}),define("core/bi/events.json",[],function(){return{SITE_MEMBER_LOGIN_SUCCESS:{eventId:520,adapter:"hed",params:{c1:"userName"}},PAGE_PERFORMANCE_DATA:{eventId:350,adapter:"ugc-viewer",params:{c1:"preClient",c2:"client",c3:"santaVersion",i1:"timeoutSeconds",is_premium:"isPremium",is_wixsite:"isWixSite",dns_time:"dnsTime",response_time:"responseTime",experiment:"experiment",page_id:"pageId"},sampleRatio:1},LOAD_IMAGES_DATA:{eventId:341,adapter:"mlt",params:{c1:"imagePerf"}},LP_BUTTON_CLICK:{eventId:352,adapter:"ugc-viewer",params:{postSignUp:"postSignUp",postLogin:"postLogin",target_url:"targetUrl",button_name:"buttonName",active_fold:"activeFold",total_folds:"totalFolds",text:"text",component_id:"componentId",loginCompName:"loginCompName"},wixSiteSampleRatio:0},IMAGES_DOWNLOAD:{eventId:353,adapter:"ugc-viewer",params:{imagePerf:"imagePerf"}},MONOTYPE_FONTS_USED_ON_SITE:{eventId:355,adapter:"ugc-viewer",params:{}},USER_INTERACTION:{eventId:368,adapter:"ugc-viewer",params:{type:"type",time:"time"}},UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}}}}),define("core/bi/events",["core/bi/events.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;return d.register("core","event",a),a}),define("core/core/siteBI",["lodash","zepto","utils","core/bi/events"],function(a,b,c,d){"use strict";function v(b){var c=b.rendererModel||b.editorModel||{};return a.reduce(c.runningExperiments,function(a,b,c){var d=g.indexOf(c);return-1===d?a:a+Math.pow(2,d)},0)}function w(b,c){function f(a,b){return"number"!=typeof b?b:b?b-a:void 0}if(!(c>u)){"lastTimeStamp"in b.wixBiSession&&(u=c);var g=b.isPremiumDomain(),h="WixSite"===b.rendererModel.siteInfo.documentType,i=a.assign({},t,{initialTimestamp:b.wixBiSession.initialTimestamp});i=a.mapValues(i,f.bind(null,i.navigationStart||i.initialTimestamp));var j=a.omit(b.wixBiSession,function(a,b){return"number"!=typeof a||"et"===b});if(s.getEntries){var k=s.getEntries().filter(function(a){return-1!==a.name.search(/.min.js$/)});if(k.length){var l=t.navigationStart||0,m=a.find(k,function(b){return a.includes(b.name,"skins")});m&&(j.skinsStart=Math.round(l+m.startTime),j.skinsEnd=Math.round(j.skinsStart+m.duration)),j.packagesEnd=0,k.forEach(function(a){j.packagesEnd=Math.max(j.packagesEnd,a.startTime+a.duration)}),j.packagesEnd=Math.round(l+j.packagesEnd)}}j=a.mapValues(j,f.bind(null,j.initialTimestamp||0));var n=b.santaBase.match(/([\d\.]+)\/?$/);n=n&&n[1]||"unknown";var o={isPremium:g?1:0,isWixSite:h?1:0,preClient:JSON.stringify(i),client:JSON.stringify(j),santaVersion:n,timeoutSeconds:c,experiment:v(b),pageId:b.getCurrentUrlPageId()},p=i.domainLookupEnd-i.domainLookupStart;isNaN(p)||(o.dnsTime=p);var q=i.responseEnd-i.connectStart;isNaN(q)||(o.responseTime=q),b.wixBiSession.viewerSessionId&&e.reportBI(b,d.PAGE_PERFORMANCE_DATA,o)}}function x(b){function f(a){return"_"+a+"k"}function h(b){var d=c.map(f).concat([g]);return a.zipObject(d,a.times(d.length,b))}function i(b,c){var d={url:b.src,hadError:!1,width:b.width,height:b.height,size:b.width*b.height},e=c?c.startTime:0,f=c?c.duration:0;return a.defaults(d,{hadError:!c,start:Math.round(e),end:Math.round(e+f),speed:Math.round(d.size/(f+.01)*100)/100}),d}function j(b){var d=a.findLastIndex(c,function(a){return 1e3*a<b.size})+1;return d<c.length?f(c[d]):g}var c=[100,200,300,400,500,1e3,2e3,3e3],g="_over"+a.last(c)+"k",k=a(document.getElementsByTagName("img")).filter(function(b){return a.startsWith(b.src,window.serviceTopology.staticMediaUrl)}).reduce(function(a,b){if(b.complete){var c=s.getEntriesByName(b.src)[0],d=i(b,c);if(d.hadError)a.errors++;else{var e=j(d);a.imagesBySize[e]++,a.imagesSamples[e].length<q&&a.imagesSamples[e].push(d)}}else a.loading++;return a},{loading:0,imagesBySize:h(a.constant(0)),imagesSamples:h(function(){return[]}),errors:0});e.reportBI(b,d.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(k)})}function y(b){function g(){return a(s.getEntriesByType("resource")).toArray().filter(function(b){return b.duration>h&&a.startsWith(b.name,f)}).value()}function k(a){var b=a.name.replace(f,""),c=b.match(/\.([^\/]+).+w_(\d+),h_(\d+),/);if(c){var d=Number(c[2]),e=Number(c[3]);return{url:b,format:c[1],width:d,height:e,size:d*e}}return{}}function l(b){var c=k(b),d={start:Math.round(b.startTime),end:Math.round(b.startTime+b.duration),ttfb:Math.round(b.responseStart-b.requestStart),dns:Math.round(b.domainLookupEnd-b.domainLookupStart),ssl:b.secureConnectionStart?Math.round(b.connectEnd-b.secureConnectionStart):0,speed:b.duration>0?Math.round(c.size/b.duration):0,fileSize:b.fileSize,kbps:b.duration>0?Math.round(1e3*b.fileSize/b.duration):0};return a.assign({},c,d)}function m(f){function h(b){return new f(function(d,e){c.ajaxLibrary.ajax({type:"HEAD",url:b.name,success:function(c,e,f){var g=f.getResponseHeader("Content-Length"),h=g&&Math.round(g/1024);d(a.assign(b,{fileSize:h}))},error:function(a,b,c){e(c)}})})}var k=g().map(h);f.all(k).then(function(c){var f=a(c).filter(function(a){return a.fileSize>j}).sortBy("fileSize").takeRight(r).map(l).filter(function(a){return a.kbps<=i}).value();if(f.length){var g=a.reduce(f,function(a,b){return{size:a.size+b.fileSize,duration:a.duration+b.end-b.start}},{size:0,duration:0});e.reportBI(b,d.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(f),kbps:Math.round(1e3*g.size/g.duration)})}},a.noop)}var f=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing";window.Promise&&window.Promise.all?m(window.Promise):requirejs(["bluebird"],m,a.noop)}function z(c){function h(){++g>k&&f("key")}function j(){++i>l&&f("mouse")}function o(){++n>m&&f("scroll")}if(b){var f=function(g){b(window).off(".bi"),f=a.noop,e.reportBI(c,d.USER_INTERACTION,{type:g})},g=0,i=0,n=0;b(window).on({"keydown.bi":h,"mousemove.bi":j,"scroll.bi":o})}}function A(){var b=s.getEntriesByType("resource"),c=a.filter(b,function(a){return/\.mp4$/.test(a.name)});c.forEach(function(b){f.addPageAction("videoPerformance",a.pick(b,["name","startTime","requestStart","responseStart","responseEnd"]))})}var e=c.logger,f=c.newrelic,g=["useHttps"],h=25,i=9216,j=5,k=2,l=44,m=11;if("undefined"==typeof window)return{init:function(){},send:function(){}};var n=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited"),o=["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"],p=[5,15,30],q=3,r=10,s=window.performance||{},t=s.timing;t=a.pick(t,o);var u,B=a.now();return{init:function(b){n||(e.shouldSendReport(b,d.USER_INTERACTION)&&setTimeout(function(){z(b)},300),e.shouldSendReport(b)&&(u=1/0,B=a.now(),a.forEach(p,function(a){setTimeout(w.bind(null,b,a),1e3*a)}),s.getEntriesByName&&setTimeout(function(){x(b),y(b)},10500)))},send:function(b){n||(e.shouldSendReport(b,d.PAGE_PERFORMANCE_DATA)&&setTimeout(function(){w(b,Math.round((a.now()-B)/1e3))},300),s.getEntriesByType&&e.shouldSendReport(b,{sampleRatio:1})&&setTimeout(function(){A()},3e3))}}}),define("core/siteRender/WixPopupRoot",["lodash","react","reactDOM","core/siteRender/WixPageReact","core/core/componentPropsBuilder","core/siteRender/blockingLayer"],function(a,b,c,d,e,f){"use strict";function i(a){var b={pointerEvents:"none"
};return a.renderFlags.allowSiteOverflow||(b.overflow="hidden"),b}function j(a){return"preview"===a.renderFlags.componentViewMode}var g=b.createFactory(d),h=b.createFactory(f);return b.createClass({displayName:"WixPopupRoot",getInitialState:function(){return{activePopupId:this.props.currentPopupId,activePopupKey:1,animating:!1}},shouldComponentUpdate:function(b,c){if(!b.currentPopupId&&this.state.activePopupId&&!this.state.animating){var d=this.props.siteAPI.getSiteAspect("actionsAspect"),e=a.keys(this.refs[this.state.activePopupId].refs);return this.setState({animating:!0}),d.registerComponentsExit(e,function(){this.animating=!1,b.currentPopupId||this.setState({activePopupId:null,animating:!1}),d.handleNavigationComplete()}.bind(this)),!1}return!c.animating||b.currentPopupId},componentWillReceiveProps:function(a,b){a.currentPopupId!==b.activePopupId&&this.setState({activePopupId:a.currentPopupId,activePopupKey:(b.activePopupKey||0)+1,animating:!1})},componentDidUpdate:function(){var b,a=this.state.activePopupId;a&&j(this.props.siteData)&&(b=this.props.siteAPI.getRuntimeDal(),b.markPopupAsBeenOpened(a))},render:function(){var a=this.props.siteData,c=this.state.activePopupId;if(c){var d=a.getPageData(c).structure,f=e.getCompProps(d,this.props.siteAPI,c,this.props.loadedStyles);return f.key=this.state.activePopupKey,b.DOM.div({id:"POPUPS_ROOT",className:"POPUPS_ROOT",key:"POPUPS_ROOT",style:i(a,this.props.siteRootStyle),tabIndex:0},g(f),this.props.blockingPopupLayer?h({siteData:a}):null)}return null},componentDidMount:function(){var a=c.findDOMNode(this);a&&a.focus()}})}),define("core/siteRender/siteClickHandler",["lodash","zepto","utils"],function(a,b,c){"use strict";function d(a){return a.stopPropagation(),a.preventDefault(),!1}function e(a,b){if(a.attr("data-mobile")){var d=c.stringUtils.isTrue(a.attr("data-mobile"));b.setMobileView(d),c.mobileViewportFixer.fixViewportTag(b)}}function f(b,d,e){var f=this.props.siteData;if("true"!==a.get(f,["rendererModel","runningExperiments","specs.users.NewLoginVelocityTemplateFT"])){var g=e&&c.stringUtils.startsWith(e,c.linkRenderer.CONSTS.LOGIN_TO_WIX_URL,!0);if(g&&f.renderFlags.isExternalNavigationAllowed)return this.siteAPI.getSiteAspect("LoginToWix").openLoginToWixForm(e,!0,b.target),!0}var h=c.linkRenderer.isExternalLink(f,e),i=c.linkRenderer.isEmailLink(e),j="_self"===d.attr("target"),k=f.renderRealtimeConfig.previewTooltipCallback,l=!f.renderFlags.isExternalNavigationAllowed&&k&&(h&&j||i);if(l){var m=b.target.getBoundingClientRect();return k(m,"text_editor_inactive_link_on_preview"),!0}return!1}function g(a,b,d){var e=a.attr("data-no-physical-url"),f=e||b;return c.wixUrlParser.parseUrl(d,f)}function h(a){return!a.attr("data-no-physical-url")}function i(b,c){a.assign(b,{pageItemAdditionalData:c.attr("data-page-item-context"),anchorData:c.attr("data-anchor")})}function j(a,b){var c=this.props.siteData,d=g(a,b,c);if(!d||"_blank"===a.attr("target"))return!1;i(d,a);var e=h(a);return this.handleNavigation(d,b,e),!0}function k(a){var c="a"===a.target.tagName.toLowerCase()?b(a.target):b(a.target).parents("a"),g=c.attr("href");e(c,this.props.siteData);var h=f.call(this,a,c,g);return h||(h=j.call(this,c,g)),this.siteAPI.isSelectionSharerVisible()&&this.siteAPI.hideSelectionSharer(),h?d(a):!0}return{clickHandler:k}}),define("core/siteRender/siteTraversalMixin",["lodash"],function(a){"use strict";function b(a,b){return a[b]&&!a[b].isStub()}function c(b){return a(b).omit("").pick(function(a){return!a.isStub()}).keys().value()}function d(){var d=this.getMasterPage();if(!d)return[];var e=this.props.siteData,f=a.get(d,["refs","SITE_PAGES","refs"]),g=a.get(this,["refs","popupRoot","refs"],{}),h=e.getPrimaryPageId(),i=e.getCurrentPopupId();return!b(f,h)||i&&!b(g,i)?a.flatten(["masterPage",c(f),c(g)]):a.compact(["masterPage",h,i])}function e(){var b=this.props.siteData;if(!this.getMasterPage()){var c=b.getExistingRootNavigationInfo(b.getCurrentUrlPageId()),d=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(c);if(!d)return[]}return a.compact(["masterPage",b.getPrimaryPageId(),b.getCurrentPopupId()])}function f(a){var b=this.getPageById(a),c=b&&b.refs;return c||null}return{getAllRenderedRootIds:d,getRootIdsWhichShouldBeRendered:e,getComponentsByPageId:f}}),define("core/components/selectionSharer/selectionSharer",["lodash","react","utils"],function(a,b,c){"use strict";var d=c.socialShareHandler,e="/static/images/selectionSharerSocialIcons/",f="facebook.svg",g="twitter.svg",h="mail.svg";return b.createClass({displayName:"selectionSharer",getInitialState:function(){return{visible:!1,position:null,shareInfo:null}},sharePostWrapper:function(a){var b=this.state.shareInfo;b.url=a,d.handleShareRequest({url:a,service:b.service,title:b.title,hashTags:b.hashTags||"",imageUrl:b.imgSrc,addDeepLinkParam:!1,description:b.description},this.props.siteAPI)},show:function(a,b){this.setState({visible:!0,position:a,shareInfo:b})},hide:function(){this.setState({visible:!1,position:null,shareInfo:null})},isVisible:function(){return this.state.visible},twitterClickHandler:function(){this.hide();var a=this.state.shareInfo;a.service="twitter",a.title=a.description,d.shortenURL(a.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,a.url))},facebookClickHandler:function(){this.hide();var a=this.state.shareInfo;a.service="facebook",d.shortenURL(a.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,a.url))},mailClickHandler:function(){this.hide();var a=this.state.shareInfo;a.service="email",a.description=a.description+"\r\n( "+a.url+" )",d.handleShareRequest(a,this.props.siteAPI)},render:function(){if(this.state.visible){var a={position:"absolute",left:this.state.position.x+"px",top:this.state.position.y+"px"},c=this.props.siteBasePath+e;return b.createElement("div",{className:"selectionSharerContainer",style:a},[b.createElement("img",{key:"selection-sharer-facebook-img",className:"selectionSharerOption",src:c+f,onClick:this.facebookClickHandler}),b.createElement("div",{key:"selection-sharer-first-separator",className:"selectionSharerVerticalSeparator"}),b.createElement("img",{key:"selection-sharer-twitter-img",className:"selectionSharerOption",src:c+g,onClick:this.twitterClickHandler}),b.createElement("div",{key:"selection-sharer-second-separator",className:"selectionSharerVerticalSeparator"}),b.createElement("img",{key:"selection-sharer-mail-img",className:"selectionSharerOption",src:c+h,onClick:this.mailClickHandler})])}return null}})}),define("core/siteRender/WixSiteReact",["zepto","lodash","react","reactDOM","core/siteRender/styleCollector","core/siteRender/WixThemeReact","core/siteRender/WixPageReact","core/siteRender/wixBackgroundInstantiator","layout","utils","core/siteRender/SiteAPI","core/siteRender/siteAspectsMixin","animations","core/siteRender/siteAspectsDomContainer","core/siteRender/extraSiteHeight","core/siteRender/blockingLayer","core/core/componentPropsBuilder","core/siteRender/wixAdsInstatiator","core/siteRender/mobileAppBannerInstantiator","mousetrap","core/core/siteBI","core/components/renderDoneMixin","core/siteRender/WixPopupRoot","core/siteRender/siteClickHandler","core/siteRender/siteTraversalMixin","core/components/selectionSharer/selectionSharer","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){"use strict";function M(a){return!a.getSiteData().isMobileView()}function N(a,c){return b.isFunction(a)?a(c):a}function O(a,b,c){return R(c)||N(D[a],b)}function P(a,b){return N(E[a],b)}function Q(a,b){return N(C[a],b)}function R(a){return"wysiwyg.viewer.components.Group"===a}function S(a,c){var d=c.getSiteData(),e=b.last(a),f=L.getChildrenData(e,d.isMobileView()),g=[e].concat(f);if(a.length>1){var h=a[a.length-2];if(O(e.componentType,c,h.componentType)&&g.push(h),P(e.componentType,c)){var i=L.getChildrenData(h,d.isMobileView());g=g.concat(i)}Q(e.componentType,c)&&b.forEach(f,function(a){var b=L.getChildrenData(a,d.isMobileView());g=g.concat(b)})}return g}function V(a,c){var d=this.props.siteData.getPageData(this.props.rootId).structure;d=b.merge({},d,{layout:{position:this.props.siteRootPosition}});var e=q.getCompProps(d,a,this.props.rootId,c,this.props.viewerPrivateServices);return e.ref=this.props.rootId,e.refInParent=e.ref,e.className="SITE_ROOT",e.firstPage=!0,delete e.id,e.style={width:this.props.siteData.getSiteWidth()},e.key=(a.getSiteData().isMobileView()?"mobile_":"desktop_")+"siteRoot",A.isOpen("sv_hoverBox")&&(e.activeModes=j.objectUtils.cloneDeep(this.props.siteData.activeModes),e.measureMap=this.deletedMeasureMap||this.props.siteData.measureMap),e}function W(){var a=this;return b.throttle(function(){!a.dead&&a.getMasterPage()&&(a.props.siteData.updateScreenSize(),a.forceUpdate())},500,{leading:!1,trailing:!0})}function X(){if(window.rendererModel){var a=b(window.rendererModel.runningExperiments).pick(function(a){return"new"===a}).keys().value();t.bind("ctrl+alt+shift+e",function(){window.alert("Active Experiments:\n"+a).join("\n")})}}function Y(){var a=this.props.siteData,c=a.baseVersion||"could not retrieve version!";t.bind("ctrl+alt+shift+v",function(){window.alert("You are running React!\nVersion: "+c)});var d=b.find(a.currentUrl.query,function(a,b){return"alertversion"===b.toLowerCase()});d&&(a.isMobileDevice()||a.isTabletDevice())&&window.alert("You are running React!\nVersion: "+c)}function Z(a){a.componentDidLayout&&a.componentDidLayout.call(a),a.componentDidLayoutAnimations&&a.componentDidLayoutAnimations.call(a),b.forOwn(a.refs,Z)}function $(a){b.forEach(a,Z)}function _(a){var d,c=b.clone(a.getMasterPageData().structure);return A.isOpen("viewerGeneratedAnchors")&&(d=b.get(a,["anchorsMap",c.id,a.getViewMode()])),["children","mobileComponents"].forEach(function(a){var e=b.chain(c[a]).find({id:"PAGES_CONTAINER"}).cloneDeep().value();aa(e,d),c[a]=[e]}),c}function aa(a,b){var c={distance:0,locked:!0,originalValue:a.layout.height,targetComponent:"SITE_STRUCTURE",topToTop:a.layout.height,type:"BOTTOM_PARENT"};if(b)b[a.id]=[c];else{for(;a.layout.anchors.length;)a.layout.anchors.pop();a.layout.anchors.push(c)}a.layout.y=0}function ba(a){var c=this.getAspectsComponentStructures(),d=this.props.siteData,e=b.transform(c,function(a,b){a[b.id]={structure:b,getDomNodeFunc:T.bind(null,this.refs.siteAspectsContainer)}},{},this),f=this.state.currentUrlPageId;if(!a)return e;if(e.inner={structure:d.pagesData[f].structure,pageId:f,getDomNodeFunc:T.bind(null,this.getPageById(f))},e.outer={structure:d.getMasterPageData().structure,getDomNodeFunc:T.bind(null,this.refs[this.props.rootId])},d.isPageLandingPage(f)&&(e.outer.structure=_(d)),e.siteBackground={structure:h.getWixBgStructure(),getDomNodeFunc:T.bind(null,this)},A.isOpen("sv_popups")){var g=this.state.currentPopupId;g&&(e[g]={structure:d.getPageData(g).structure,getDomNodeFunc:T.bind(null,this.refs.popupRoot,g),pageId:g})}if(d.shouldShowWixAds()){var i=r.getStructure(d);e.wixAds={structure:i,getDomNodeFunc:T.bind(null,this)}}return e}function ca(b){var c=a(".hiddenTillReady");b.isMobileDevice()?(a(".wix-menu-enabled").removeClass("wix-menu-enabled"),c.css({display:"none"})):c.removeClass("hiddenTillReady")}function da(a){return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}}function ea(a,b){var c=Math.abs(b-a),d=U(c);return d}function fa(c,e){if(c){var f={};b.assign(f,e);var g=j.style.getPrefixedTransform(),h=ga(g);f[h]=e[g],g!==h&&(f[g]=""),c.hasOwnProperty("getRootStyle")&&b.assign(f,c.getRootStyle(f)),a(d.findDOMNode(c)).css(f)}}function ga(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function ha(a,b){return a.getSiteAspect("siteMembers").isPageAllowed(b)}function ia(a,c){var d=b.keys(c),e=function(d){return b.isUndefined(a[d])||b.isEqual(a[d],c[d])};return!b.every(d,e)}var B=["components.layout.update","components.layout.updateAndAdjustLayout","siteSegments.layout.update","components.layout.updateDock","components.layout.setDock","components.layout.unDock"],C={"wysiwyg.viewer.components.BoxSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0},D={"wysiwyg.viewer.components.Column":M},E={"wysiwyg.viewer.components.Column":M},F=c.createFactory(f),G=c.createFactory(g),H=c.createFactory(w),I=c.createFactory(n),J=c.createFactory(o),K=c.createFactory(p),L=j.dataUtils,T=function(a,b,c,e,f,g,h){return a=a&&b?a.refs[b]:a,a=a&&c?a.refs[c]:a,a=a&&e?a.refs[e]:a,a=a&&f?a.refs[f]:a,a=a&&g?a.refs[g]:a,a=a&&h?a.refs[h]:a,a&&d.findDOMNode(a)},U=j.math.interpolateSegmentsFunction([[0,.6],[360,.8],[720,1],[1440,1.2],[7200,2.8],[9600,3],[1e4,3]]),ja=function(a){requirejs(["tpa"],function(b){function c(a){b.common.utils.reportAppCounter(a)}b.common&&b.common.utils&&(ja=c,c(a))},b.noop)};return c.createClass({displayName:"WixSite",mixins:[l,v,x,y],propTypes:{wixCodeAppApi:c.PropTypes.shape({init:c.PropTypes.func,sendMessage:c.PropTypes.func,registerMessageHandler:c.PropTypes.func})},getDefaultProps:function(){return{siteRootPosition:"static",scopedRoot:null,rootId:"masterPage",wixCodeAppApi:{init:b.noop,sendMessage:b.noop,registerMessageHandler:b.noop}}},getPrimaryPage:function(){var a=this.refs[this.props.rootId];if("masterPage"===this.props.rootId&&a){var b=this.props.siteData.getPrimaryPageId();a=a.refs.SITE_PAGES.refs[b]}return a},getCurrentPopup:function(){var a=this.props.siteData.getCurrentPopupId();return a?j.reactComponentUtils.getRef(this,"popupRoot",a):null},getMasterPage:function(){var a=this.refs[this.props.rootId];return a},getPageById:function(a){var b=this.getMasterPage();return a===this.props.rootId?b:b&&b.refs.SITE_PAGES.refs[a]?b.refs.SITE_PAGES.refs[a]:j.reactComponentUtils.getRef(this,"popupRoot",a)},isDomOnly:function(a,c,d,e){var f=b.isEmpty(b.without.apply(b,[e].concat(B))),g=d.style.position===a.props.style.position,h=d.style.transform===a.props.style.transform,i=!b.has(a,"lastScale")||c.layout.scale===a.lastScale,j=b.isEqual(d.compProp,a.props.compProp);return f&&g&&i&&j&&h},isDomOnlyByMethodNamesAndCompId:function(a,c){var d=this.getPageOfComp(c),e=d.props.rootId,f=d.refs[c],g=L.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[e].structure),h=b.last(g),i=q.getCompProps(h,this.siteAPI,e,this.loadedStyles);return this.isDomOnly(f,h,i,a)},updateMultipleComps:function(a,c){function e(c){d.push(c),d.length===a.length&&(this.lockedCompIds=b.flatten(d),this.reLayout())}this.tempMeasureMap=this.props.siteData.measureMap;var d=[];this.noEnforceAnchors=c,b.forEach(a,this.updateDOMOnlySingleComp.bind(this,e.bind(this)))},updateDOMOnlySingleComp:function(a,c){var d=this.getPageOfComp(c),e=d.props.rootId,f=d.refs[c],g=L.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[e].structure),h=b.last(g),i=q.getCompProps(h,this.siteAPI,e,this.loadedStyles),j=S(g,this.siteAPI),k=b.pluck(j,"id");fa(f,i.style);var l=b.reject(j,h);this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]=this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]||b.clone(f.props.style),b.forEach(l,function(a){fa(d.refs[a.id],q.getStyle(a.layout,this.siteAPI))},this),a(k)},getPageOfComp:function(a){var c=b.find(this.siteAPI.getAllRenderedRootIds(),function(b){var c=this.getPageById(b);if(!c)return!1;var d=c.refs;return!!d[a]},this);return this.getPageById(c)},updateSingleComp:function(a,c,d){function s(){p&&(h.componentWillUpdate=p),r&&(h.componentDidUpdate=r),this.noEnforceAnchors=c,b.forEach(o,function(a){a()}),this.lockedCompIds=b.pluck(S(i,this.siteAPI),"id"),this.reLayout()}var e=this.props.siteData;e.dataResolver.setReadingFromCache(!1),this.tempMeasureMap=e.measureMap,this.deletedMeasureMap=e.measureMap,delete e.measureMap;var f=this.getPageOfComp(a),g=f.props.rootId,h=f.refs[a],i=L.findHierarchyInStructure(a,e.isMobileView(),e.pagesData[g].structure),k=b.clone(b.last(i));k.layout=b.clone(k.layout);var l=q.getCompProps(k,this.siteAPI,g,this.loadedStyles);e.dataResolver.setReadingFromCache(!0);var m=j.style.getPrefixedTransform(),n=ga(m);l.style[n]=l.style[m],this.markInvokedMethodNames(d);var o=[],p=null,r=null;this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]&&(fa(h,this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]),delete this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]);var t={};if(h.componentWillReceiveProps){var u=h.setState;h.setState=function(a,c){b.assign(t,a),c&&o.push(c)},h.componentWillReceiveProps(l,h.state),h.setState=u}h.componentWillUpdate&&(p=h.componentWillUpdate,h.componentWillUpdate=function(a,b){p.call(h,l,b)});var v=["compProp","compData","style"];if(A.isOpen("designData")&&v.push("compDesign"),h.componentDidUpdate){r=h.componentDidUpdate;var w=b.clone(h.props);b.forEach(v,function(a){w[a]=b.clone(w[a])}),h.componentDidUpdate=function(a,b){r.call(h,w,b)}}b.forEach(v,function(a){b.has(h.props,a)&&b.assign(h.props[a]||{},l[a])}),h.setState(t,s.bind(this))},scrollToAnchor:function(a,b){var c=this.props.getSiteContainer(),d=ea(da(c).y,a.y);m.animate("BaseScroll",c,d,0,{y:a.y,ease:"Sine.easeInOut",callbacks:{onUpdate:b}})},scrollToTop:function(){this.scrollToAnchor({y:0})},getInitialState:function(){return this.loadedStyles=this.loadedStyles||{},this.reLayoutPending=!1,this.siteAPI=new k(this),this.isBusy=!0,this.isChangingUrlPage=!0,this.noEnforceAnchors=!1,this.siteAPI.reportBeatEvent(7,this.props.siteData.getPrimaryPageId()),this.componentsUpdatedBySingleCompUpdateBehindReactsBack={},this.prevActiveModes=j.objectUtils.cloneDeep(this.props.siteData.activeModes),{}},componentWillMount:function(){var a=this.props.siteData,b=a.getCurrentUrlPageId(),c=a.getExistingRootNavigationInfo(b);c||(c=a.currentPageInfo,a.setRootNavigationInfo(c),b=c.pageId);var d=ha(this.siteAPI,c)?b:null;this.setState({currentUrlPageId:d,currentPopupId:null})},_addSiteStylesToLoaded:function(a,c){var d=a.getAllTheme(),f=this.getAspectsComponentStructures();if(c){var g=a.getAllPossiblyRenderedRoots();f=b.reduce(g,function(b,c){return b.push(a.pagesData[c].structure),b},f)}else f.push(a.getMasterPageData().structure);b.forEach(f,function(b){var c=a.pagesData[b.id]?b.id:a.MASTER_PAGE_ID;e.collectStyleIdsFromStructure(b,d,a,this.loadedStyles,c,a.isMobileView())},this)},markInvokedMethodNames:function(a){this.invokedMethodNames=b.union(this.invokedMethodNames||[],a)},componentWillUpdate:function(a,c){this.isBusy=!0,this.isChangingUrlPage=c.currentUrlPageId!==this.state.currentUrlPageId,A.isOpen("sv_popups")&&(this.isChangingPopup=c.currentPopupId!==this.state.currentPopupId),b.forEach(this.componentsUpdatedBySingleCompUpdateBehindReactsBack,function(a,b){var c=this._aspectsSiteAPI.getComponentById(b);c&&fa(c,a)},this),this.componentsUpdatedBySingleCompUpdateBehindReactsBack={},c.noEnforceAnchors&&c.noEnforceAnchors!==this.state.noEnforceAnchors&&(this.noEnforceAnchors=!0),c.forceUpdateIndex!==this.state.forceUpdateIndex?(this.props.siteData.clearCache(),this.tempMeasureMap=this.props.siteData.measureMap,this.deletedMeasureMap=this.props.siteData.measureMap,delete this.props.siteData.measureMap):this.markInvokedMethodNames(["*"]),ia(this.prevActiveModes,a.siteData.activeModes)&&(this.deletedMeasureMap=this.props.siteData.measureMap,delete this.props.siteData.measureMap)},render:function(){var a=this.props.siteData,d=a.getExistingRootNavigationInfo(a.getCurrentUrlPageId()),e=ha(this.siteAPI,d),f=[F({themeData:a.getAllTheme(),siteData:a,masterPage:a.getMasterPageData(),loadedStyles:this.loadedStyles,styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,ref:"theme",shouldRenderPage:e,siteAPI:this.siteAPI}),s.getMobileAppBannerComponent(this.siteAPI),a.shouldShowWixAds()?r.getWixAdsComponent(this.siteAPI):void 0,I({ref:"siteAspectsContainer",key:"siteAspectsContainer",aspectsCompsFunc:this.getAspectsReactComponents}),c.createElement(z,{ref:"selectionSharer",siteBasePath:a.santaBase,siteAPI:this.siteAPI})];if(a.renderFlags.extraSiteHeight>0&&!a.isMobileView()&&f.push(J({siteData:a})),a.renderFlags.blockingLayer&&f.push(K({siteData:a})),e){var g=V.call(this,this.siteAPI,this.loadedStyles),i=h.getWixBgComponent(this.siteAPI),j=this.getRootStyle();f.splice(3,0,i,c.DOM.div({className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:j},G(g))),A.isOpen("sv_popups")&&f.splice(5,0,H({currentPopupId:this.state.currentPopupId,siteAPI:this.siteAPI,siteData:a,loadedStyles:this.loadedStyles,ref:"popupRoot",siteRootStyle:j,blockingPopupLayer:a.renderFlags.blockingPopupLayer}))}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(d);return this._addSiteStylesToLoaded(a,e),c.DOM.div(b.assign({className:this.props.className,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:f},this.props.extraEventsHandlers))},getRootStyle:function(){var a={};return a.width=this.props.siteData.getSiteWidth(),a.paddingBottom=this.props.siteData.getPageBottomMargin()+this.props.siteData.onlyForEyesBottomAdditionalMargin(),this.state.siteRootHidden&&(a.height=0,a.overflowY="hidden"),a},onPopState:function(){var a=window.location.href,b=j.wixUrlParser.parseUrl(this.props.siteData,a);b&&this.tryToNavigate(b,!0)},onHashChange:function(){var a=j.wixUrlParser.parseUrl(this.props.siteData,window.location.href);a&&this.props.siteData.isUsingUrlFormat("slash")&&this.tryToNavigate(a)},isPageExists:function(a){return b.includes(this.props.siteData.getAllPageIds(),a)},tryToNavigate:function(a,c,d,e){var f=b.get(this.props,"viewerPrivateServices.siteDataAPI");if(this.isPageExists(a.pageId))if(ha(this.siteAPI,a)){var g=this.siteAPI.getSiteData();A.isOpen("sv_popups")||this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var h=g.getDataByQuery(a.pageId);if(!h)return;h.isPopup||this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var i=b.clone(a);i.title=a.title||h.pageUriSEO;var k=j.wixUrlParser.getUrl(g,i),l=c;if(A.isOpen("sv_popups")){l=g.isPopupPage(a.pageId)||c;var m=g.getDataByQuery(g.getFocusedRootId());if(h.isPopup||m.isPopup){var n=this.siteAPI.getSiteAspect("actionsAspect");n.disableNextAnchorScroll()}}this.props.navigateMethod(this,f,k,i,!l,d,e)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(a),this.forceUpdate()},handleNavigation:function(a,c,d){var e=this.siteAPI,f=this.props.siteData;if(a.pageId===f.getPrimaryPageId()){if("#"!==c){var g=b.get(this.props,"viewerPrivateServices.siteDataAPI");this.props.navigateMethod(this,g,c,a,d)}if(a.anchorData){var h=function(b){var c=1===b.ratio;c&&e.getSiteAspect("anchorChangeEvent").setSelectedAnchorAsync(f,a.anchorData,a.pageId,j.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)};e.scrollToAnchor(a.anchorData,h.bind(this))}else f.isImageZoom(a)||this.scrollToTop()}else this.tryToNavigate(a,!d)},renderCompsAfterLayout:function(a){this.props.siteData.componentsToRender=b.union(this.props.siteData.componentsToRender,a),b.isEmpty(a)||this.forceUpdate(function(){this.props.siteData.componentsToRender=[]})},reLayout:function(){var a=this.lockedCompIds,b=this.props.siteData,c=b.getExistingRootNavigationInfo(b.getCurrentUrlPageId()),d=ha(this.siteAPI,c);this.updateBodyNodeStyle(b);var e=ba.call(this,d),f=i.reLayout(e,this.siteAPI,this.noEnforceAnchors,a,a&&this.tempMeasureMap);if(delete this.tempMeasureMap,delete this.lockedCompIds,d){this.reLayoutPending=!1,this.noEnforceAnchors=!1,this.renderCompsAfterLayout(f),this.isBusy=!1;var g=this.getMasterPage(),h=[g,this.getPrimaryPage(),this.refs.siteAspectsContainer];if(A.isOpen("sv_popups")){var j=this.getCurrentPopup();j&&h.push(j)}$(h)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(c),$([this.refs.siteAspectsContainer]);this.isBusy=!1;var k=this.invokedMethodNames||[];this.invokedMethodNames=[],this.notifyAspects("didLayout",k),this.siteIsReady||(this.siteIsReady=!0,this.siteAPI&&this.siteAPI.setBiMarker&&this.siteAPI.setBiMarker("lastTimeStamp"),this.notifyAspects("siteReady"))},registerReLayoutPending:function(){this.reLayoutPending=!0},reLayoutIfPending:function(){this.reLayoutPending&&(this.reLayoutPending=!1,this.refs.theme.initWaitForStylesReady())},updateBodyNodeStyle:function(c){var d=a("body"),e=a("html");if(A.isOpen("sv_agadirTinyMenu")||d.addClass("legacy-body-overflow"),this.props.siteData.isMobileView()?(d.addClass("device-mobile-optimized"),e.addClass("device-mobile-optimized")):c.isMobileDevice()||c.isTabletDevice()?d.addClass("device-mobile-non-optimized"):(d.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized"),e.removeClass("device-mobile-optimized")),this.props.siteData.isMobileDevice()){var f=b.assign({},this.props.siteData.os,this.props.siteData.browser),g=b(f).keys().filter(function(a){return f[a]===!0}).map(function(a){return"device-"+a}).join(" ");e.addClass(g)}var h=d.css("overflow"),i=c.renderFlags.allowSiteOverflow?null:"hidden";h!==i&&d.css("overflow",i)},componentDidMount:function(){this.props.siteData.isUsingUrlFormat(j.siteConstants.URL_FORMATS.SLASH)?this.siteAPI.reportCurrentPageEvent():this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.initFacebookRemarketing(),this.siteAPI.initGoogleRemarketing(),this.siteAPI.initYandexMetrika(),this.siteAPI.setBiMarker("renderEnd"),this.registerAspectToEvent("siteReady",function(){this.siteAPI.reportBeatFinish(this.props.siteData.getCurrentUrlPageId()),ja(this.siteAPI),u.send(this.siteAPI.getSiteData()),ca(this.props.siteData)}.bind(this)),this.registerAspectToEvent("resize",W.call(this)),X.call(this),Y.call(this),this.updateTitleAndMetaTags(),this.refs.theme.registerStylesReadyCallback(this.reLayout),this.siteAPI.reportBeatEvent(8,this.props.siteData.getPrimaryPageId()),this.refs.theme.initWaitForStylesReady()},componentDidUpdate:function(){this.prevActiveModes=j.objectUtils.cloneDeep(this.props.siteData.activeModes),this.tempMeasureMap&&!this.props.siteData.measureMap&&(this.props.siteData.measureMap=this.tempMeasureMap,delete this.deletedMeasureMap,delete this.tempMeasureMap),this.isChangingUrlPage&&(this.siteAPI.setBiMarker("renderEnd"),this.siteAPI.reportBeatFinish(this.props.siteData.getCurrentUrlPageId()),ja(this.siteAPI),this.props.siteData.isUsingUrlFormat(j.siteConstants.URL_FORMATS.SLASH)||this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.fireGoogleRemarketing(),this.siteAPI.reportYandexPageHit(this.props.siteData.currentUrl.full)),this.refs.theme.initWaitForStylesReady()},updateTitleAndMetaTags:function(){this.props.updateHeadMethod&&this.props.updateHeadMethod(this.props.siteData,this.props.rootId)},componentWillUnmount:function(){this.dead=!0,this.siteAPI.onSiteUnmount()}})}),define("core/siteRender/WixSiteHeadRenderer",["lodash"],function(a){"use strict";function b(){this.blankFavicons=null}function c(b){return a.includes(b.rendererModel.premiumFeatures,"AdsFree")}return b.prototype={getFavicons:function(a){return a.isPremiumUser&&a.isPremiumUser()&&c(a)?this._getPremiumUserFavicon(a):this._getDefaultWixFavicon()},createBlankFavicons:function(){return null===this.blankFavicons&&(this.blankFavicons=this._createEmptyFaviconElements()),this.blankFavicons},getPageMetaTags:function(a,b){return this._getMetaTagsForPage(a,b)},_getPremiumUserFavicon:function(a){var b=a.getFavicon();if(b){var c=this._getFaviconMimeType(b);return b=a.getMediaFullStaticUrl(b),this._createFaviconLinkElements(b,c)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var a="http://www.wix.com/favicon.ico",b=this._getFaviconMimeType(a);return this._createFaviconLinkElements(a,b)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(a,b){var c=[];return a&&b&&(c.push({rel:"shortcut icon",href:a,type:b}),c.push({rel:"apple-touch-icon",href:a,type:b})),c},_getStaticMediaUrl:function(a){return a.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(a){var b=null;return a&&(this._isExtension(a,"png")?b="image/png":this._isExtension(a,"gif")?b="image/gif":this._isExtension(a,"ico")||this._isExtension(a,"icon")?b="image/x-icon":this._isExtension(a,"jpg")&&(b="image/jpg")),b},_isExtension:function(a,b){return this._getExtension(a).toLowerCase()===b},_getExtension:function(a){if(a){var b=a.lastIndexOf(".");if(b>=0)return a.substr(b+1)}return""},_getMetaTagsForPage:function(b,c){var d=b.getPageSEOMetaData(c),e=[this._getDescriptionSEOMetaTag,this._getKeywordsSEOMetaTag,this._getOgMetaTag];return a.reduce(e,function(a,b){return a.concat(b(d))},[])},_getDescriptionSEOMetaTag:function(a){if(a&&a.description){var b=a.description;return['<meta name="description" content="'+b+'">','<meta property="og:description" content="'+b+'">']}},getGoogleTagManagerScript:function(){var a="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');";return"<script async>"+a+"</script>"},_getKeywordsSEOMetaTag:function(a){if(a&&a.keywords){var b=a.keywords;return['<meta name="keywords" content="'+b+'">','<meta property="og:keywords" content="'+b+'">']}},_getOgMetaTag:function(b){if(b&&b.ogTags){var c=b.ogTags;return a.reduce(c,function(a,b){return a.concat('<meta property="'+b.property+'" content="'+b.content+'">')},[])}}},new b}),define("core/core/site",["react","lodash","zepto","utils","core/siteRender/WixSiteReact","core/siteRender/WixSiteHeadRenderer","core/core/siteBI","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function k(a,c,d){if(b.get(window,"history.pushState")&&d)try{window.history.pushState(null,c,a)}catch(e){}}function l(a,c,d){if(b.get(window,"history.replaceState")&&d)try{window.history.replaceState(null,c,a)}catch(e){}}function m(a,b,c,e,f,g,j){var m=a.props.siteData;if(m.getCurrentUrlPageId()!==e.pageId&&a.siteAPI.reportBeatStart(e.pageId),m.getPrimaryPageId()!==e.pageId&&e.anchorData){var n=a.siteAPI.getSiteAspect("actionsAspect");n.registerNextAnchorScroll(e.anchorData)}var o=!0,p=m.currentUrl.full,r=function(){o?(h.isOpen("sv_popups")||m.dataResolver.clearCache(),o=!1,0===c.indexOf("#")?m.currentUrl.hash=c:m.currentUrl=i.parseUrl(c),c!==p&&m.isUsingUrlFormat(d.siteConstants.URL_FORMATS.SLASH)&&a.siteAPI.reportCurrentPageEvent(c),m.setRootNavigationInfo(e,!g),a.setState({currentUrlPageId:m.getCurrentUrlPageId(),currentPopupId:h.isOpen("sv_popups")?m.getCurrentPopupId():null}),m.isViewerMode()&&(j?l(c,e.title,j):k(c,e.title,f)),q(m,e.pageId)):a.forceUpdate()};return b.loadPage(e,r),!0}function n(a,c,d){var e="wixSiteProperties";return h.isOpen("mobileNonOptimizedOverflow")&&(e+=" mobile-non-optimized-overflow"),j(b.assign({},d,{className:"WixSite"===a.rendererModel.siteInfo.documentType?e:"noop",siteData:a,viewerPrivateServices:c,rootId:"masterPage",navigateMethod:m,updateHeadMethod:p,getSiteContainer:o}))}function o(){return window}function p(a,b){q(a,b),h.isOpen("sv_faviconFromServer")||t(a),"WixSite"===a.rendererModel.siteInfo.documentType&&c(w()).append(f.getGoogleTagManagerScript())}function q(a,b){x(a),s(),r(a,b)}function r(a,b){var c=f.getPageMetaTags(a,b);v(c)}function s(){var a=w();c("[name=description]",a).remove(),c("[property='og:description']",a).remove(),c("[name=keywords]",a).remove()}function u(a,b){var c=document.createElement("link");c.rel=b.rel,c.href=b.href,c.type=b.type,a.appendChild(c)}function v(a){b.forEach(a,function(a){this.append(a)},c(w()))}function w(){return window.document.head}function x(a){window.document.title=a.getCurrentUrlPageTitle()}function y(a,b){var c=d.wixUrlParser.getUrl(a,b);a.isViewerMode()&&c!==a.currentUrl.full&&(l(c,b.title,!0),a.currentUrl=i.parseUrl(c))}function z(a,b,c,e){var f=d.wixUrlParser.parseUrl(a,a.currentUrl.full);a.setRootNavigationInfo(f),d.logger.reportBeatEvent(a,6,f.pageId),g.init(a);var h=function(){f=d.wixUrlParser.parseUrl(a,a.currentUrl.full),
a.setRootNavigationInfo(f),d.mobileViewportFixer.fixViewportTag(a),y(a,f),e(n(a,b,c))};return b.siteDataAPI.loadPage(f,h),a}var i=d.urlUtils,j=a.createFactory(e),t=b.once(function(a){var d=w(),e=f.getFavicons(a);e&&!b.isEmpty(e)&&(c('[rel="shortcut icon"]',d).remove(),c('[rel="apple-touch-icon"]',d).remove(),b.forEach(e,u.bind(null,d)))});return{renderSite:z,WixSiteReact:e}}),define("core/siteRender/compRegistrar",["core/siteRender/compFactory","core/components/propsSelectors/propsSelectorsFactory"],function(a,b){"use strict";return{register:function(c,d){return a.register(c,d),d.statics&&d.statics.useSantaTypes&&b.registerComponent(c,d),this}}}),define("core/core/dataRequirementsChecker",["utils","lodash","experiment"],function(a,b,c){"use strict";function j(a,b,c){var d=c.styleId&&a.getDataByQuery(c.styleId,b,a.dataTypes.THEME);return{data:c.dataQuery?a.getDataByQuery(c.dataQuery,b):null,properties:c.propertyQuery?a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES):null,skin:d?d.skin:c.skin,id:c.id,pageId:b}}function k(a,c,e,h){var l=j(a,e,h),m=b.has(g,h.componentType);m&&(i[h.componentType]=i[h.componentType]||[],i[h.componentType].push(l));var n=f[h.componentType],o=n?n(a,l,c):[],p=d.getChildrenData(h,a.isMobileView());return b.reduce(p,function(b,d){return b.concat(k(a,c,e,d))},o)}function l(a,b,c){if(!c.pageItemId)return[];var d=b.pagesData[e],g=d.data.document_data[c.pageItemId];if(!g||"PermaLink"!==g.type)return[];var h=d.data.document_data[g.dataItemRef.replace(/^#/,"")];if(!h)return[];var i=d.data.component_properties[g.dataItemRef.replace(/^#/,"")],j=f["Zoom:"+h.type];if(j){var k={data:h,properties:i};return j(a,k,c)}return[]}function m(a,c){return b(i).map(function(b,d){var e=g[d];return e(a,b,c)}).flatten().value()}function n(a,c){return b(h).map(function(b,d){var e=a.getClientSpecMapEntryByAppDefinitionId(d);return e?b(a,e,c):void 0}).compact().flatten().value()}function o(a,c,d){var f=b.isArray(d)?d:[d];i={};var g=k(a,f[0],e,c.pagesData[e].structure);return b.forEach(f,function(b){g=g.concat(k(a,b,b.pageId,c.pagesData[b.pageId].structure),l(a,c,b),m(a,b),n(a,b))}),g}function p(a,c){return b.every(a,function(a){return!b.isEmpty(c.pagesData[a.pageId])})}var d=a.dataUtils,e="masterPage",f={},g={},h={},i={};return{getNeededRequests:function(b,d,e){b.santaBase=b.santaBase||b.serviceTopology.scriptsLocationMap.santa;var f=[e];return c.isOpen("sv_popups")&&b.isPopupPage(e.pageId)&&f.push(b.getExistingRootNavigationInfo(b.getPrimaryPageId())),p(f,d)?o(b,d,f):a.pageRequests(b,d,f)},registerCheckerForCompType:function(a,b){f[a]=b},registerCheckerForAllCompsOfType:function(a,b){g[a]=b},registerCheckerForAppDefId:function(a,b){h[a]=b}}}),define("core/core/widgetCollectorRegistry",[],function(){"use strict";var a=[];return{registerWidgetCollector:function(b){a.push(b)},getWidgetCollectors:function(){return a}}}),define("core/components/propsSelectors/propsSelectorsUtils",[],function(){"use strict";function a(a,b){var c=a.bind(null);return c.isRequired=a.isRequired.bind(null),c.fetch=b,c.isRequired.fetch=b,c}return{applyFetch:a}}),define("core/components/propsSelectors/SantaTypes",["lodash","react","utils","core/components/propsSelectors/propsSelectorsUtils","core/core/componentPropsBuilder"],function(a,b,c,d,e){"use strict";function g(){var b=a.initial(arguments),c=a.last(arguments);return function(d,e){return c.apply(c,a.map(b,function(a){return a(d,e)}))}}function h(a){return a.siteAPI.getSiteAspect("PinterestWidgetPostMessageAspect")}function i(a,b){return b.structure.id}var f=d.applyFetch,j=f(b.PropTypes.func,function(a){return a.siteAPI.getSiteAspect("behaviorsAspect").handleAction}),k=f(b.PropTypes.func,function(a){return a.siteAPI.reLayoutIfPending.bind(a.siteAPI)}),l=f(b.PropTypes.func,function(a){return a.siteAPI.registerReLayoutPending.bind(a.siteAPI)}),m=f(b.PropTypes.func,function(a){return a.siteAPI.getRootIdsWhichShouldBeRendered.bind(a.siteAPI)}),n=f(b.PropTypes.func,function(a){return a.siteAPI.getRuntimeDal().setCompState}),o=f(b.PropTypes.bool,function(a){return a.siteData.isTouchDevice()}),p=f(b.PropTypes.bool,function(a){return a.siteData.isDebugMode()}),q=f(b.PropTypes.bool,function(a){return a.siteData.isMobileDevice()}),r=f(b.PropTypes.string,function(a){return a.siteData.santaBase}),s=f(b.PropTypes.string,g(h,i,function(a,b){return a.shouldPresentErrorMessage(b)})),t=f(b.PropTypes.shape({height:b.PropTypes.number.isRequired,width:b.PropTypes.number.isRequired}),g(h,i,function(a,b){return a.getIframeDimensions(b)})),u=f(b.PropTypes.object,function(a,b){return e.getCompProp(a.siteAPI,b.structure.id,b.structure.propertyQuery,b.rootId)}),v=f(b.PropTypes.object,function(a,b){return e.getCompData(a.siteAPI,b.structure.id,b.structure.dataQuery,b.rootId)}),w=f(b.PropTypes.object,function(a,b){return a.siteAPI.getSiteAspect("behaviorsAspect").getActions("comp",b.structure.id)}),x=f(b.PropTypes.string,function(a,b){return e.getStyleId(b.structure,a.stylesMap)}),y=f(b.PropTypes.string,function(a,b){return e.getSkin(b.structure,a.siteData)}),z=f(b.PropTypes.func,function(b){return a.partialRight(c.linkRenderer.renderLink,b.siteData)}),A=f(b.PropTypes.string,i),B=f(b.PropTypes.string,function(a,b){return b.rootId}),C=f(b.PropTypes.shape({pageId:b.PropTypes.string.isRequired,title:b.PropTypes.string,pageAdditionalData:b.PropTypes.string,pageItemId:b.PropTypes.string,pageItemAdditionalData:b.PropTypes.string,anchorData:b.PropTypes.string}),function(a,b){return a.siteData.getExistingRootNavigationInfo(b.rootId)}),D=f(b.PropTypes.string,function(a){return a.siteData.getCurrentUrlPageId()}),E=f(b.PropTypes.shape({componentType:b.PropTypes.string.isRequired,dataQuery:b.PropTypes.string,propertyQuery:b.PropTypes.string,components:b.PropTypes.array,skin:b.PropTypes.string,styleId:b.PropTypes.string,id:b.PropTypes.string,type:b.PropTypes.string}),function(a,b){return b.structure}),F=b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.number]).isRequired,G=f(b.PropTypes.shape({bottom:F,height:F,left:F,position:b.PropTypes.string,right:F,top:F,width:F}),function(a,b){return e.getStyle(b.structure.layout,a.siteAPI)});return{isTouchDevice:o,isMobileDevice:q,isDebugMode:p,santaBase:r,Behaviors:{handleAction:j},Pinterest:{shouldPresentErrorMessage:s,iframeDimensions:t},renderLink:z,DAL:{setCompState:n},Layout:{registerReLayoutPending:l,reLayoutIfPending:k},Component:{structure:E,id:A,key:A,ref:A,refInParent:A,pageId:B,rootId:B,rootNavigationInfo:C,currentUrlPageId:D,styleId:x,skin:y,style:G,compData:v,compProp:u,compActions:w},getRootIdsWhichShouldBeRendered:m}}),define("core/components/compActionMixin",["lodash","core/components/propsSelectors/SantaTypes"],function(a,b){"use strict";return{propTypes:{handleAction:b.Behaviors.handleAction,compActions:b.Component.compActions},handleAction:function(b){var c=a.get(this.props.compActions,b);c&&this.props.handleAction(c)}}}),define("core/components/baseCompMixin",["lodash","core/components/animatableMixin","core/components/renderDoneMixin","core/components/compActionMixin","core/components/compBehaviorsExecuterMixin","core/components/propsSelectors/SantaTypes"],function(a,b,c,d,e,f){"use strict";function h(b){var c=a.pick(b,a.values(g)),d=a(this.props.compActions).pick(a.keys(g)).mapKeys(function(a,b){return g[b]}).mapValues(function(a){return this.handleAction.bind(this,a.name)},this).value();return a.assign(d,c,function(a,b){var c=this;return function(){a&&a.apply(c,arguments),b&&b.apply(c,arguments)}},this)}function i(b){var c=a.defaults(b||{},this.props.style);return a.get(this.props.compProp,"isHidden")&&(c.visibility="hidden"),a.isFunction(this.transformRefStyle)?this.transformRefStyle(c):c}function j(b){var c=a.compact([b,this.props.className]).join(" ");return a.isFunction(this.transformRefClasses)?this.transformRefClasses(c):c}var g={click:"onClick",dblclick:"onDoubleClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},k={mixins:[b,c,e,d],propTypes:{registerReLayoutPending:f.Layout.registerReLayoutPending,reLayoutIfPending:f.Layout.reLayoutIfPending,getRootIdsWhichShouldBeRendered:f.getRootIdsWhichShouldBeRendered},getInitialState:function(){return{}},registerReLayout:function(){this.props.registerReLayoutPending&&this.props.registerReLayoutPending()},componentDidUpdate:function(){this.props.reLayoutIfPending&&this.callAfterRenderDone(this.props.reLayoutIfPending)},isComponentActive:function(b){return a.includes(b.getRootIdsWhichShouldBeRendered(),b.rootId)||"masterPage"===b.rootId},shouldComponentUpdate:function(a,b){var c=!this.shouldComponentUpdateAnimatable||this.shouldComponentUpdateAnimatable(a,b),d=this.isComponentActive(a),e=this.shouldComponentUpdatePage&&this.shouldComponentUpdatePage(a,b);return c&&(e||d)},updateRootRefDataStyles:function(b){if(!a.get(this.props,"compProp.isHidden")){var c=h.call(this,b);a.assign(b,c)}b.style=i.call(this,b.style),b.className=j.call(this,b.className);var d=this.props.structure,e=a.get(d,"layout.rotationInDegrees");e&&(b["data-angle"]=e)}};return{baseComp:k,_testActionsMap:g}}),define("core/core/Touchy",["lodash"],function(a){"use strict";function e(a){if(a.touches&&a.touches.length){var b=a.touches[0];return{x:b.pageX,y:b.pageY}}}function f(){this.data={}}var b={touched:!1,moved:!1,deltaCoords:{x:0,y:0},evObj:{}},c=["onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","onTap"],d={left:"onSwipeLeft",right:"onSwipeRight",up:"onSwipeUp",down:"onSwipeDown"};return f.prototype={onTouchStart:function(c){this.data=a.defaults({touched:!0,numOfTouches:c.touches.length,startCoords:e(c),startTime:Date.now(),evObj:a.clone(c)},b)},onTouchMove:function(a){var b=e(a);if(b){this.data.startCoords||(this.data.startCoords=b);var c=this.data.startCoords.x-b.x,d=this.data.startCoords.y-b.y;this.data.moved=!0,this.data.deltaCoords={x:c,y:d}}},onTouchEnd:function(b){var c,e;this.data.endTime=Date.now(),a.isEmpty(b)||(this.isValidSwipe()?(c=this.getSwipeDirection(this.data.deltaCoords.x,this.data.deltaCoords.y),e=d[c],b[e]&&b[e](this.data.evObj)):this.isValidTap()&&b.onTap&&b.onTap(this.data.evObj))},registerTouchEvents:function(b){var d=a.pick(b,c);a.isEmpty(d)||(b.onTouchStart=this.onTouchStart.bind(this),b.onTouchMove=this.onTouchMove.bind(this),b.onTouchEnd=this.onTouchEnd.bind(this,d))},isValidSwipe:function(){return this.data.moved&&1===this.data.numOfTouches&&this.data.endTime-this.data.startTime<500&&(Math.abs(this.data.deltaCoords.x)>100||Math.abs(this.data.deltaCoords.y)>60)},isValidTap:function(){return this.data.touched&&!this.data.moved&&1===this.data.numOfTouches},getSwipeDirection:function(a,b){var c;return c=Math.abs(a)>Math.abs(b)?a>0?"left":"right":b>0?"up":"down"}},f}),define("core/components/fixedPositionRenderPlugin",["lodash"],function(a){"use strict";return function(b,c,d,e){if(b[""]){var f=b[""].style;if(f&&a.get(d,"layout.fixedPosition")){var g=e.siteData.renderFlags.renderFixedPositionContainers?50:49;f.zIndex=Math.max(f.zIndex||0,g)}}}}),define("core/components/skinBasedComp",["lodash","skins","react","utils","core/siteRender/compFactory","core/components/baseCompMixin","core/core/Touchy","core/components/propsSelectors/SantaTypes","core/components/fixedPositionRenderPlugin","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function m(){var b;if(a.isFunction(this.getTransformedCssStates)){var c=this.getTransformedCssStates();b=void 0!==c?c:this.state}else b=this.state;if(!b)return{};var d={},e=[];return a.forOwn(b,function(a,b){0===b.lastIndexOf("$",0)&&e.push(a)}),a.isEmpty(e)&&b.hasOwnProperty("cssState")&&(e=a.values(b.cssState)),a.isEmpty(e)||(d["data-state"]=e.join(" ")),d}function n(a){var b=a.props.skin,c=l[b];return!c&&a.getDefaultSkinName&&(b=a.getDefaultSkinName(),c=l[b]),c}function o(b){a(b).filter(function(b){return a.has(b,"onClick")}).forEach(function(b){b.style=a.assign(b.style||{},{cursor:"pointer"})}).value()}function p(b){if(this.props.structure&&this.props.structure.modes){var c=a.find(this.props.structure.modes.definitions,{type:d.siteConstants.COMP_MODES_TYPES.HOVER});if(c){var e=this.props.siteAPI;if(e){var f=this.props.structure.id;b[""].onMouseEnter=q(e,f,this.props.rootId,c.modeId),b[""].onMouseLeave=r(e,f,this.props.rootId,c.modeId)}}}}function q(a,b,c,d){return function(){return a.activateModeById(b,c,d)}}function r(a,b,c,d){return function(){return a.deactivateModeById(b,c,d)}}function s(b,c,d){d=d||this.props;var e=a.get(d,["structure","styleId"]);if(!e)return c;var f=d.siteData.getAllTheme()[e];return f?a.get(f,["style","properties",b],c):c}function t(b){var c=this.getSkinProperties();return a.isFunction(this.transformRefData)&&this.transformRefData(c),this.props.transformSkinProperties&&(c=this.props.transformSkinProperties(c)),c[""]||(c[""]={}),(this.props.useSantaTypes?this.props.isMobileDevice:this.props.siteData.isMobileDevice())&&o(c),j.isOpen("sv_hoverBox")&&p.call(this,c),this.updateRootRefDataStyles(c[""]),a.assign(c[""],m.call(this)),b.react&&0!==b.react.length||(c[""]=a.defaults(c[""],c.inlineContent)),c}var k=b.skinsRenderer,l=b.skins;k.registerRenderPlugin(i);var u={mixins:[f.baseComp],propTypes:{isTouchDevice:h.isTouchDevice,isMobileDevice:h.isMobileDevice,isDebugMode:h.isDebugMode,structure:h.Component.structure,id:h.Component.id,key:h.Component.key,ref:h.Component.ref,refInParent:h.Component.refInParent,rootId:h.Component.rootId,rootNavigationInfo:h.Component.rootNavigationInfo,currentUrlPageId:h.Component.currentUrlPageId,styleId:h.Component.styleId,skin:h.Component.skin,style:h.Component.style,compProp:h.Component.compProp,compActions:h.Component.compActions},renderHelper:function(){var b=n(this);if(!b){var e=this.props.structure&&this.props.structure.componentType||"";return d.log.error("Skin ["+this.props.skin+"] not found for comp ["+e+"]"),c.DOM.div()}var f=t.call(this,b);if(this.props.useSantaTypes?this.props.isTouchDevice:this.props.siteData.isTouchDevice()){var h=new g;a.forEach(f,function(a){h.registerTouchEvents(a)})}return k.renderSkinHTML.call(this,b.react,f,this.props.styleId,this.props.id,this.props.structure,this.props,this.state)},render:function(){try{return this.renderHelper()}catch(a){if(this.props.useSantaTypes?this.props.isDebugMode:this.props.siteData.isDebugMode())throw a;d.log.error("Cannot render component",this.constructor.displayName,this.props.id,a);var b={"":{style:this.props.style,"data-dead-comp":!0}};return k.renderSkinHTML.call(this,l["skins.viewer.deadcomp.DeadCompPublicSkin"].react,b,"deadComp",this.props.id,this.props.structure,this.props,this.state)}},getSkinExports:function(){var a=n(this);return a&&a.exports},classSet:function(b){return d.classNames(a.reduce(b,function(a,b,c){return a[this.styleId+"_"+c]=b,a},{},this.props))},componentWillUpdate:function(){this.props.onComponentWillUpdate&&this.props.onComponentWillUpdate()},getStyleProperty:s,createChildComponent:function(b,c,d,f){var g=this.getSkinExports(),h="string"==typeof d?{skin:g[d].skin,styleId:this.props.styleId+d}:d,i={siteData:this.props.siteData,siteAPI:this.props.siteAPI,compProp:a.omit(this.props.compProp,"isHidden"),loadedStyles:this.props.loadedStyles,compData:b,refInParent:a.get(b,"id",""),skin:h.skin,styleId:h.styleId,pageId:this.props.pageId,rootId:this.props.rootId,rootNavigationInfo:this.props.rootNavigationInfo,currentUrlPageId:this.props.currentUrlPageId};if(!b&&!a.get(f,"id"))throw new Error("Unable to set child comp id - no data item\\custom id were passed");if(i.id=a.get(f,"id")||this.props.id+b.id,!b&&!a.get(f,"ref"))throw new Error("Unable to set child comp ref - no data item\\custom ref were passed");return i.ref=a.get(f,"ref")||b.id,j.isOpen("designData")&&(i.compDesign=this.props.compDesign),i=a.merge(i,f),i.structure={componentType:c,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:f&&f.skinPart||i.ref},e.getCompClass(c)(i)}};return u}),define("core/components/skinBasedCompOld",["lodash","skins","react","utils","core/siteRender/compFactory","core/components/baseCompMixinOld","core/core/Touchy","core/components/fixedPositionRenderPlugin","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function l(){var b;if(a.isFunction(this.getTransformedCssStates)){var c=this.getTransformedCssStates();b=void 0!==c?c:this.state}else b=this.state;if(!b)return{};var d={},e=[];return a.forOwn(b,function(a,b){0===b.lastIndexOf("$",0)&&e.push(a)}),a.isEmpty(e)&&b.hasOwnProperty("cssState")&&(e=a.values(b.cssState)),a.isEmpty(e)||(d["data-state"]=e.join(" ")),d}function m(a){var b=a.props.skin,c=k[b];return!c&&a.getDefaultSkinName&&(b=a.getDefaultSkinName(),c=k[b]),c}function n(b){a(b).filter(function(b){return a.has(b,"onClick")}).forEach(function(b){b.style=a.assign(b.style||{},{cursor:"pointer"})}).value()}function o(b){if(this.props.structure&&this.props.structure.modes){var c=a.find(this.props.structure.modes.definitions,{type:d.siteConstants.COMP_MODES_TYPES.HOVER});if(c){var e=this.props.siteAPI;if(e){var f=this.props.structure.id;b[""].onMouseEnter=p(e,f,this.props.rootId,c.modeId),b[""].onMouseLeave=q(e,f,this.props.rootId,c.modeId)}}}}function p(a,b,c,d){return function(){return a.activateModeById(b,c,d)}}function q(a,b,c,d){return function(){return a.deactivateModeById(b,c,d)}}function r(b,c,d){d=d||this.props;var e=a.get(d,["structure","styleId"]);if(!e)return c;var f=d.siteData.getAllTheme()[e];return f?a.get(f,["style","properties",b],c):c}function s(b){var c=this.getSkinProperties();return a.isFunction(this.transformRefData)&&this.transformRefData(c),this.props.transformSkinProperties&&(c=this.props.transformSkinProperties(c)),c[""]||(c[""]={}),this.props.siteData.isMobileDevice()&&n(c),i.isOpen("sv_hoverBox")&&o.call(this,c),this.updateRootRefDataStyles(c[""]),a.assign(c[""],l.call(this)),b.react&&0!==b.react.length||(c[""]=a.defaults(c[""],c.inlineContent)),c}var j=b.skinsRenderer,k=b.skins;j.registerRenderPlugin(h);var t={mixins:[f.baseComp],renderHelper:function(){var b=m(this);if(!b){var e=this.props.structure&&this.props.structure.componentType||"";return d.log.error("Skin ["+this.props.skin+"] not found for comp ["+e+"]"),c.DOM.div()}var f=s.call(this,b);if(this.props.siteData.isTouchDevice()){var h=new g;a.forEach(f,function(a){h.registerTouchEvents(a)})}return j.renderSkinHTML.call(this,b.react,f,this.props.styleId,this.props.id,this.props.structure,this.props,this.state)},render:function(){try{return this.renderHelper()}catch(a){if(this.props.siteData.isDebugMode())throw a;d.log.error("Cannot render component",this.constructor.displayName,this.props.id,a);var b={"":{style:this.props.style,"data-dead-comp":!0}};return j.renderSkinHTML.call(this,k["skins.viewer.deadcomp.DeadCompPublicSkin"].react,b,"deadComp",this.props.id,this.props.structure,this.props,this.state)}},getSkinExports:function(){var a=m(this);return a&&a.exports},classSet:function(b){return d.classNames(a.reduce(b,function(a,b,c){return a[this.styleId+"_"+c]=b,a},{},this.props))},componentWillUpdate:function(){this.props.onComponentWillUpdate&&this.props.onComponentWillUpdate()},getStyleProperty:r,createChildComponent:function(b,c,d,f){var g=this.getSkinExports(),h="string"==typeof d?{skin:g[d].skin,styleId:this.props.styleId+d}:d,j={siteData:this.props.siteData,siteAPI:this.props.siteAPI,compProp:a.omit(this.props.compProp,"isHidden"),loadedStyles:this.props.loadedStyles,compData:b,refInParent:a.get(b,"id",""),skin:h.skin,styleId:h.styleId,pageId:this.props.pageId,rootId:this.props.rootId,rootNavigationInfo:this.props.rootNavigationInfo,currentUrlPageId:this.props.currentUrlPageId};if(!b&&!a.get(f,"id"))throw new Error("Unable to set child comp id - no data item\\custom id were passed");if(j.id=a.get(f,"id")||this.props.id+b.id,!b&&!a.get(f,"ref"))throw new Error("Unable to set child comp ref - no data item\\custom ref were passed");return j.ref=a.get(f,"ref")||b.id,i.isOpen("designData")&&(j.compDesign=this.props.compDesign),j=a.merge(j,f),j.structure={componentType:c,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:f&&f.skinPart||j.ref},e.getCompClass(c)(j)}};return t}),define("core/components/compDesignMixin/property",["lodash"],function(a){"use strict";return{keyvalue:function(a,b){return function(c,d){return c[a]=b(d),c}},map:function(b){return function(c,d){return a(b).mapValues(function(a){return a(d)}).merge(c).value()}}}}),define("core/components/compDesignMixin/cssToken",[],function(){"use strict";return{KEYWORD:"keyword",LENGTH_OR_PERCENTAGE:"length_or_percentage",COLOR_RGBA:"rgbcolor",BR_WIDTH:"br_width",BORDER_WIDTH:"border_width",BORDER_STYLE:"border_style",BORDER_COLOR:"border_color"}}),define("core/components/compDesignMixin/stringify",["lodash","core/components/compDesignMixin/cssToken"],function(a,b){"use strict";var c={value:function(b){return function(c){return a(c).keys().filter(a.partial(a.has,b)).map(function(a){return d[b[a]](c[a],a)}).without("").join(" ")}},join:function(b){return a(b).values().join(" ")},list:function(b){return function(c){return a.map(c,b).join(", ")}}},d={};return d[b.KEYWORD]=function(a,b){return a?b:""},d[b.LENGTH_OR_PERCENTAGE]=function(a){return 0===a.value?"0":a.value.toString()+a.unit},d[b.COLOR_RGBA]=function(a){return"rgba("+a.red+", "+a.green+", "+a.blue+", "+a.alpha+")"},d[b.BR_WIDTH]=function(a){return"string"==typeof a?a:d[b.LENGTH_OR_PERCENTAGE](a)},d[b.BORDER_WIDTH]=c.value({top:b.BR_WIDTH,right:b.BR_WIDTH,bottom:b.BR_WIDTH,left:b.BR_WIDTH}),d[b.BORDER_STYLE]=c.join,d[b.BORDER_COLOR]=c.value({top:b.COLOR_RGBA,right:b.COLOR_RGBA,bottom:b.COLOR_RGBA,left:b.COLOR_RGBA}),c}),define("core/components/compDesignMixin/cssItem",["core/components/compDesignMixin/property","core/components/compDesignMixin/stringify","core/components/compDesignMixin/cssToken"],function(a,b,c){"use strict";return{CSSBoxShadow:a.keyvalue("boxShadow",b.list(b.value({inset:c.KEYWORD,offsetX:c.LENGTH_OR_PERCENTAGE,offsetY:c.LENGTH_OR_PERCENTAGE,blurRadius:c.LENGTH_OR_PERCENTAGE,spreadRadius:c.LENGTH_OR_PERCENTAGE,color:c.COLOR_RGBA}))),CSSBorderRadius:a.keyvalue("borderRadius",b.value({topLeft:c.LENGTH_OR_PERCENTAGE,topRight:c.LENGTH_OR_PERCENTAGE,bottomRight:c.LENGTH_OR_PERCENTAGE,bottomLeft:c.LENGTH_OR_PERCENTAGE})),CSSBorder:a.map({borderWidth:b.value({width:c.BORDER_WIDTH}),borderStyle:b.value({style:c.BORDER_STYLE}),borderColor:b.value({color:c.BORDER_COLOR})})}}),define("core/components/compDesignMixin",["lodash","core/components/compDesignMixin/cssItem"],function(a,b){"use strict";function c(c){return c=c||this.props.compDesign,a(c).keys().filter(function(d){return!a.isNull(c[d])&&a.has(b,d)}).reduce(function(a,d){return b[d](a,c[d])},{})}function d(c){return a(c).keys().every(function(d){return a.isNull(c[d])||!a.has(b,d)})}return{renderDesign:c,isEmptyDesign:d}}),define("core/components/fixedPositionContainerMixin",["lodash"],function(a){"use strict";function b(a){return a.style&&"fixed"===a.style.position}function c(a){return b(a)&&!a.siteData.isMobileView()?{$fixed:"fixedPosition"}:{$fixed:""}}function d(a){return a.siteData.isMobileView()?{$mobile:"mobileView"}:{$mobile:""}}function e(b){return a.merge(d(b),c(b))}return{getRootStyle:function(a){return this.getRootPosition?{position:this.getRootPosition(a)}:{}},getInitialState:function(){return e(this.props)},componentWillReceiveProps:function(b){var c=e(this.props),d=e(b);a.isEqual(c,d)||this.setState(d)}}}),define("core/components/galleryAutoPlay",[],function(){"use strict";return{getInitialState:function(){return{shouldAutoPlay:this.canAutoPlay(),$slideshow:this.canAutoPlay()&&!this.props.siteAPI.isZoomOpened()&&this.props.siteData.renderFlags.isPlayingAllowed?"autoplayOn":"autoplayOff"}},canAutoPlay:function(){return this.hasItems()&&this.props.compProp.autoplay},shouldShowAutoPlay:function(){return this.props.compProp.isHidden?!1:this.hasItems()&&this.props.compProp.showAutoplay},hasItems:function(){return this.props.compData.items.length>0},toggleAutoPlay:function(){if(this.hasItems()){var a="autoplayOff";if("autoplayOff"===this.state.$slideshow){if(!this.props.siteData.renderFlags.isPlayingAllowed)return;a="autoplayOn"}this.setState({shouldAutoPlay:!this.state.shouldAutoPlay,$slideshow:a},this.updateAutoplayState)}},componentWillReceiveProps:function(){var a=this.state.shouldAutoPlay&&!this.props.siteAPI.isZoomOpened()&&this.props.siteData.renderFlags.isPlayingAllowed?"autoplayOn":"autoplayOff";a!==this.state.$slideshow&&this.setState({$slideshow:a},this.updateAutoplayState)},updateAutoplayState:function(){this.clearTimeoutNamed(this.props.id),"autoplayOn"===this.state.$slideshow&&this.setTimeoutNamed(this.props.id,this.autoplayCallback,this.getAutoplayInterval())},autoplayCallback:function(){this.props.siteAPI.isZoomOpened()||("LTR"===this.props.compProp.autoPlayDirection?this.prev():this.next())},getAutoplayInterval:function(){var a=this.props.compProp.autoplayInterval;return Math.floor(1e3*a)}}}),define("core/components/optionInput",["lodash","core/components/skinBasedCompOld"],function(a,b){"use strict";var c="toolTip";return{mixins:[b],getInitialState:function(){return this.getCssState(this.props)},componentWillReceiveProps:function(a){this.setState(this.getCssState(a))},getCssState:function(a){return{$enabledState:a.compData.disabled?"disabled":"enabled",$selectState:a.selected?"selected":"unselected"}},onMouseEnter:function(){this.refs[c].showToolTip({},{source:this})},onMouseLeave:function(){this.refs[c].closeToolTip()},createInfoTipChildComponent:function(){return this.createChildComponent({content:this.props.compData.description,id:c},"wysiwyg.common.components.InfoTip",{skin:"wixapps.integration.skins.ecommerce.options.InfoTipSkin",styleId:this.props.loadedStyles["wixapps.integration.skins.ecommerce.options.InfoTipSkin"]},{ref:c,className:this.props.styleId+"tooltip"})}}}),define("core/components/skinInfo",["skins","lodash"],function(a,b){"use strict";return{getStatics:function(a){var c={};return b.forEach(a,function(a){c[a]=this.getStatic(a)},this),c},getStatic:function(b,c){var d=a.skins[this.props.skin];return d.statics?d.statics[b]:c},getParams:function(a,c){var d={};return b.forEach(a,function(a){d[a]=this.getParamFromDefaultSkin(a,c)},this),d},getParamFromDefaultSkin:function(a,b){return this.getParamFromSkin(a,b||this.props.skin)},getParamFromSkin:function(c,d){var e=this.props.siteData.getAllTheme(),f=e[this.props.structure.styleId],g=b.get(f,"style.properties")||{},h=e.THEME_DATA.color,i=a.skins[d],j=g[c]||i.paramsDefaults&&i.paramsDefaults[c];return b.isArray(j)&&j.length>1&&(g=b.clone(g),g[c]=this.getSumParamValue(c,d)),a.params.renderParam(c,i,g,h)},getSumParamValue:function(c,d){var e=this.getSkinExports(),f=a.skins[d].paramsDefaults,g=f&&f[c];if(!g){var h=e[c];return h?Math.abs(parseInt(h,10))||0:0}return Array.isArray(g)?b.sum(g,function(a){return Math.abs(parseInt(this.getParamFromSkin(a,d).value,10))},this):Math.abs(parseInt(g,10))||0},getFromExports:function(a){var b=this.getSkinExports();return b&&b[a]||0},getStyleData:function(a){var c=this.props.siteData,d=a||this.props.structure.styleId;d&&(d=d.replace("#",""));var e=c.getAllTheme()[d];return b.get(e,"style.properties")||{}}}}),define("core/core/data/pointers/pointerGeneratorsRegistry",["experiment"],function(a){"use strict";var b={},c={},d={},e={};return{registerDataAccessPointersGenerator:function(a,e,f){f?c[a]=e:b[a]=e,d[a]=e},registerPointerType:function(a,b,c,d,f){e[a]={findItemFunction:b,identityCheckFunction:c,isUsingDifferentNameSpaceForFull:d,isExistInFullJson:f}},getRegularJsonGenerators:function(){return b},getBothRegularAndFullJsonGenerators:function(){return c},getAllTypes:function(){return e}}}),define("core/core/data/pointers/DataAccessPointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";function c(c,d,e){var f=b.getRegularJsonGenerators();a.forEach(f,function(b,f){c[f]=a.mapValues(b,function(a){return a.bind(b,d.getItemInPath,e)})})}function d(c,d){var e=b.getBothRegularAndFullJsonGenerators();a.forEach(e,function(b,e){c[e]=a.mapValues(b,function(a){return d(a,!1,b)}),c.full[e]=a.mapValues(b,function(a){return d(a,!0,b)})})}function e(b){this.full={};var e=b.getBoundCacheInstance(!1),f=b.getBoundCacheInstance(!0),g=function(c,d,g){return function(){var h=a.toArray(arguments),i=[b.getItemInPath,e].concat(h),j=[b.fullJsonGetItemInPath,f].concat(h),k=c.apply(g,i),l=c.apply(g,j);return d?l:k}};c(this,b,e),d(this,g)}function f(a){a&&e.call(this,a)}function g(a){return a?{type:a.type,id:a.id}:void 0}return f.prototype={getGeneralTheme:function(){},getInnerPointer:function(b,c){var d=g(b);if(d){var e=a.isString(c)?c.split("."):c;d.innerPath=b.innerPath?b.innerPath.concat(e):e}return d},isSamePointer:function(a,b){return a&&b&&a.type===b.type&&a.id===b.id},getInnerPointerPathRoot:function(a){return a.innerPath?a.innerPath[0]:null},getOriginalPointerFromInner:g,getPointerType:function(b){switch(b.type){case"DESKTOP":case"MOBILE":return a.isEmpty(b.innerPath)?"component":"componentStructure";default:return b.type}}},f}),define("core/core/data/pathValidationUtil",["lodash"],function(a){"use strict";function b(b,c,e){if(!a.isArray(b))throw new Error("path type is not an array - "+b);if(!d(c,b,e))throw new Error("path does not exist - "+b);return!0}function c(b,c,d){if(!c)return!1;var f=e(b,c,c.length);return a.isUndefined(f)?!1:!d||d(f)}function d(b,c,d){if(!c||!a.isArray(c))return!1;var g=c[c.length-1],h=d?c.length:c.length-1,i=e(b,c,h);return a.isUndefined(i)?!1:d?!0:f(g,i)}function e(b,c,d){for(var e=b,f=0;d>f&&(e=e[c[f]],!a.isUndefined(e));f++);return e}function f(b,c){return a.isNumber(b)?a.isArray(c):a.isString(b)?g(c):!1}function g(a){return"[object Object]"===Object.prototype.toString.call(a)}return{validatePath:b,validatePathExist:d,validatePathExistsAndCorrect:c}}),define("core/core/data/pointers/pointersCache",["lodash","core/core/data/pathValidationUtil","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b,c){"use strict";function g(b,c){var d=b;return a.forEach(c,function(b){return a.isUndefined(d)?!1:void(d=d[b])}),d}function h(b,d,e){this.initMyState(),this.json=d,this.fullJson=e,this.siteData=b,this.getItemInPath=g.bind(null,d),this.fullJsonGetItemInPath=g.bind(null,e),this.validated={};var f=c.getAllTypes();a.forOwn(f,function(a,b){this.cache[b]={},this.itemFinders[b]=a.findItemFunction,this.identityCheckers[b]=a.identityCheckFunction,this.identityCheckersCache[b]={},a.isUsingDifferentNameSpaceForFull&&(this.fullJsonCache[b]={}),a.isExistInFullJson&&(this.typesExistingInFullJson[b]=!0)},this)}function i(a,c,g,h,i){var j=a in this.validated?this.validated[a]:d;if(h)return j===d&&(j=b.validatePathExist(i,g,!1)?e:d),j;if(j!==f){var k=this.identityCheckersCache[c.type],l=k[c.id];l||(l=this.identityCheckers[c.type].bind(this,c.id),k[c.id]=l),j=b.validatePathExistsAndCorrect(i,g,l)?f:d}return j}function j(a,b,c,d){var e=null,f=this.itemFinders[a.type];return f&&(e=f(this.siteData.getAllPossiblyRenderedRoots(),d,a),b[a.id]=e||c),e}function k(a,b){return(b?"F_":"")+a.type+","+a.id}var d=0,e=1,f=2;return h.prototype={initMyState:function(){this.cache={general:{}},this.fullJsonCache={},this.itemFinders={general:function(){return null}},this.identityCheckers={general:function(){return!0}},this.identityCheckersCache={},this.typesExistingInFullJson={}},getBoundCacheInstance:function(a){return{getPath:this.getPath.bind(this,a),getPointer:this.getPointer.bind(this,a),setPath:this.setPath.bind(this,a),resetValidations:this.resetValidations.bind(this)}},setPath:function(a,b,c){c&&(this.cache[b.type][b.id]=c)},getPath:function(c,e,g){var h=c&&this.fullJsonCache[e.type]?this.fullJsonCache:this.cache,l=c&&!!this.typesExistingInFullJson[e.type],m=l?this.fullJson:this.json,n=l?this.fullJsonGetItemInPath:this.getItemInPath,o=h[e.type];if(!o)return null;var p=o[e.id],q=g&&a.isEmpty(e.innerPath),r=k(e,l),s=i.call(this,r,e,p,q,m);return s===d&&(p=q?null:j.call(this,e,o,p,n),s=p?f:this.validated[r]),this.validated[r]=s,p&&e.innerPath&&(p=p.concat(e.innerPath),
b.validatePathExist(m,p,!g)||(p=null)),p},getPointer:function(b,c,e,f){var g=b&&this.fullJsonCache[e]?this.fullJsonCache[e]:this.cache[e],h={type:e,id:c};return f&&(a.isEqual(g[c],f)||(this.validated[k(h,b)]=d),g[c]=f),g[c]?h:null},resetValidations:function(){this.validated={}}},h}),define("core/core/data/DisplayedJsonUpdater",["lodash","utils","experiment"],function(a,b,c){"use strict";function e(a){return a.type===b.constants.VIEW_MODES.MOBILE}function g(a){return j(a)&&a.length>2&&"data"===a[2]}function h(a){return j(a)&&a.length>2&&"structure"===a[2]}function i(a){return j(a)&&2===a.length}function j(a){return a&&a.length>0&&"pagesData"===a[0]}function k(b){return a.isEqual(b,["pagesData"])}function l(a){return o.call(this,a)||p.call(this,a)}function m(a){var b=this.pointers.getOriginalPointerFromInner(a),c=this.displayedCache.getPath(b);return j(c)}function n(a){return"page"===this.pointers.getPointerType(a)}function o(a){return"component"===this.pointers.getPointerType(a)}function p(a){return"componentStructure"===this.pointers.getPointerType(a)}function q(a){return a&&("data"===a.type||"props"===a.type||"style"===a.type)}function r(b,c){b&&c&&(b.propertyQuery&&c.set("props",b.propertyQuery,b.id),b.structure&&r(b.structure,c),b.children&&a.forEach(b.children,function(a){r(a,c)}),b.components&&a.forEach(b.components,function(a){r(a,c)}))}function s(b){var c=this.pointers.components.getChildren(b);a.forEach(c,function(a){s.call(this,a)},this);var d=this.displayedJsonDAL.get(b).propertyQuery,e=this.pointers.components.getPageOfComponent(b),f=this.pointers.data.getPropertyItem(d,e),g=this.pointers.getPointerType(f);this.reverseDataMap.remove(g,f.id)}function t(b,c){var d=this.fullCache.getPath(b);if(!d)throw new Error("pointer path does not exist");if(k(d)){var e=a.get(this.fullJson,d);u.call(this,e,c)}else j(d)?w.call(this,b,c):this.displayedJsonDAL.set(b,fullStructureNode)}function u(b,c){var d=this.pointers.page.getAllPagesPointer();this.displayedJsonDAL.set(d,{}),v.call(this,c,"masterPage"),a(b).omit("masterPage").keys().forEach(v.bind(this,c)).value()}function v(a,b){var c=this.pointers.page.getPagePointer(b)||this.pointers.page.getNewPagePointer(b);this.displayedJsonDAL.set(c,{}),w.call(this,c,a)}function w(b,d){var f=e(b),g=this.fullCache.getPath(b),h=a.take(g,2),i=a.last(h),k=a.get(this.fullJson,h),l=a.get(this.fullJson,g);if(j(g)&&!q(b)){var m=A(l,d,k,f);z.call(this,b,m,h),c.isOpen("partialProperties")&&r(m,this.reverseDataMap),this.pointers.page.isPointerPageType(b)&&x.call(this,i)}else this.displayedJsonDAL.set(b,l)}function x(d){if(c.isOpen("removeJsonAnchors")){var e=this.displayedJsonDAL.jsonData,f=e.getPageData(d).structure,g="masterPage"===d?"SITE_STRUCTURE":d,h=a.get(e,["anchorsMap",d,e.getViewMode()]);if(h||b.layoutAnchors.shouldCreateAnchorsForPage(f,e.isMobileView())){var i=e.getAllTheme(),j=e.getViewMode(),k=b.layoutAnchors.createPageAnchors(f,i,e.isMobileView());a.set(e,["anchorsMap",g,j],k)}}}function y(c,d){var e=c[1];if(h(c)){var f=this.pointers.components.getPage(e,b.constants.VIEW_MODES.DESKTOP);w.call(this,f,d)}else if(i(c)){var g=this.pointers.page.getPagePointer(e)||this.pointers.page.getNewPagePointer(e);w.call(this,g,d)}else if(k(c)){var j=a.get(this.fullJson,c);u.call(this,j,d)}else{var l=a.get(this.fullJson,c);this.displayedJsonDAL.setByPath(c,l)}}function z(a,b,c){if(n.call(this,a))this.displayedJsonDAL.isExist(a)?this.displayedJsonDAL.merge(a,b):this.displayedJsonDAL.set(a,b);else{this.displayedJsonDAL.set(a,b.structure);var d=c.concat("data");this.displayedJsonDAL.setByPath(d,b.data)}}function A(a,c,d,e){var f=b.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(a,c,d,e);return f}function B(a){return"SITE_STRUCTURE"===a?"masterPage":a}function C(a,b,c,d,e){this.fullJson=a,this.displayedJsonDAL=b,this.fullCache=c,this.displayedCache=d,this.pointers=e}var d="udpates outside of pagesData should be done only through full json DAL";return C.prototype={onPush:function(a,b,c,e,f){if(!m.call(this,a))throw new Error(d);if(l.call(this,a)){var g=this.pointers.getOriginalPointerFromInner(a);return void t.call(this,g,f)}this.displayedJsonDAL.push(a,c,e,b)},onMerge:function(a,b){var c=this.pointers.getOriginalPointerFromInner(a);if(!m.call(this,c))throw new Error(d);t.call(this,c,b)},onRemove:function(a,b){if(!m.call(this,a))throw new Error(d);if(p.call(this,a)){var e=this.pointers.getOriginalPointerFromInner(a);return void t.call(this,e,b)}o.call(this,a)&&c.isOpen("partialProperties")&&s.call(this,a),this.displayedJsonDAL.remove(a)},onSet:function(a,b){a=this.pointers.getOriginalPointerFromInner(a);var c=this.fullCache.getPath(a);if(!j(c))throw new Error(d);t.call(this,a,b)},onSetByPath:function(a,b){if(!j(a))throw new Error(d);y.call(this,a,b)},onRemoveByPath:function(b,c){if(!j(b))throw new Error(d);if(!a.isArray(b)||a.isEqual(b,["pagesData"]))throw new Error('path "'+b+'" is invalid or cant be removed');i(b)||g(b)?this.displayedJsonDAL.removeByPath(b,c):h(b)&&y.call(this,b,c)},onPushByPath:function(b,c,e){if(!j(b))throw new Error(d);if(a.isArray(b)&&j(b))return void y.call(this,b,e);var f=a.isNumber(c)?b.concat(c):b,g=a.get(this.fullJson,f);this.displayedJsonDAL.pushByPath(b,g,c)},onMergeByPath:function(b,c){if(!j.call(this,b))throw new Error(d);if(a.isArray(b)&&j(b))return void y.call(this,b,c);var e=a.get(this.fullJson,b);this.displayedJsonDAL.mergeByPath(b,e)},onModesChange:function(a,b){t.call(this,a,b)},updateDisplayedRoot:function(a,b,d){var e=A(b,a,b,d),f=B(b.structure.id),g=this.pointers.page.getPagePointer(f)||this.pointers.page.getNewPagePointer(f);return c.isOpen("partialProperties")&&r(e,this.reverseDataMap),this.displayedJsonDAL.set(g,e),e},setReverseCompDataMap:function(a){this.reverseDataMap=a}},C}),define("core/core/data/DisplayedJsonDal",["lodash","utils","core/core/data/pathValidationUtil"],function(a,b,c){"use strict";function e(a,b,d){return c.validatePathExist(a,b,d)}function f(b,c){var d=[].concat(c),e=d.pop(),f=a.get(b,d);a.isString(e)?delete f[e]:f.splice(e,1)}var d=b.objectUtils.cloneDeep,g=function(a,b){this.pointersCache=b,this.jsonData=a};return g.prototype={get:function(a){var b=this.pointersCache.getPath(a);return this.getByPath(b)},getByPath:function(b){return b?d(a.get(this.jsonData,b)):void 0},set:function(a,b){var c=this.pointersCache.getPath(a,!0);this.setByPath(c,b)},setByPath:function(b,c){if(!a.isArray(b))throw new Error("path type is not an array - "+b);a.set(this.jsonData,b,d(c))},isExist:function(a){var b=this.pointersCache.getPath(a);return!!b},isPathExist:function(a){return e(this.jsonData,a,!0)},merge:function(a,b){if(this.isExist(a)){var c=this.pointersCache.getPath(a);this.mergeByPath(c,b)}},mergeByPath:function(b,c){if(e(this.jsonData,b,!0)&&a.isPlainObject(c)){var d=this.getByPath(b),f=a.assign({},d,c);this.setByPath(b,f),this.pointersCache.resetValidations()}else if(!a.isPlainObject(c))throw new Error(c+" is not an object")},push:function(b,c,d,e){if(!this.isExist(b))throw new Error(JSON.stringify(b)+" path does not exist");var f=this.pointersCache.getPath(b),g=this.getByPath(f);if(!a.isUndefined(e)&&!a.isNumber(e))throw new Error("push index arguments should be a numbert");if(e=a.isNumber(e)?e:g.length,this.pushByPath(f,c,e),d){var h=f.concat(e);this.pointersCache.setPath(d,h)}},pushByPath:function(b,c,d){var e=this.getByPath(b);if(d=a.isNumber(d)?d:e.length,d>e.length||0>d)throw new Error("Index out of bound");0===d?e.unshift(c):e.splice(d,0,c),this.setByPath(b,e),this.pointersCache.resetValidations()},remove:function(a){if(!this.isExist(a))throw new Error(a+" pointer does not exist");var b=this.pointersCache.getPath(a);this.removeByPath(b)},removeByPath:function(a){if(!a)throw new Error("path is not valid");f(this.jsonData,a),this.pointersCache.resetValidations()},getKeys:function(a){var b=this.pointersCache.getPath(a);if(b)return this.getKeysByPath(b)},getKeysByPath:function(b){c.validatePath(b,this.jsonData);var d=a.get(this.jsonData,b);if(!a.isPlainObject(d))throw new Error("Can not get keys of an element that isn't a plain object");return a.keys(d)}},g}),define("core/core/data/apiSections/documentDataAPI",["lodash","utils"],function(a,b){"use strict";function c(c,d,e){var f=c.cache.getBoundCacheInstance(!0),g=c.pointers.full.components.getPage(d,b.constants.VIEW_MODES.DESKTOP),h=g&&c.pointers.full.components.getComponent(e,g),i=h&&f.getPath(h);return i?a.get(c.fullPagesData,i):null}function d(a,d,e){var f=c(a,d,e);return b.dataUtils.getAllCompsInStructure(f,a.siteData.isMobileView())}function e(b,c,d){var e=b.cache.getBoundCacheInstance(!0),f=e.getPath(b.pointers.getInnerPointer(c,d));return f?a.get(b.fullPagesData,f):null}return function(b){return{getAllCompsUnderRoot:a.partial(d,b),getFullStructureProperty:a.partial(e,b)}}}),define("core/core/data/RuntimeDal",["lodash","utils"],function(a,b){"use strict";function f(a){return["runtime","components",a]}function g(a){return f(a).concat("state")}function h(a){return f(a).concat("overrides")}function i(a){return h(a).concat("props")}function j(a){return h(a).concat("data")}function k(a){return h(a).concat("layout")}function l(a){return h(a).concat("actionsBehaviors")}function m(a){return["runtime","popups",a]}function n(b,c,d){var e=a.get(b,c,d);return a.cloneDeep(e)}function o(b,c){return a.isEqual(c,a.pick(b,a.keys(c)))}function p(){this._compPointers={}}function q(a,b,c,d){this._siteData=a,this._siteDataApi=b,this._pointers=d,this._displayedDal=c,this._changeListeners=[],this._compPointers={},this.snapshotId=0,this._siteDataApi&&this._siteDataApi.registerDisplayedJsonUpdateCallback(p.bind(this))}function r(b,c,d,e,f){var g=e(b),h=a.get(this._siteData,d,{});if(a.set(this._siteData,d,a.assign({},h,c)),!o(g,c)){var i={type:f,value:c};s.call(this,b,i)}return++this.snapshotId}function s(b,c){a.forEach(this._changeListeners,function(a){a(b,c)})}function t(a,b,c){var d=x.call(this,a);if(!d)return null;var f=this._displayedDal.get(this._pointers.getInnerPointer(d,b));if(!f)return null;var g=this._pointers.data.getItem(c,f.replace("#",""),v.call(this,d)),h=this._displayedDal.get(g);return this._siteData.resolveData(h,v.call(this,d),e[c])}function u(b){if(this._siteData.isBehaviorsDataMapExist()){var c=t.call(this,b,"behaviorQuery",d.behaviors);return a.get(c,"items")}var e=x.call(this,b);return e&&this._displayedDal.get(this._pointers.getInnerPointer(e,"behaviors"))}function v(a){return this._pointers.full.components.getPageOfComponent(a).id}function w(a){return a===b.siteConstants.SITE_STRUCTURE_ID?b.siteConstants.MASTER_PAGE_ID:a}function x(a){var b=w(a),c=this._compPointers[b];return c&&this._displayedDal.isExist(c)?c:(y.call(this),this._compPointers[b])}function y(){this._compPointers=a(this._siteData.getAllPossiblyRenderedRoots()).map(function(a){var b=this._pointers.full.components.getPage(a,this._siteData.getViewMode());return b?[b].concat(this._pointers.full.components.getChildrenRecursively(b)):[]},this).flatten().indexBy("id").value()}var c=["height","width"],d=b.constants.DATA_TYPES,e={data:"document_data",props:"component_properties",design:"design_data"};return a.assign(q.prototype,{registerChangeListener:function(a){this._changeListeners.push(a)},getCompStructure:function(a){var b=x.call(this,a),c=b&&this._displayedDal.get(b);return c&&(c.layout=this.getCompLayout(a)),c},setCompState:function(b,c){var d=this.getCompState(b),e=g(b);if(a.set(this._siteData,e,a.assign({},d,c)),!o(d,c)){var f={type:"stateChange",value:this.getCompState(b)};s.call(this,b,f)}return++this.snapshotId},removeCompState:function(b){var c=f(b),d=a.get(this._siteData,c);d&&delete d.state},getCompState:function(a){return n(this._siteData,g(a),{})},getCompType:function(a){var b=x.call(this,a);return this._siteDataApi.document.getFullStructureProperty(b,"componentType")},getCompLayout:function(b){var c=x.call(this,b),d=c&&this._displayedDal.get(this._pointers.getInnerPointer(c,"layout")),e=n(this._siteData,k(b));return e?a.defaults(e,d):d},updateCompLayout:function(a,b){return r.call(this,a,b,k(a),this.getCompLayout.bind(this),"layoutChange")},getCompData:function(b){var c=t.call(this,b,"dataQuery",d.data),e=n(this._siteData,j(b));return e?a.defaults(e,c):c},setCompData:function(a,b){return r.call(this,a,b,j(a),this.getCompData.bind(this),"dataChange")},getCompProps:function(b){var c=t.call(this,b,"propertyQuery",d.prop),e=n(this._siteData,i(b));return e?a.defaults(e,c):c},setCompProps:function(a,b){return r.call(this,a,b,i(a),this.getCompProps.bind(this),"propsChange")},getActionsAndBehaviors:function(b){var c=u.call(this,b)||[];c=a.isString(c)?JSON.parse(c):c;var d=n(this._siteData,l(b),[]);return c.concat(d)},addActionsAndBehaviors:function(b,c){var d=l(b),e=a.get(this._siteData,d,[]);return a.set(this._siteData,d,e.concat(c)),++this.snapshotId},getCompName:function(a){var b=x.call(this,a);return b&&this._siteDataApi.document.getFullStructureProperty(b,"nickname")||a},getBoundingClientRect:function(b){var d=this._siteData.measureMap;return d?a.transform(c,function(a,c){a[c]=d[c][b]},{}):a.pick(this.getCompLayout(b),c)},getPageId:function(a){return v.call(this,x.call(this,a))},getParentId:function(a){var b=x.call(this,a),c=b&&this._pointers.full.components.getParent(b);return c&&c.id},isDisplayed:function(a){var b=x.call(this,a);return!!b&&this._displayedDal.isExist(b)},hasBeenPopupOpened:function(b){return a.get(this._siteData,m(b),!1)},markPopupAsBeenOpened:function(b){a.set(this._siteData,m(b),!0)}}),q}),define("core/core/SiteDataAPI",["utils","lodash","core/core/dataRequirementsChecker","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/pointersCache","core/core/data/DisplayedJsonUpdater","core/core/data/DisplayedJsonDal","core/core/data/apiSections/documentDataAPI","core/core/data/RuntimeDal"],function(a,b,c,d,e,f,g,h,i){"use strict";function l(a,c){var d={pagesData:a.pagesData},f=new e(a,a,d),g=o(a,f);k[a.siteId]=m(a,g,f,d,c);var h=b.clone(k[a.siteId]);return h}function m(a,c,d,e,f){var g={};return g.displayedDal=c.dal,g.pointers=c.pointers,g.cache=d,g.displayedJsonUpdater=n(c,e,d),g.fullPagesData=e,g.siteData=a,g.siteData.pagesData=b.clone(e.pagesData),g.siteDataAPI=new z(g,a.siteId,f),g}function n(a,b,c){var d=c.getBoundCacheInstance(!0),e=c.getBoundCacheInstance(!1),g=a.dal,h=a.pointers;return new f(b,g,d,e,h)}function o(a,b){return{dal:new g(a,b.getBoundCacheInstance(!1)),pointers:new d(b)}}function p(b){var c=this.siteData;a.layoutAnchors.shouldCreateAnchorsForPage(b,c.isMobileView())&&this.createPageAnchors(b.id)}function r(a,d,e,f,g,h,i){i&&g(h);var j=c.getNeededRequests(d,e,f),k=b.filter(j,function(a){return"pagesData"===b.first(a.destination)&&2===a.destination.length});h=h||[],h=h.concat(b.map(k,"destination[1]")),0!==j.length||i?a.loadBatch(j,r.bind(void 0,a,d,e,f,g,h)):(d.wixBiSession["dataLoaded"+q++]=b.now(),g(h))}function s(a,c,d,e){var f=k[a];t.call(this,f,c,d,e),"pagesData"!==b.first(d)&&f.dataLoadedCallback&&f.dataLoadedCallback(d,e)}function t(a,c,d,e){if(u(d)){b.set(c,d,e);var f=d[1];this.createDisplayedPage(f)}else b.set(a.siteData,d,e)}function u(a){return"pagesData"===b.first(a)&&b.size(a)>1}function v(a){var c=k[this.siteId].pointers.components.getPageOfComponent(a);b.forEach(this._displayedJsonUpdateCallbacks,function(b){b(c.id,a.id)})}function w(a,b,c){var d=k[a.siteId],e=y(d),f=d.pointers.components.getPage(c,e);return d.pointers.components.getComponent(b,f)}function x(a,b){var c=a.pointers.components.getPageOfComponent(b);return a.displayedDal.get(c)}function y(a){return a.siteData.isMobileView()?j.VIEW_MODES.MOBILE:j.VIEW_MODES.DESKTOP}function z(c,d,e){c.dataLoadedCallback=null,this.siteId=d,this.siteData=c.siteData,this.store=new a.Store(this.siteData,e),this.store.registerDataLoadedCallback(b.bind(s,this,this.siteId,c.fullPagesData)),this.siteData.setStore(this.store),this._displayedJsonUpdateCallbacks=[],this.document=h(c),this.runtime=new i(c.siteData,this,c.displayedDal,c.pointers)}var j=a.constants,k={},q=0;return z.prototype={registerDataLoadedCallback:function(a){var b=k[this.siteId];b.dataLoadedCallback=a},refreshRenderedRootsData:function(a){var b=k[this.siteId],c=this.siteData.getFocusedRootId(),d=this.siteData.getExistingRootNavigationInfo(c);r(this.store,b.siteData,b.fullPagesData,d,a)},registerDisplayedJsonUpdateCallback:function(a){this._displayedJsonUpdateCallbacks.push(a)},loadPage:function(a,c){function e(a){if(d.dataLoadedCallback){var b=d.fullPagesData.pagesData[a];d.dataLoadedCallback(["pagesData",a],b)}}var d=k[this.siteId];r(this.store,d.siteData,d.fullPagesData,a,function(d){a.pageId&&!b.includes(d,a.pageId)&&this.createDisplayedPage(a.pageId),b.forEach(d,e,this),c()}.bind(this),[])},resetAllActiveModes:function(){var a=b.keys(this.siteData.activeModes);b.forEach(a,function(a){this.siteData.activeModes[a]={}},this),b.forEach(a,function(a){this.createDisplayedPage(a)},this)},deactivateModesInPage:function(a){var b=k[this.siteId];b.siteData.activeModes[a]={},this.createDisplayedPage(a)},getActiveModes:function(){var a={};return b.forEach(this.siteData.activeModes,function(c,d){a[d]=b.omit(c,function(a){return!a})}),a},getPageActiveModes:function(a){return b.omit(this.siteData.activeModes[a],function(a){return!a})},activateModeById:function(a,b,c){var d=w(this,a,b);this.activateMode(d,c)},activateMode:function(a,b){var c=k[this.siteId],d=c.pointers.full.components.getPageOfComponent(a);d&&d.id&&(this.siteData.activeModes[d.id]=this.siteData.activeModes[d.id]||{},this.siteData.activeModes[d.id][b]=!0,this.createDisplayedNode(a))},deactivateModeById:function(a,b,c){var d=w(this,a,b);this.deactivateMode(d,c)},deactivateMode:function(a,b){var c=k[this.siteId],d=c.pointers.full.components.getPageOfComponent(a);d&&this.siteData.activeModes[d.id]&&(this.siteData.activeModes[d.id][b]=!1,this.createDisplayedNode(a))},switchModesByIds:function(a,b,c,d){var e=w(this,a,b);this.switchModes(e,c,d)},switchModes:function(a,b,c){if(b!==c){var d=k[this.siteId],e=d.pointers.full.components.getPageOfComponent(a);this.siteData.activeModes[e.id]=this.siteData.activeModes[e.id]||{};var f=this.siteData.activeModes[e.id],g=!1;f[c]||this.isModeTypeDefault(a,c)||(f[c]=!0,g=!0),f[b]&&(f[b]=!1,g=!0),g&&this.createDisplayedNode(a)}},isModeTypeDefault:function(c,d){var e=k[this.siteId],f=e.pointers.componentStructure.getModesDefinitions(c),g=e.displayedDal.get(f),h=b.find(g,{modeId:d});return h&&h.type===a.siteConstants.COMP_MODES_TYPES.DEFAULT},updatePageAnchorsIfNeeded:p,createPageAnchors:function(c,d){var e="SITE_STRUCTURE"===c?"masterPage":c,f=this.siteData.getPageData(e).structure,g=this.siteData.getAllTheme(),h=d?a.constants.VIEW_MODES.MOBILE:this.siteData.getViewMode(),i=d||this.siteData.isMobileView(),j=a.layoutAnchors.createPageAnchors(f,g,i);b.set(this.siteData,["anchorsMap",f.id,h],j)},createChildrenAnchors:function(c,d){var e=this.siteData,f=e.getViewMode(),g=e.getAllTheme(),h=b.get(e,["pagesData",d,"structure","id"]),i=a.layoutAnchors.createChildrenAnchors(c,g,e.isMobileView());b.assign(e.anchorsMap[h][f],i)},createDisplayedPage:function(a){var b=k[this.siteId],c=this.siteData.activeModes,d=b.fullPagesData.pagesData[a];if(d){c[d.structure.id]=c[d.structure.id]||{};var e=b.siteData.isMobileView(),f=b.displayedJsonUpdater.updateDisplayedRoot(c,d,e);p.call(this,f.structure)}},createDisplayedNode:function(a){var b=k[this.siteId];b.displayedJsonUpdater.onModesChange(a,this.siteData.activeModes);var c=x(b,a);p.call(this,c),b.cache.resetValidations(),v.call(this,a)}},{createSiteDataAPIAndDal:l}}),define("core/components/audioMixin",["lodash","utils"],function(a,b){"use strict";return{getInitialState:function(){this.audioAspect=this.props.siteAPI.getSiteAspect("AudioAspect"),this.audioObj=null,this.isAudioPlaying=!1,this.trackPosition=0,this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed},componentWillReceiveProps:function(a){this.props.compData.uri!==a.compData.uri&&this.clearAudioObject();var b=this.audioAspect.isCompPlaying(this);b?this.setState({$playerState:"playing"}):this.isAudioPlaying&&this.setState({$playerState:"pausing"})},componentDidUpdate:function(){var a=this.audioAspect.isCompPlaying(this);if("mobile"!==this.getDeviceState()&&this.props.siteData.renderFlags.isPlayingAllowed){if(this.props.siteData.renderFlags.isPlayingAllowed!==this.isPlayingAllowed){this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed;var b=this.props.compProp.autoplay||this.props.compData.autoPlay;b&&this.initiatePlay()}}else this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed,!this.isPlayingAllowed&&a&&this.initiatePause()},componentDidMount:function(){"mobile"!==this.getDeviceState()&&this.autoplay&&this.isPlayingAllowed&&this.initiatePlay()},componentWillUnmount:function(){this.clearAudioObject()},getOrCreateAudioObject:function(){return this.audioObj||this.createAudioObject()},createAudioObject:function(){var a=this;if(!a.props.compData.uri)return!1;var b={id:a.props.id,url:this.props.siteData.serviceTopology.staticAudioUrl+"/"+a.props.compData.uri,autoPlay:!1,stream:!0,multiShot:!0,multiShotEvents:!0,autoLoad:!a.props.siteData.isMobileView()||!this.isPlayingAllowed,usePolicyFile:!1,whileloading:function(){"function"==typeof a.whileLoadingHandler&&a.whileLoadingHandler(this.duration)},onfailure:function(){a.failedToLoadAudioFile()},onfinish:function(){a.finishedPlayingAudio(this.id)},onsuspend:function(){a.audioLoadingSuspended(this.id)},onload:function(b){b||a.audioAspect.onHTML5ErrorTryToReloadWithFlash()}};return this.audioAspect.createAudioObj(b)},clearAudioObject:function(){this.audioObj&&(this.audioObj.pause(),this.audioObj=null,this.trackPosition=0,this.resetTrackPosition&&this.resetTrackPosition())},failedToLoadAudioFile:function(a){var c="Failed to load audio file "+a,d="color: #ff9494; font-size: 24px;";b.log.verbose("%c"+c,d),b.log.error(c)},audioLoadingSuspended:function(a){var c="Browser has chosen to stop downloading audio file "+a,d="color: #ff9494; font-size: 24px;";b.log.verbose("%c"+c,d)},playAudio:function(){var a=this,b={volume:a.audioVolume,position:a.trackPosition,whileplaying:function(){a.trackPosition=this.position,"function"==typeof a.whilePlayingHandler&&a.whilePlayingHandler(this.position)}};this.setVolume(this.audioVolume),this.audioObj.play(b)},updateAudioObject:function(){this.audioObj=this.getOrCreateAudioObject(),this.audioAspect.isSoundManagerOnResetup()&&(this.audioObj=null),this.audioObj&&(this.isAudioPlaying||"playing"!==this.state.$playerState?this.isAudioPlaying&&"pausing"===this.state.$playerState?(this.isAudioPlaying=!1,this.audioObj.pause()):"repeat"===this.state.$playerState&&(this.isAudioPlaying=!1):(this.isAudioPlaying=!0,this.playAudio()))},getDeviceState:function(){return this.props.siteData._isMobileView?"mobile":"desktop"},initiatePlay:function(){a.isEmpty(this.props.compData.uri)||""===this.props.compData.uri||this.audioAspect.updatePlayingComp(this)},initiatePause:function(){this.audioAspect.updatePausingComp(),this.setState({$playerState:"pausing"})},getAudioDuration:function(){return this.audioObj.duration},seekAudio:function(a){this.trackPosition=a,this.isAudioPlaying?this.audioObj.setPosition(a):this.initiatePlay()},setVolume:function(a){this.audioVolume=a,this.isAudioPlaying&&this.audioObj.setVolume(a)},muteAudio:function(){this.audioObj.mute()},unmuteAudio:function(){this.audioObj.unmute()}}}),define("core/components/facebookComponentMixin",["lodash","reactDOM"],function(a,b){"use strict";function c(a,b){return a&&a.height&&a.width&&b&&b.height&&b.width?a.height!==b.height||a.width!==b.width:!1}return{getInitialState:function(){this.loadScript(),this._lastHref=this.getHref(this.props)},loadScript:function(){if("undefined"!=typeof window&&!window.FB){var a=this.props.siteAPI.getSiteAspect("externalScriptLoader");a.loadScript("FACEBOOK",null,this)}},parseFacebookPluginDomNode:function(){a.has(window,"FB.XFBML.parse")&&window.FB.XFBML.parse(b.findDOMNode(this))},componentDidMount:function(){this.parseFacebookPluginDomNode()},componentDidUpdate:function(b){var d=this.getHref(this.props);a.isEqual(b.compData,this.props.compData)&&a.isEqual(b.compProp,this.props.compProp)&&!c(b.style,this.props.style)&&d===this._lastHref||this.parseFacebookPluginDomNode(),this._lastHref=d}}}),define("core/components/twitterComponentMixin",["lodash","utils"],function(a,b){"use strict";function d(a,c){return"userLang"===a?b.wixUserApi.getLanguage(c.requestModel.cookie,c.currentUrl):a}var c=["da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"];return{getInitialState:function(){return{width:this.props.style.width,height:this.props.style.height}},componentDidMount:function(){window.addEventListener("message",this.processMessage)},componentWillUnmount:function(){window.removeEventListener("message",this.processMessage)},processMessage:function(a){a.data&&"twitterSize"===a.data.type&&a.data.compId===this.props.id&&(this.registerReLayout(),this.setState(a.data.size))},getLanguage:function(){var b=d(this.props.compProp.dataLang,this.props.siteData);return a.includes(c,b)?b:"en"},getSkinProperties:function(){return{"":{style:{width:this.state.width,height:this.state.height}},iframe:{src:this.getIFrameSrc(),width:this.state.width,height:this.state.height}}}}}),define("core/components/util/galleryPagingCalculations",["lodash","utils"],function(a,b){"use strict";var c=b.matrixCalculations,d={getNumberOfDisplayedRows:function(a,b,d,e){return a||e&&b*d>e?b:c.getAvailableRowsNumber(b,d,e)},getItemsPerPage:function(a,b,c){return a*this.getNumberOfDisplayedRows(null,b,a,c)},getTotalPageCount:function(a,b,c){var d=this.getItemsPerPage(a,b,c),e=Math.floor(c/d);return c%d>0&&e++,e},getNextPageItemIndex:function(a,b,c,d){var e=a+this.getItemsPerPage(b,c,d);return e>=d&&(e=0),e},getPrevPageItemIndex:function(a,b,c,d){var e=this.getItemsPerPage(b,c,d),f=a-e;return 0>f&&(f=(this.getTotalPageCount(b,c,d)-1)*e),f},getCounterText:function(a,b,c,d){var e=Math.floor(a/this.getItemsPerPage(b,c,d)),f=this.getTotalPageCount(b,c,d);return f||(f=1),String(e+1)+"/"+String(f)},getPageItems:function(a,b,c,d){return this.getPageItemsByStartIndex(a,b,this.getItemsPerPage(c,d,a.length))},getPageItemsByStartIndex:function(a,b,c){var d=[];if(c<a.length){for(var e=this.getLastItemIndex(a,b,c),f=b;e>=f;f++)d.push(a[f]);return d}return a},getLastItemIndex:function(a,b,c){return Math.min(a.length-1,b+c-1)}};return d}),define("core/components/util/galleriesHelperFunctions",["skins","utils","lodash"],function(a,b,c){"use strict";function e(a){var b=d[a].exports;return b&&b.heightDiff||0}function f(a){var b=d[a].exports;return b&&b.widthDiff||0}function g(a,c,d,e,f){var g=d,h=this.getSkinHeightDiff(e),i=b.matrixCalculations,j=i.getItemHeight(d,f,a,h);return Math.floor(c*j+(c-1)*g)+h}function h(a,b,d){var e=0,f=parseInt(b.imgHeightDiff&&b.imgHeightDiff.value,10)||0,g=parseInt(b.topPadding&&b.topPadding.value,10)||0;return f||g?e=f+g:a&&a.exports&&(e="mobileView"===d&&c.isNumber(a.exports.m_heightDiff)?a.exports.m_heightDiff:a.exports.heightDiff||0),e}function i(a,b){var d=0;return a&&a.exports&&(d="mobileView"===b&&c.isNumber(a.exports.m_widthDiff)?a.exports.m_widthDiff:a.exports.widthDiff||0),d}var d=a.skins;return{getSkinHeightDiff:e,getSkinWidthDiff:f,getGalleryHeight:g,getDisplayerHeightDiff:h,getDisplayerWidthDiff:i}}),define("core/components/util/boxSlideShowCommon",["lodash"],function(a){"use strict";function f(a){return a.componentType}function g(a){return a.props.structure.componentType}var b="wysiwyg.viewer.components.BoxSlideShow",c="wysiwyg.viewer.components.BoxSlideShowSlide",d="wysiwyg.viewer.components.StripContainerSlideShow",e="wysiwyg.viewer.components.StripContainerSlideShowSlide";return{getNextSlideIndex:function(a,b){var c=b+1;return c>=a.length&&(c=0),c},getPrevSlideIndex:function(a,b){var c=b-1;return 0>c&&(c=a.length-1),c},getSlidesFromChildrenByStructure:function(b){return a.filter(b,function(a){return f(a)===c||f(a)===e})},getSlidesFromChildrenByProps:function(b){return a.filter(b,function(a){return g(a)===c||g(a)===e})},getShownOnAllSlidesFromChildrenByStructure:function(b){return a.reject(b,function(a){return f(a)===c||f(a)===e})},getShownOnAllSlidesFromChildrenByProps:function(b){return a.reject(b,function(a){return g(a)===c||g(a)===e})},isBoxOrStripSlideShowComponent:function(a){return a===b||a===d},isBoxOrStripSlideShowSlideComponent:function(a){return a===c||a===e},getMatchingChildSlideType:function(a){if(!this.isBoxOrStripSlideShowComponent(a))throw new Error("invalid comp type, not a box or strip slide show component");return a===b?c:e}}}),define("core/components/util/filterHtmlString",["lodash","xss","utils","experiment","core/bi/events"],function(a,b,c,d,e){"use strict";function f(){var c={strike:[],hatul:[]},d=["color","background-color","font-size","font-family","font-style","text-decoration","line-height","text-shadow","direction"];a.assign(b.whiteList,c),b.whiteList.a.push("data-anchor"),a.forOwn(b.whiteList,function(a){a.push("style"),a.push("class"),a.push("dir")}),a.forEach(d,function(a){b.cssFilter.options.whiteList[a]=!0})}function g(a,c,d,e){return b.safeAttrValue(a,c,d,e)}function h(b,c){var d=a.find(b,c);d?d.count++:b.push(a.assign(c,{count:1}))}function i(a,b){return"style"===a.toLowerCase()&&""===b}function j(a,b,d,f){c.logger.reportBI(f,e.UNSAFE_HTML_IN_TEXT_COMPONENT,{filtered_content:JSON.stringify(a),component_id:b,component_type:d})}function k(b){return a.some(a.values(b),a.size)}if(b)return f(),function(a,c,e,f){var l={tags:[],attrs:[],attrValues:[]},m=b(a,{onIgnoreTag:function(a){var b={tagName:a};h(l.tags,b)},onIgnoreTagAttr:function(a,b){var c={tagName:a,attrName:b};h(l.attrs,c)},safeAttrValue:function(a,b,c,d){var e=g(a,b,c,d);if(e)return e;if(!i(b,c)){var f={tagName:a,attrName:b,attrValue:c};h(l.attrValues,f)}return""}});return d.isOpen("sv_textCompFilter")&&k(l)&&j(l,e,c,f),d.isOpen("sv_safeHtmlString")?m:a}}),define("core/components/textCompMixin",["lodash","core/components/skinBasedCompOld","core/components/util/filterHtmlString"],function(a,b,c){"use strict";return{mixins:[b],componentWillMount:function(){this.convertCompDataTextToHTML(this.props),this._componentHtml=c(this._componentHtml,this.constructor.displayName,this.props.id,this.props.siteData)},componentWillReceiveProps:function(a){this.convertCompDataTextToHTML(a),this._componentHtml=c(this._componentHtml,this.constructor.displayName,this.props.id,this.props.siteData)},getRootStyle:function(b){var c=a.clone(b||{});return"hidden"!==(c["overflow-y"]||c.overflowY)&&(c.height="auto"),c},getSkinProperties:function(){this.lastScale=a.get(this,"props.structure.layout.scale")||1;var d,b=this.props.skin,c={"":{style:this.getRootStyle(this.props.style)}};return d="wysiwyg.viewer.skins.WRichTextSkin"===b||"wysiwyg.viewer.skins.WRichTextClickableSkin"===b?c.richTextContainer={}:c[""],d.dangerouslySetInnerHTML={__html:this._componentHtml||""},this.props.title&&(c[""].title=this.props.title),c}}}),define("core/components/mediaZoomWrapperMixin",["lodash","core/components/skinBasedCompOld"],function(a,b){"use strict";return{mixins:[b],componentWillMount:function(){var a=this.props.siteAPI.getSiteAspect("windowKeyboardEvent");a.registerToEscapeKey(this);var b=this.props.siteAPI.getSiteAspect("windowTouchEvents");b.registerToWindowTouchEvent("touchMove",this);var c=this.getPrevAndNextState();c.next&&a.registerToArrowRightKey(this),c.prev&&a.registerToArrowLeftKey(this)},componentWillUnmount:function(){this.props.siteAPI.getSiteAspect("windowKeyboardEvent").unRegisterKeys(this),this.props.siteAPI.getSiteAspect("windowTouchEvents").unregisterFromWindowTouchEvent("touchMove",this)},getSkinProperties:function(){var a=this.getChildZoomComponentType(),b="wysiwyg.viewer.components.MobileMediaZoom"===a;return{"":{children:this.createChildComponent(this.props.compData,a,"mediaZoom",{ref:this.props.compData.id,actualNavigateToItemFunc:this.actualNavigateToItem,getBoxDimensionsFunc:this.getBoxDimensions,
getChildCompFunc:this.getChildComp,getPrevAndNextStateFunc:this.getPrevAndNextState,isDataChangedFunc:this.isDataChanged,closeFunction:this.props.closeFunction,enableInnerScrolling:this.enableInnerScrolling||!1}),style:{width:"100%",height:"100%",position:b?"static":"absolute"}}}},closeMediaZoom:function(){this.refs[this.props.compData.id].closeMediaZoom()},onEscapeKey:function(){this.closeMediaZoom()},onArrowLeftKey:function(){this.refs[this.props.compData.id].clickOnPreviousButton()},onArrowRightKey:function(){this.refs[this.props.compData.id].clickOnNextButton()},onWindowTouchMove:function(a){this.enableInnerScrolling||(a.preventDefault(),a.stopPropagation())}}}),define("core/components/galleryImageExpandedActionMixin",["lodash"],function(a){"use strict";function c(a){return{id:a,timeStamp:window.performance?window.performance.now():window.Date.now()}}function d(c,e){return e=e||[],c?(a.includes(b,c.componentType)&&e.push(c),a.forEach(c.components,function(a){d(a,e)}),e):e}function e(b,c,d){var e=b.getDataByQuery(d.dataQuery,c);return a.get(e,"items")}function f(b,c){return a.findIndex(c,function(c){return a.some(c,{id:b})})}var b=a.map(["SlideShow","Slider","PaginatedGrid","Matrix"],function(a){return"wysiwyg.viewer.components."+a+"Gallery"});return{handleImageExpandedAction:function(){var b=this.props.siteData,g=this.props.pageId,h=a.get(this.props,"compData.id")||this.props.id,i=d(b.pagesData[g].structure),j=a.map(i,e.bind(null,b,g)),k=f(h,j);if(-1!==k){var l={name:"imageExpanded",pageId:g,sourceId:i[k].id,type:"comp"},m=this.props.siteAPI.getSiteAspect("behaviorsAspect");m.handleAction(l,c(h))}}}}),define("core/components/textScaleMixin",["lodash","skins","fonts"],function(a,b,c){"use strict";function e(a,b){var c=b.structure.layout.scale;return b.siteData.mobile.convertFontSizeToMobile(a,c)}var d=c.fontUtils;return{getFontSize:function(a){var b={};if(a.siteData.isMobileView()){var c=this.getDesktopFontSize(a);c&&(b.fontSize=e(c,a)+"px")}return b},getDesktopFontSize:function(c){var e=c.structure.styleId,f=c.siteData.getAllTheme()[e],g=f&&f.skin||c.strucure&&c.strucure.skin,h=a.get(f,["style","properties","fnt"])||a.get(b,["skins",g,"paramsDefaults","fnt"]);if(h){var i=c.siteData.getFont(h)||h;return parseInt(d.parseFontStr(i).size,10)}}}}),define("core/components/buttonMixin",["lodash","utils","core/components/textScaleMixin","experiment"],function(a,b,c,d){"use strict";function e(a){var c={};if("center"!==a.compProp.align){var e="margin"+(a.compProp.align?b.stringUtils.capitalize(a.compProp.align):""),f=a.siteData.measureMap&&a.siteData.measureMap.custom[a.id+"label"];d.isOpen("sv_buttonUsesFlex")?c[e]=f&&f.margin||a.compProp.margin:c[e]=f?f[e]:a.compProp.margin}return c}function f(a){var b={};return""!==a.compProp.padding&&(b.padding=a.compProp.padding),b}function g(){return this.shouldRecalculateLineHeight?{lineHeight:""}:{}}var h={mixins:[c],componentWillMount:function(){this.currentStyle=this.props.siteData.getAllTheme()[this.props.structure.styleId],this.currentScale=a.get(this,"props.structure.layout.scale",1)},componentWillReceiveProps:function(b){var c=b.siteData.getAllTheme()[b.structure.styleId],d=a.get(b,"structure.layout.scale",1);a.isEqual(this.currentStyle,c)&&this.currentScale===d||(this.shouldRecalculateLineHeight=!0),this.currentStyle=c,this.currentScale=d},componentDidUpdate:function(){this.shouldRecalculateLineHeight&&(this.shouldRecalculateLineHeight=!1)},resetMinHeightIfNeeded:function(a){this.shouldRecalculateLineHeight&&(a[""]=a[""]||{},a[""].style=a[""].style||{},a[""].style.minHeight="")},getLabelStyle:function(){return a.merge(e(this.props),f(this.props),this.getFontSize(this.props),g.call(this))}};return h}),define("core/components/util/matrixAnimationManipulation",["lodash"],function(a){"use strict";function b(){return.1}var c={getDefultAnimationValues:function(a,b,c,d){return{sourceNodesArrSorted:[a],destNodesArrSorted:[b],stagger:0,timingFunctionIndex:c,transName:d,sporadicallyRandom:!1}},getUpdatedTimingFunctionIndex:function(a,b){return b>a.length-1&&(b=0),b},getCrossFadePossibleTransitionByName:function(a){switch(a){case"crossFadeHorizWave":return this.sortMatrixByRows;case"crossFadeVertWave":return this.sortMatrixByCols;case"seq_crossFade_Diagonal":return this.convertMatrixToDiagonal}},convertArrayToMatrix:function(b,c,d){var e=0,f=new Array(c);return a.times(c,function(c){f[c]||(f[c]=[]),a.times(d,function(a){e<b.length?(f[c][a]=b[e],e++):f[c][a]=-1})}),f},sortMatrixByRows:function(a){return[a]},sortMatrixByCols:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d),f=[],g=0;return a.times(d,function(b){a.times(c,function(a){-1!==e[a][b]&&(f[g]=e[a][b],g++)})}),[f]},reverseMatrix:function(a){return a.reverse()},convertMatrixToDiagonal:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d),f=[],g=0;return a.times(c+d,function(b){var h=Math.max(0,b-c),i=Math.min(d-h,b,c);a.times(i,function(a){var d=e[Math.min(c,b)-a-1][h+a];-1!==d&&(f[g]=d,g++)})}),[f]},convertMatrixToReverseDiagonal:function(a,b,c){var d=this.convertMatrixToDiagonal(a,b,c);return this.reverseMatrix(d)},getMatrixByRows:function(b,c,d){var e=0,f=new Array(c);return a.times(c,function(c){f[c]||(f[c]=[]),a.times(d,function(a){e<b.length&&(f[c][a]=b[e],e++)})}),f},getMatrixByRowsReverse:function(a,b,c){var d=this.getMatrixByRows(a,b,c);return this.reverseMatrix(d)},getMatrixByColsReverse:function(a,b,c){var d=this.getMatrixByCols(a,b,c);return this.reverseMatrix(d)},getMatrixByCols:function(b,c,d){var e=this.getMatrixByRows(b,c,d),f=new Array(d);return a.times(d,function(b){f[b]||(f[b]=[]),a.times(c,function(a){e[a][b]&&(f[b][a]=e[a][b])})}),f}},d={getSortedArrayAndStagger:function(a,d,e,f,g,h){switch(a){case"none":return{sourceNodesArrSorted:[d],destNodesArrSorted:[e],stagger:0,transName:"NoTransition"};case"seq_shrink_All":case"seq_crossFade_All":var i=[c.sortMatrixByRows,c.sortMatrixByCols,c.reverseMatrix,c.convertMatrixToDiagonal,c.convertMatrixToReverseDiagonal,c.sortMatrixByRows];h=c.getUpdatedTimingFunctionIndex(i,h);var j=i[h];return{sourceNodesArrSorted:j.call(c,d,f,g),destNodesArrSorted:j.call(c,e,f,g),stagger:h===i.length-1||d.length!==e.length?0:.1,timingFunctionIndex:h,transName:"seq_shrink_All"===a?"Shrink":"CrossFade"};case"swipe_horiz_All":var k=[c.getMatrixByRows,c.getMatrixByRowsReverse];h=c.getUpdatedTimingFunctionIndex(k,h);var l=k[h];return{sourceNodesArrSorted:l.call(c,d,f,g),destNodesArrSorted:l.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideHorizontal",sporadicallyRandom:f>1};case"swipe_vert_All":var m=[c.getMatrixByCols,c.getMatrixByColsReverse];h=c.getUpdatedTimingFunctionIndex(m,h);var n=m[h];return{sourceNodesArrSorted:n.call(c,d,f,g),destNodesArrSorted:n.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideVertical",sporadicallyRandom:g>1};case"seq_random":var o=["seq_shrink_All","seq_crossFade_All","swipe_horiz_All","swipe_vert_All"],p=o[Math.floor(Math.random()*o.length)];return this.getSortedArrayAndStagger(p,d,e,f,g,h);case"horizSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideHorizontal");case"vertSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideVertical");case"crossFadeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"CrossFade");case"crossFadeHorizWave":case"crossFadeVertWave":case"seq_crossFade_Diagonal":var q=c.getCrossFadePossibleTransitionByName(a);return{sourceNodesArrSorted:q.call(c,d,f,g),destNodesArrSorted:q.call(c,e,f,g),stagger:.1,timingFunctionIndex:h,transName:"CrossFade"};case"seq_swipe_alternate":var r=[c.getMatrixByRows,c.getMatrixByCols];return h=c.getUpdatedTimingFunctionIndex(r,h),{sourceNodesArrSorted:d,destNodesArrSorted:e,stagger:b(),timingFunctionIndex:h,transName:0===h?"SlideHorizontal":"SlideVertical"}}}};return d}),define("core/components/uniquePageIdProviders/singlePostUniquePageIdProvider",["utils","lodash"],function(a,b){"use strict";function f(){var a=Array.prototype.slice.call(arguments,0);return c.SHA256.hex_sha256(a.join("/"))}var c=a.hashUtils,d=a.blogAppPartNames,e="blog";return{isMatched:function(a){return b.some(a.data.document_data,{appPartName:d.SINGLE_POST})},getUniquePageId:function(a,c){var g=a.pagesData[c],h=b.findWhere(g.data.document_data,{appPartName:d.SINGLE_POST}),i=a.wixapps.blog[h.id][1];return f(a.siteId,e,i)}}}),define("core/components/uniquePageIdProviders/uniquePageIdProviders",["core/components/uniquePageIdProviders/singlePostUniquePageIdProvider"],function(){"use strict";return Array.prototype.slice.call(arguments,0)}),define("core/components/uniquePageIdMixin",["lodash","core/components/uniquePageIdProviders/uniquePageIdProviders"],function(a,b){"use strict";function c(b,c){return a(b.pagesData.masterPage.structure.children).map(function(b){return a.isArray(b.components)?b.components:b}).flattenDeep().some({id:c})}return{getUniquePageId:function(){var d;return c(this.props.siteData,this.props.id)?this.props.siteData.getExternalBaseUrl():(d=a.find(b,function(a){var b=this.props.rootId,c=this.props.siteData.pagesData[b];return a.isMatched(c)},this),a.isUndefined(d)?this.props.siteData.currentUrl.full:d.getUniquePageId(this.props.siteData,this.props.rootId))}}}),define("core/components/bgVideoMixin",["lodash","react","reactDOM"],function(a,b,c){"use strict";return{propType:{structureComponentId:b.PropTypes.string.isRequired,compData:b.PropTypes.object.isRequired},getInitialState:function(){this.videoBackgroundAspect=this.props.siteAPI.getSiteAspect("VideoBackgroundAspect"),this.showOnNextTick=!1,this.errorMode=!1;var a=this.getVideoData(),b=this.getStructureComponentId();return this.videoBackgroundAspect.registerVideo(this.props.refInParent,b,a.id,this.qualityReady,this),this.resetVideoStates()},getStructureComponentId:function(){return this.props.structureComponentId},resetVideoStates:function(){return{stopped:!0,paused:!1,ready:!1,active:!0,loaded:!1,playEnded:!1,videoQuality:this.videoBackgroundAspect.getQuality(this.props.refInParent)}},componentDidMount:function(){var a=this.getVideoData();this.videoBackgroundAspect.registerVideo(this.props.refInParent,this.getStructureComponentId(),a.id,this.qualityReady,this),this.setPlaybackSpeed(a.playbackSpeed||1),this.registerEvents()},componentWillUnmount:function(){var a=this.getInstance();a.removeEventListener("timeupdate",this.onTimeUpdate),a.removeEventListener("ended",this.onPlayEnded),a.removeEventListener("error",this.onError),a.removeEventListener("stalled",this.onStalled),this.videoBackgroundAspect.unregisterVideo(this.props.refInParent),this.removeVideoSecurely()},componentWillReceiveProps:function(a){var b=a.compData,c=this.getVideoData();if(this.setPlaybackSpeed(b.playbackSpeed||1),b.loop&&!c.loop&&this.setState({playEnded:!1}),b.videoId!==c.videoId){var d=this.getStructureComponentId();this.videoBackgroundAspect.registerVideo(this.props.refInParent,d,b.id,this.qualityReady,this),this.stop(),this.setState(this.resetVideoStates())}},registerEvents:function(){this.getInstance().addEventListener("timeupdate",this.onTimeUpdate,!0),this.getInstance().addEventListener("ended",this.onPlayEnded,!0),this.getInstance().addEventListener("error",this.onError,!0),this.getInstance().addEventListener("stalled",this.onStalled,!0)},isLoadNeeded:function(a,b){var c=a.compData,d=this.getVideoData();return this.errorMode||c.videoId!==d.videoId||!b.videoQuality||this.state.videoQuality.quality!==b.videoQuality.quality||!this.state.active&&b.active},componentDidUpdate:function(a,b){var c=this.getVideoData();this.isLoadNeeded(a,b)&&(this.errorMode=!1,this.load()),this.getInstance().paused&&!b.active&&this.state.active||!this.state.stopped&&!this.state.paused?(this.getInstance().play(),this.setPlaybackSpeed(c.playbackSpeed||1),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)):!b.stopped&&this.state.stopped?(this.getInstance().pause(),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent),this.state.active&&this.state.loaded&&this.getInstance().currentTime>0&&(this.getInstance().currentTime=0)):!b.paused&&this.state.paused&&(this.getInstance().pause(),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)),!b.ready&&this.state.ready?this.showOnNextTick=!0:b.ready&&!this.state.ready&&(this.getInstance().style.visibility="hidden",this.showOnNextTick=!1)},notifyPlayingChange:function(){this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)},getInstance:function(){return c.findDOMNode(this.refs.video)},setPlaybackSpeed:function(a){this.getInstance().playbackRate=a},load:function(){var a=this.getInstance();a.load()},removeVideoSecurely:function(){var b=this.getInstance();b.pause(),a.forEach(b.children,function(a){"source"===a.nodeName.toLowerCase()&&a.setAttribute("src","")}),b.load()},kill:function(){this.state.active&&(this.removeVideoSecurely(),this.setState({active:!1,ready:!1,stopped:!0,loaded:!1}))},play:function(b,c){if(!c||!this.state.playEnded){var d={};this.state.active?this.state.stopped?d={stopped:!1,ready:!1}:this.state.paused&&(d={paused:!1}):d={active:!0,ready:!1,stopped:!1,pause:!1},(!this.state.videoQuality||b&&b.quality!==this.state.videoQuality.quality)&&(d.videoQuality=b),a.isEmpty(d)||this.setState(d)}},stop:function(b){this.state.stopped||this.setState(a.assign({ready:!1,stopped:!0,paused:!1},b?{playEnded:b}:{}))},pause:function(b){this.state.stopped||this.state.paused||this.setState(a.assign({paused:!0},b?{playEnded:b}:{}))},onPlayEnded:function(){this.pause(!0)},onError:function(a){a.currentTarget.networkState===a.currentTarget.NETWORK_NO_SOURCE&&(this.errorMode=!0)},onStalled:function(a){a.currentTarget.readyState===a.currentTarget.HAVE_NOTHING&&(this.errorMode=!0)},onTimeUpdate:function(){this.state.ready||!this.state.active||this.state.stopped||(this.setState({ready:!0,loaded:!0}),this.getInstance().currentTime=0),this.showOnNextTick&&this.getInstance().currentTime&&(this.showOnNextTick=!1,this.getInstance().currentTime>0&&(this.getInstance().style.visibility="visible"))},isPlaying:function(){return this.state.active&&!this.state.stopped&&!this.state.paused},getVideoData:function(){return this.props.compData},qualityReady:function(a,b){b!==this.getVideoData().videoId||!this.errorMode&&this.isPlaying()||(this.registerReLayout(),this.setState({videoQuality:a,ready:!1,loaded:!1}))}}}),define("core/activities/activity",["utils"],function(a){"use strict";var b=function(){return{additionalInfoUrl:null,summary:""}},c=function(a){return a.currentUrl.full},d=function(){return a.guidUtils.getUniqueId()},e=function(a,b,c){this._siteData=a,this._fields=b,this._type=c||""};return e.prototype={getParams:function(){return{hs:this._siteData.getHubSecurityToken(),"activity-id":d(),"metasite-id":this._siteData.getMetaSiteId(),svSession:this._siteData.getSvSession(),version:"1.0.0"}},getPayload:function(){return{activityDetails:b(),activityInfo:"activityInfo",activityLocationUrl:c(this._siteData),activityType:"activityType",contactUpdate:{},createdAt:(new Date).toISOString()}},getHost:function(){return this._siteData.currentUrl.host}},e}),define("core/activities/tpaActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(a,c,d){b.call(this,a,c,d)};return c.prototype=new b,c.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"application-id":this._fields.appDefinitionId,instance:this._fields.instance};return e=a.assign(d,e)},c.prototype.getPayload=function(c){var d=b.prototype.getPayload.call(this,c),e={contactUpdate:this._fields.contactUpdate,activityInfo:this._fields.info,activityType:this._fields.type,activityDetails:this._fields.details};return e=a.assign(d,e)},c}),define("core/activities/contactFormActivity",["lodash","core/activities/activity","experiment"],function(a,b,c){"use strict";var d=29,e=function(b){var c="";return c+=b.subject?"<strong>"+b.subject+"</strong>":"",b.message&&(c+=b.subject?"<br>":"",c+=b.message),{additionalInfoUrl:null,summary:a.isEmpty(c)?"No message was received":c}},f={name:{first:"",last:""},emails:[{tag:"main",email:""}],phones:[{tag:"main",phone:""}],addresses:[{tag:"main",address:""}]},g={name:"name",email:"emails",phone:"phones",address:"addresses"},h=function(a){if(c.isOpen("contactFormActivity"))return{subject:a.subject,content:{message:a.message,media:[]},additionalFields:[]};var b={fields:[]};return Object.keys(a).forEach(function(c){b.fields.push({name:c,value:a[c]})}),b},i=function(b){var c=a.map(b,function(a,b){return g[b]},this),d=a.pick(f,c);return k(d,b),j(d,b),a.forEach(b,function(b,c){var e=d[g[c]];a.isArray(e)&&(a.first(e)[c]=b)},this),d},j=function(a,b){b.phone||(b.phone=""),b.phone=b.phone.substring(0,d)},k=function(a,b){b.name||(b.name="");var c=b.name.split(" ");a.name&&(a.name.first=c[0],a.name.last=c[1])},l=function(a,c,d){b.call(this,a,c,d)};return l.prototype=new b,l.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"component-name":"ContactForm"};return e=a.assign(d,e)},l.prototype.getPayload=function(d){var f=b.prototype.getPayload.call(this,d),g={contactUpdate:i(this._fields),activityInfo:h(this._fields),activityDetails:e(this._fields),activityType:c.isOpen("contactFormActivity")?"form/contact-form":"contact/contact-form"};return g=a.assign(f,g)},l}),define("core/activities/subscribeFormActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(b){var c={fields:[]};return Object.keys(b).forEach(function(a){c.fields.push({name:a,value:b[a]})}),c.email=b.email,(b.first||b.last)&&(c.name=a.pick({first:b.first,last:b.last},a.identity)),b.phone&&(c.phone=b.phone),c},d=function(a){return{name:{first:a.first||"",last:a.last||""},emails:[{tag:"main",email:a.email||""}],phones:a.phone?[{tag:"main",phone:a.phone||""}]:[],emailSubscriptionPolicy:"RECURRING"}},e=function(a,c,d){b.call(this,a,c,d)};return e.prototype=new b,e.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"component-name":"subscribeForm"};return e=a.assign(d,e)},e.prototype.getPayload=function(e){var f=b.prototype.getPayload.call(this,e),g={contactUpdate:d(this._fields),activityInfo:c(this._fields),activityType:"contact/subscription-form"};return g=a.assign(f,g)},e}),define("core/activities/activityTypes",["core/activities/tpaActivity","core/activities/contactFormActivity","core/activities/subscribeFormActivity"],function(a,b,c){"use strict";return{TPAActivity:a,ContactFormActivity:b,SubscribeFormActivity:c}}),define("core/activities/activityService",["utils"],function(a){"use strict";function f(a,f,g){var h="?"+b.toQueryString(a.getParams()),i=a.getHost()?"http://"+a.getHost():e;i+=d+h,c.ajax({type:"POST",url:i,data:a.getPayload(),dataType:"json",contentType:"application/json",success:f,error:g})}var b=a.urlUtils,c=a.ajaxLibrary,d="/_api/app-integration-bus-web/v1/activities",e="http://wix.com";return{reportActivity:f}}),define("core/components/transitionGroup",["lodash","react"],function(a,b){"use strict";function c(a){var c={},d=0;return b.Children.forEach(a,function(a){c[a.key||""+d++]=a}),c}var d=b.createClass({displayName:"ReactTransitionGroup",propTypes:{component:b.PropTypes.any,childFactory:b.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:a.identity}},getInitialState:function(){return{children:c(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var a=this.state.children;for(var b in a)a[b]&&this.performAppear(b)},componentWillReceiveProps:function(b){var d=c(b.children),e=this.state.children;this.setState({children:a.assign({},e,d)});var f;for(f in d)!d[f]||e&&e.hasOwnProperty(f)||this.currentlyTransitioningKeys[f]||this.keysToEnter.push(f);for(f in e)!e[f]||d&&d.hasOwnProperty(f)||this.currentlyTransitioningKeys[f]||this.keysToLeave.push(f)},componentDidUpdate:function(){var a=this.keysToEnter;this.keysToEnter=[],a.forEach(this.performEnter);var b=this.keysToLeave;this.keysToLeave=[],b.forEach(this.performLeave)},performAppear:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillAppear?b.componentWillAppear(this._handleDoneAppearing.bind(this,a)):this._handleDoneAppearing(a)},_handleDoneAppearing:function(a){var b=this.refs[a];b.componentDidAppear&&b.componentDidAppear(),delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);d&&d.hasOwnProperty(a)||this.performLeave(a)},performEnter:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillEnter?b.componentWillEnter(this._handleDoneEntering.bind(this,a)):this._handleDoneEntering(a)},_handleDoneEntering:function(a){var b=this.refs[a];b.componentDidEnter&&b.componentDidEnter(),delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);d&&d.hasOwnProperty(a)||this.performLeave(a)},performLeave:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillLeave?b.componentWillLeave(this._handleDoneLeaving.bind(this,a)):this._handleDoneLeaving(a)},_handleDoneLeaving:function(b){var d=this.refs[b];d.componentDidLeave&&d.componentDidLeave(),delete this.currentlyTransitioningKeys[b];var e=c(this.props.children);e&&e.hasOwnProperty(b)?this.performEnter(b):this.setState(function(c){var d=a.assign({},c.children);return delete d[b],{children:d}})},render:function(){var a=[];for(var c in this.state.children)if(this.state.children[c]){var d=this.state.children[c];a.push(b.cloneElement(this.props.childFactory(d),{ref:c,key:c}))}return b.createElement(this.props.component,this.props,a)}});return d}),define("core/components/wixTransitionItem",["lodash","react","core/components/animatableMixin"],function(a,b,c){"use strict";var d=b.createClass({displayName:"wixTransitionItem",mixins:[c],render:function(){return this.props.children},componentWillEnter:function(a){this.props.onWillEnter(this.props.refInParent,a)},componentWillLeave:function(a){this.props.onWillLeave(this.props.refInParent,a)}});return d}),define("core/components/wixTransitionGroup",["lodash","react","reactDOM","zepto","core/components/transitionGroup","core/components/wixTransitionItem","core/components/animationsMixin"],function(a,b,c,d,e,f,g){"use strict";function h(b,e){a(b).map(c.findDOMNode).map(d).forEach(function(a){a.attr("data-leaving",e?!0:null)}).commit()}e=b.createFactory(e);var i=b.createClass({displayName:"wixTransitionGroup",mixins:[g],getDefaultProps:function(){return{transition:"CrossFade",transitionDuration:2,reverse:!1,transitionCallback:a.noop}},getInitialState:function(){return this.leavingChildren={},this.enteringChildren={},{}},render:function(){return e(a.assign({childFactory:this.childWrapper,component:"div",ref:"group"},a.omit(this.props,"transition")))},childWrapper:function(a){return b.createElement(f,{onWillEnter:this.onWillEnter,onWillLeave:this.onWillLeave,refInParent:a.props.refInParent,ref:a.props.refInParent,key:a.props.refInParent},a)},getInnerRefs:function(b){return a.map(b,function(a){return this.refs.group.refs[a]},this)},flush:function(){if(!a.isEmpty(this.enteringChildren)&&a.size(this.leavingChildren)===a.size(this.enteringChildren)){var b=this.getInnerRefs(a.keys(this.leavingChildren)),c=this.getInnerRefs(a.keys(this.enteringChildren));h(b,!0),h(c,!1);var d=a.values(this.enteringChildren).concat(a.values(this.leavingChildren));this.leavingChildren={},this.enteringChildren={};var e=a.isFunction(this.props.getTransitionParams)?this.props.getTransitionParams():{};this.transition(b,c,this.props.transition,this.props.transitionDuration,0,a.assign({reverse:this.props.reverse},e),{onComplete:function(){this.props.transitionCallback(),a.forEach(d,function(a){a()})}.bind(this)})}},onWillEnter:function(a,b){this.enteringChildren[a]=b,this.flush()},onWillLeave:function(a,b){this.leavingChildren[a]=b,this.flush()}});return i}),define("core/components/behaviorHandlers/behaviorHandlersFactory",["lodash","utils"],function(a,b){"use strict";function e(e){return a.has(c,e)?c[e]:(b.log.warn("there is no behavior handler for type "+e),d)}function f(a,b){c[a]=b}var c={},d={handle:a.noop};return{getHandler:e,registerHandler:f}}),define("core/components/socialCompMixin",[],function(){"use strict";return{getSocialUrl:function(a){var b=this.props.compData?this.props.compData.urlFormat:this.props.siteData.getUrlFormat();return a?this.props.siteData.getMainPageUrl(b):this.props.siteData.getCurrentUrl(b,void 0,b!==this.props.siteData.getUrlFormat())}}}),define("core/core/data/pointers/jsonItemsFinders",["utils"],function(a){"use strict";function b(b,c){return c===a.constants.VIEW_MODES.MOBILE?b.mobileComponents?"mobileComponents":"components":b.children?"children":"components"}function c(a,b){return b.id===a||"masterPage"===a&&b.children}function d(a,e,f,g){if(c(e,a))return g;var h=b(a,f),i=a[h];if(!i)return null;for(var j=null,k=0;k<i.length&&!j;k++){var l=i[k];j=d(l,e,f,g.concat([h,k]))}return j}return{getChildrenPropertyName:b,getComponentPath:function(a,b,c){return d(a,b,c,[])},getDataPath:function(){},isComponentWithId:c}}),define("core/core/data/pointers/componentPointers",["lodash","utils","core/core/data/pointers/pointerGeneratorsRegistry","core/core/data/pointers/jsonItemsFinders"],function(a,b,c,d){"use strict";function g(a){return["pagesData",a,"structure"]}function h(b){return a.isArray(b)&&"pagesData"===b[b.length-3]}function i(a,b,c){var e=a(g(c));if(e){var f=d.getComponentPath(e,b.id,b.type);return f&&(f=g(c).concat(f)),f}}function j(b,c,d){var e;if(a.forEach(b,function(a){e=e||i(c,d,a)}),!e){var f=a.indexBy(b);a.forOwn(c(["pagesData"]),function(a,b){return f[b]?!0:(e=i(c,d,b),e?!1:void 0)})}return e}var e=b.constants,f="masterPage";c.registerPointerType(e.VIEW_MODES.DESKTOP,j,d.isComponentWithId,!0,!0),c.registerPointerType(e.VIEW_MODES.MOBILE,j,d.isComponentWithId,!0,!0);var k={getMobilePointer:function(b,c,d){return a.assign(a.clone(d),{type:e.VIEW_MODES.MOBILE})},isMobile:function(a,b,c){return c.type===e.VIEW_MODES.MOBILE},isPage:function(a,b,c){var d=b.getPath(c);return h(d)},isPagesContainer:function(a,b,c){return c.id===e.COMP_IDS.PAGES_CONTAINER},isMasterPage:function(a,b,c){var d=b.getPath(c);if(!d)return!1;var e=d[1];return e===f&&this.isPage(a,b,c)},isInMasterPage:function(a,b,c){var d=b.getPath(c),e=d[1];return e===f},getViewMode:function(a,b,c){return this.isMobile(a,b,c)?e.VIEW_MODES.MOBILE:e.VIEW_MODES.DESKTOP},getChildrenContainer:function(b,c,e){var f=c.getPath(e),g=b(f),h=d.getChildrenPropertyName(g,e.type),i=a.clone(e);return i.innerPath=[h],i},getChildren:function(b,c,e){var f=c.getPath(e),g=b(f),h=d.getChildrenPropertyName(g,e.type),i=g[h];return a.map(i,function(a,b){return c.getPointer(a.id,e.type,f.concat([h,b]))})},getChildrenRecursively:function(a,b,c){for(var d=this.getChildren(a,b,c),e=0;e<d.length;)d.push.apply(d,this.getChildren(a,b,d[e])),e++;return d},getChildrenRecursivelyRightLeftRootIncludingRoot:function(a,b,c){for(var d=[c],e=[];d.length;){var f=d.shift();e.unshift(f);var g=this.getChildren(a,b,f);d=g.concat(d)}return e},getParent:function(b,c,d){var e=c.getPath(d);if(!e||h(e))return null;var f=a.dropRight(e,2),g=b(f);return g&&c.getPointer(g.id,d.type,f)},getSiblings:function(b,c,d){var e=this.getParent(b,c,d);if(!e)return[];var f=this.getChildren(b,c,e);return a.remove(f,{id:d.id}),f},getComponent:function(a,b,c,e){var f=e.type,g=b.getPointer(c,f);if(!g){var h=b.getPath(e),i=a(h),j=d.getComponentPath(i,c,f);j&&(g=b.getPointer(c,f,h.concat(j)))}return g},getMasterPage:function(a,b,c){return this.getPage(a,b,f,c)},getPage:function(a,b,c,d){var e=d,f=b.getPointer(c,e);if(!f){var h=g(c),i=a(h);if(!i)return null;f=b.getPointer(c,e,h)}return f},getNewPage:function(a,b,c,d){var f=d||e.VIEW_MODES.DESKTOP,h=g(c),i=a(h);if(i)throw new Error("there is already a page with id "+c);return b.getPointer(c,f,h)},getPagesContainer:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,e.COMP_IDS.PAGES_CONTAINER,d)},getFooter:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,e.COMP_IDS.FOOTER,d)},getHeader:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,e.COMP_IDS.HEADER,d)},getUnattached:function(a,b,c,d){return b.getPointer(c,d,[])},getPageOfComponent:function(a,b,c){var d=b.getPath(c);if(!d)return null;var e=d[1];return this.getPage(a,b,e,c.type)},isDescendant:function(b,c,d,e){var f=c.getPath(d),g=c.getPath(e);if(f&&g){var h=g.length,i=f.length;return i>h&&a.isEqual(f.slice(0,h),g)}return!1}};c.registerDataAccessPointersGenerator("components",k,!0)}),define("core/core/data/pointers/componentStructurePointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";var c={getModes:function(b,c,d){var e=a.clone(d);return e.innerPath=d.innerPath?a.clone(d.innerPath):[],e.innerPath.push("modes"),e},getModesDefinitions:function(b,c,d){var e=a.clone(d);return e.innerPath=e.innerPath||[],e.innerPath=e.innerPath.concat(["modes","definitions"]),e},getModesOverrides:function(b,c,d){var e=a.clone(d);return e.innerPath=e.innerPath||[],e.innerPath=e.innerPath.concat(["modes","overrides"]),e}};b.registerDataAccessPointersGenerator("componentStructure",c)}),define("core/core/data/pointers/dataPointers",["lodash","utils","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b,c){"use strict";function g(){return!0}function h(b,c,d,e){var f=i(b),g=d(["pagesData"]);return a.reduce(g,function(a,c,g){var h=j(b,g,f).concat(e.id);return!a&&d(h)?h:a},null)}function i(a){switch(a){case f.data:return"document_data";case f.design:return"design_data";case f.prop:return"component_properties";case f.theme:return"theme_data";case f.behaviors:return"behaviors_data";case f.connections:return"connections_data";default:throw new Error("there is no such data type "+a)}}function j(a,b,c){return["pagesData",b,"data",c||i(a)]}var d=b.constants,e="masterPage",f=d.DATA_TYPES;c.registerPointerType(f.data,h.bind(null,f.data),g,!1,!0),c.registerPointerType(f.prop,h.bind(null,f.prop),g,!1,!0),c.registerPointerType(f.design,h.bind(null,f.prop),g,!1,!0),c.registerPointerType(f.theme,h.bind(null,f.theme),g,!1,!0),c.registerPointerType(f.behaviors,h.bind(null,f.behaviors),g,!1,!0),c.registerPointerType(f.connections,h.bind(null,f.connections),g,!1,!0);var k={getDataItem:function(a,b,c,d){return this.getItem(a,b,f.data,c,d)},getDataItemWithPredicate:function(b,c,d,e){return a.first(this.getDataItemsWithPredicate(b,c,d,e))},getDataItemsWithPredicate:function(b,c,d,e){var g=e||"masterPage",h=j(f.data,g),i=b(h);return a.map(a.filter(i,d),function(a){return this.getDataItem(b,c,a.id,g)},this)},getDesignItem:function(a,b,c,d){return this.getItem(a,b,f.design,c,d)},getPropertyItem:function(a,b,c,d){return this.getItem(a,b,f.prop,c,d)},getBehaviorsItem:function(a,b,c,d){return this.getItem(a,b,f.behaviors,c,d)},getConnectionsItem:function(a,b,c,d){return this.getItem(a,b,f.connections,c,d)},getThemeItem:function(a,b,c){return this.getItem(a,b,f.theme,c,e)},getItem:function(a,b,c,d,e){var f=j(c,e);return f.push(d),b.getPointer(d,c,f)},getDataItemFromMaster:function(a,b,c){return this.getDataItem(a,b,c,e)},getPageIdOfData:function(a,b,c){var d=b.getPath(c);return d[1]}};c.registerDataAccessPointersGenerator("data",k)}),define("core/core/data/pointers/generalPointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry","experiment"],function(a,b,c){"use strict";var d="general";b.registerPointerType(d,a.constant(null),a.constant(!0)),b.registerPointerType("metadata",a.constant(null),a.constant(!0));var e={getAllTheme:{id:"theme",path:["pagesData","masterPage","data","theme_data"]},getOrphanPermanentDataNodes:{id:"orphanPermanentDataNodes",path:["orphanPermanentDataNodes"]},getTextRuntimeFontSize:{id:"averageFontSize",path:["textRuntimeLayout","averageFontSize"]},getTextRuntimeOverallBorders:{id:"overallBorders",path:["textRuntimeLayout","overallBorders"]},getDockedRuntimeLayout:{id:"dockedRuntimeLayout",
path:["dockedRuntimeLayout"]},getPagesData:{id:"pagesData",path:["pagesData"]},getServiceTopology:{id:"serviceTopology",path:["serviceTopology"]},getDeletedMobileComps:{id:"mobileDeletedCompsMap",path:["mobileDeletedCompsMap"]},getDeletedPagesMapPointer:{id:"deletedPagesMap",path:["deletedPagesMap"]},getUserId:{id:"userId",path:["rendererModel","userId"]},getIsStudioUser:{id:"isStudioUser",path:["documentServicesModel","userInfo","isStudio"]},getEditorData:{id:"editorData",path:["editorData"]},getMobileStructuresPointer:{id:"mobileStructures",path:["mobileStructures"]},getCompsToUpdateAnchors:{id:"compsToUpdateAnchors",path:["compsToUpdateAnchors"]},getRuntimePointer:{id:"runtime",path:["runtime"]},getNeverSaved:{id:"neverSaved",path:["documentServicesModel","neverSaved"]},getPublicUrl:{id:"publicUrl",path:["documentServicesModel","publicUrl"]},getForbiddenPageUriSEOs:{id:"forbiddenPageUriSEOs",path:["urlFormatModel","forbiddenPageUriSEOs"]},getUrlFormat:{id:"urlFormat",path:["urlFormatModel","format"]},getClientSpecMap:{id:"clientSpecMap",path:["rendererModel","clientSpecMap"]},getAutosaveInfo:{id:"autoSaveInfo",path:["documentServicesModel","autoSaveInfo"]},getMetaSiteId:{id:"metaSiteId",path:["rendererModel","metaSiteId"]},getDocumentType:{id:"documentType",path:["rendererModel","siteInfo","documentType"]},getActiveModes:{id:"activeModes",path:["activeModes"]},getContactFormsMetaData:{id:"contactformsMetaData",path:["contactforms_metadata"]}},f={getTextRuntimeHeight:function(a,b,c){return b.getPointer("textHeight",d,["textRuntimeLayout","compHeight",c])},getRenderFlag:function(a,b,c){return b.getPointer("renderFlags"+c,d,["renderFlags",c])},getRenderRealtimeConfigItem:function(a,b,c){return b.getPointer("renderRealtimeConfig"+c,d,["renderRealtimeConfig",c])}},g=a(e).mapValues(function(a){return function(b,c){return c.getPointer(a.id,d,a.path)}}).assign(f).value();c.isOpen("packText")&&delete g.getTextRuntimeHeight,b.registerDataAccessPointersGenerator(d,g)}),define("core/core/data/pointers/pagePointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";var c="page";b.registerPointerType(c,function(){return null},function(){return!0},!1,!0);var d={isPointerPageType:function(a,b,d){return d&&d.type===c},getNewPagePointer:function(a,b,d){var e=["pagesData",d];return b.getPointer(d,c,e)},getPagePointer:function(b,d,e){var f=["pagesData",e],g=b(f);return a.isUndefined(g)?null:d.getPointer(e,c,f)},isExists:function(b,c,d){var e=["pagesData",d],f=b(e);return!a.isUndefined(f)},getAllPagesPointer:function(a,b){return b.getPointer("all",c,["pagesData"])},getNonDeletedPagesPointers:function(b,d,e){e=a.isUndefined(e)?!1:e;var f=["pagesData"],g=b(f);return g=a.pick(g,function(a,b){return a?!(!e&&"masterPage"===b):!1}),a.map(g,function(a,b){return d.getPointer(b,c,f.concat(b))})},getPageData:function(a,b,d){var e=["pagesData",d,"data","document_data"],f=a(e);return f?b.getPointer(d+"_data",c,e):null},getPageProperties:function(a,b,d){var e=["pagesData",d,"data","component_properties"],f=a(e);return f?b.getPointer(d+"_prop",c,e):null}};b.registerDataAccessPointersGenerator(c,d)}),define("core/core/data/pointers/pointers",["core/core/data/pointers/pointerGeneratorsRegistry","core/core/data/pointers/pointersCache","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/componentPointers","core/core/data/pointers/componentStructurePointers","core/core/data/pointers/dataPointers","core/core/data/pointers/generalPointers","core/core/data/pointers/pagePointers"],function(a,b,c){"use strict";return{pointerGeneratorsRegistry:a,PointersCache:b,DataAccessPointers:c}}),define("core/components/fullScreenOverlay/fullScreenOverlay",["lodash","react"],function(a,b){"use strict";return b.createClass({displayName:"fullScreenOverlay",propTypes:{siteWidth:b.PropTypes.number.isRequired,siteAPI:b.PropTypes.object.isRequired,isMobileDevice:b.PropTypes.bool.isRequired,overlayBackground:b.PropTypes.string},getOverlayBackground:function(){return this.props.overlayBackground||"#000"},componentDidMount:function(){this.props.siteAPI.getSiteAspect("siteScrollingBlocker").setSiteScrollingBlocked(this,!0),this.props.isMobileDevice&&this.props.siteAPI.forceBackground(this.getOverlayBackground())},componentWillUnmount:function(){this.props.siteAPI.getSiteAspect("siteScrollingBlocker").setSiteScrollingBlocked(this,!1),this.props.isMobileDevice&&this.props.siteAPI.disableForcedBackground()},render:function(){return b.createElement("div",null,b.createElement("div",{className:"fullScreenOverlay",key:"fullScreenOverlay"},b.createElement("div",{className:"fullScreenOverlayContent",style:{width:this.props.siteWidth,background:this.getOverlayBackground()},key:"fullScreenOverlayContent"},this.props.children)))}})}),define("core/components/fullScreenOverlay/fullScreenOverlayMixin",["lodash","react","core/components/fullScreenOverlay/fullScreenOverlay"],function(a,b,c){"use strict";return{createOverlay:function(d,e){var f=b.createFactory(c),g=this.props.siteData.getSiteWidth(),h=this.props.siteData.isMobileDevice(),i=a.assign({},e,{siteWidth:g,siteAPI:this.props.siteAPI,isMobileDevice:h});return d[""]=a.assign({},d[""],{wrap:[f,i]}),d}}}),define("core/components/compStateMixin",["lodash","utils","react","core/components/propsSelectors/SantaTypes","experiment"],function(a,b,c,d,e){"use strict";function f(){if(this.props.useSantaTypes)return void this.props.setCompState(this.props.id,this.state);var a=this.props.id||this.props.structure.id,b=this.props.siteAPI.getRuntimeDal();b.setCompState(a,this.getPublicState())}return{propTypes:e.isOpen("santaTypes")?{setCompState:d.DAL.setCompState,id:d.Component.id}:{siteAPI:c.PropTypes.object.isRequired,id:c.PropTypes.string,structure:c.PropTypes.object},getPublicState:function(){var c={},d=a.get(this.constructor,"publicState");return a.isArray(d)?a.forEach(d,function(b){a.has(this.state,b)&&(c[b]=this.state[b])},this):(b.log.warn("Component should implement publicState when using compStateMixin"),c=this.state),c},componentWillUnmount:function(){var a=this.props.id||this.props.structure.id,b=this.props.siteAPI.getRuntimeDal();b.removeCompState(a)},componentDidMount:function(){f.call(this)},componentDidUpdate:function(){f.call(this)}}}),define("core/components/siteAspects/BehaviorsAspect",["lodash","core/components/behaviorHandlers/behaviorHandlersFactory","experiment"],function(a,b,c){"use strict";function f(c){var e=b.getHandler(c.type);return e.getUniqueIdentifier?e.getUniqueIdentifier(c):a.at(c,d).join(",")}function g(b){return a.at(b,e).join(",")}function h(a){return a.type+":"+a.sourceId}function i(b,c,d,e){var f=a(b).map(d).indexBy(e).value(),g=a.keys(f),h=a.keys(c),i=a.intersection(g,h),j=a.difference(g,i),k=a.difference(h,i);return{map:f,added:j,removed:k}}function j(c,d){var e=i(c,this._registeredBehaviors[d]||{},"behavior",f);this._behaviorsAdded[d]=e.added.concat(this._behaviorsAdded[d]||[]),this._behaviorsRemoved[d]=e.removed.concat(this._behaviorsRemoved[d]||[]),a(this._registeredBehaviors[d]).pick(e.removed).forEach(function(c){var d=b.getHandler(c.type);a.has(d,"cancelPreCondition")&&d.cancelPreCondition(c,this._aspectSiteAPI)},this).commit(),this._registeredBehaviors[d]=e.map;var h=i(c,this._registeredActions[d]||{},"action",g);this._actionsRemoved[d]=this._actionsRemoved[d]||{},a.assign(this._actionsRemoved[d],a.pick(this._registeredActions[d],h.removed)),this._registeredActions[d]=h.map,this._actionsAdded[d]=h.added.concat(this._actionsAdded[d]||[]),this._actionsToBehaviorsMap[d]=a(c).groupBy(function(a){return g(a.action)}).mapValues(function(b){return a(b).map("behavior").map(f).value()}).value(),this._behaviorsToActionsMap[d]=a(c).groupBy(function(a){return f(a.behavior)}).mapValues(function(b){return a(b).map("action").map(g).value()}).value()}function k(b,c,d){var e=a(b).pick(c).map(function(b,c){return d===!0?b:a.pick(b,d[c])}).values().value();return a.assign.apply(a,[{}].concat(e))}function l(a){var b=this._aspectSiteAPI.getSiteAspect("actionsAspect");return b.needToRunPreConditions(a)}function m(b){this._aspectSiteAPI=b,this._registeredActions={},this._registeredBehaviors={},this._ranOnce={},this._rawBehaviorsForActions={},this._behaviorsAdded={},this._behaviorsRemoved={},this._actionsAdded={},this._actionsRemoved={},this._actionsToBehaviorsMap={},this._behaviorsToActionsMap={},this._behaviorsWaitingToFlush={},this._registeredActionsByTypeSource={},a.bindAll(this),this._aspectSiteAPI.registerToDidLayout(this._handleDidLayout),this._aspectSiteAPI.registerToAddedRenderedRootsDidLayout(this._handleRootsAddedDidLayout),this._aspectSiteAPI.registerToRenderedRootsChange(this._handleRootsChanged)}var d=["type","name","targetId"],e=["type","sourceId","name"];return m.prototype={handleActions:function(c,d){a.forEach(this._actionsToBehaviorsMap,function(e,h){a(e).pick(a.map(c,g)).values().flatten().map(a.get.bind(a,this._registeredBehaviors[h])).groupBy("type").forEach(function(e,g){e=a.filter(e,function(a){var b=f(a);return a.playOnce&&this._ranOnce[b]?!1:(this._ranOnce[b]=!0,!0)},this),d=a.defaults({},d,{name:"action"});var h=b.getHandler(g);a.has(h,"handleMulti")?h.handleMulti(e,this._aspectSiteAPI.getSiteAPI(),d):a.forEach(e,function(a){c=c||[{name:"action"}],d.name=c[0].name,h.handle(a,this._aspectSiteAPI.getSiteAPI(),d)},this)},this).commit()},this)},handleAction:function(a,b){this.handleActions([a],b)},setBehaviorsForActions:function(d,e){var f=this,g=this._aspectSiteAPI.getSiteAspect("actionsAspect");d=a(d).reject(function(a){return g.isActionDisabled(a.action.name)}).filter(function(c){var d=b.getHandler(a.get(c,"behavior.type","animation"));return a.isUndefined(d.isEnabled)||d.isEnabled(c.behavior,f._aspectSiteAPI.getSiteAPI())}).map(function(b){return a.defaultsDeep(b,{behavior:{type:"animation",pageId:e},action:{pageId:e}})}).value(),this._registeredActionsByTypeSource[e]=a(d).map("action").groupBy(h).value(),c.isOpen("sv_boxSlideShow")?this._rawBehaviorsForActions[e]=d:j.call(this,d,e)},getActions:function(b,c){return a(this._registeredActionsByTypeSource).map(b+":"+c).flatten().compact().uniq().mapKeys(function(a){return a.name}).value()},_handleDidLayout:function(){var d=this._aspectSiteAPI.getAllRenderedRootIds();c.isOpen("sv_boxSlideShow")&&a.forEach(d,function(b){var c=this._rawBehaviorsForActions[b],d=this._aspectSiteAPI.getSiteData().measureMap.top;c=a.filter(c,function(b){var c=b.action.sourceId,e=b.action.type,f=b.behavior.type,g=b.behavior.targetId,h="comp"!==e||a.isNumber(d[c]),i="widget"===f||"site"===f||a.isNumber(d[g]);return h&&i},this),j.call(this,c,b)},this);var e=k(this._registeredActions,d,this._actionsAdded),f=a(this._actionsRemoved).pick(d).values().reduce(a.assign,{}),g=a(this._registeredActions).pick(d).values().reduce(a.assign,{}),h=k(this._registeredBehaviors,d,this._behaviorsAdded);a.forEach(h,function(c,e){var f=a(this._behaviorsToActionsMap).pick(d).values().map(e).compact().flatten().map(a.get.bind(a,g)).every(l,this);if((!c.playOnce||!this._ranOnce[e])&&f){var h=b.getHandler(c.type);a.has(h,"handlePreCondition")&&h.handlePreCondition(c,this._aspectSiteAPI)}},this),a.forEach(d,function(a){this._actionsAdded[a]=[],this._actionsRemoved[a]={},this._behaviorsAdded[a]=[],this._behaviorsRemoved[a]=[]},this),a.isEmpty(f)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(f),a.isEmpty(e)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsAddedLayouted(e)},_handleRootsChanged:function(b,c){var d=k(this._registeredActions,c,!0);a.forEach(c,function(a){this._rawBehaviorsForActions[a]=[],this._registeredActions[a]={},this._registeredBehaviors[a]={},this._behaviorsAdded[a]=[],this._behaviorsRemoved[a]=[],this._actionsAdded[a]=[],this._actionsRemoved[a]={},this._actionsToBehaviorsMap[a]={},this._behaviorsToActionsMap[a]={},this._registeredActionsByTypeSource[a]={}},this),this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(d)},_handleRootsAddedDidLayout:function(){},resetBehaviorsRegistration:function(){this._ranOnce={}},registerBehavior:function(b,c){var d=a.get(this._behaviorsWaitingToFlush,b.targetId,[]);a.set(this._behaviorsWaitingToFlush,[b.targetId,d.length],{name:b.name,params:b.params,callback:c})},extractBehaviors:function(a){var b=this._behaviorsWaitingToFlush[a]||[];return delete this._behaviorsWaitingToFlush[a],b},handleBehavior:function(a,c){var d=this._aspectSiteAPI.getSiteAPI(),e={};c&&(e.callback=c),b.getHandler(a.type).handle(a,d,e)}},m}),define("core/components/siteAspects/animationsAspect",["lodash","reactDOM","animations"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._liveSequenceIdsByGroup={}}function e(a){var b=a.targetId||a.sourceId;return this._aspectSiteAPI.getRootOfComponentId(b)||a.pageId}function f(d,f){a.forEach(d,function(a){var d=c.getProperties(a.name);if(d&&d.hideOnStart){var g=e.call(this,a),h=this._aspectSiteAPI.getPageById(g);if(h){var i=b.findDOMNode(h.refs[a.targetId||a.sourceId]);i&&(i.style.visibility=f)}}},this)}return d.prototype.previewAnimation=function(a,b,c,d){var e,f,g;return e=this._aspectSiteAPI.getPageById(b),e?(f=e.sequence(),g={props:"clip,opacity,transform,transform-origin",immediateRender:!1},f.add(a,c.name,c.duration,c.delay,c.params),f.add(a,"BaseClear",0,0,g),d&&f.onCompleteAll(d),f.execute()):void 0},d.prototype.addAnimationToSequence=function(b,c,d){var f,g,h,i,j=e.call(this,b),k=c[j];return k.add(b.targetId,b.name,b.params.duration,b.params.delay,b.params,0),d&&(i=this._aspectSiteAPI.getPageById(j),h=i.refs[b.targetId].props.structure,g=a.get(h,"layout.rotationInDegrees"),f="clip,opacity"+(g?"":",transform"),k.add(b.targetId,"BaseClear",0,0,{props:f,immediateRender:!1})),b.targetId},d.prototype.playAnimations=function(b,c,d,f){var g={},h={},i=[];a.forEach(c,function(b){var c=e.call(this,b),f=this._aspectSiteAPI.getPageById(c),i=b.targetId||b.sourceId;a.get(f,["refs",i])&&(h[c]||(h[c]=f.sequence(),g[c]=[]),this.addAnimationToSequence(b,h,d),g[c].push(i))},this);var j=1,k=function(c){j--,this._liveSequenceIdsByGroup[b]=a.reject(this._liveSequenceIdsByGroup[b],{sequenceId:c}),0===j&&f()}.bind(this);return a.forEach(h,function(b,c){b.hasAnimations()&&(j++,b.onCompleteAll(k.bind(this,b.getId())),g[c]=a.compact(g[c]),i.push({parentId:c,sequenceId:b.getId()}),b.execute())},this),k(),this._liveSequenceIdsByGroup[b]=this._liveSequenceIdsByGroup[b].concat(i),g},d.prototype.hideElementsByAnimationType=function(a){f.call(this,a,"hidden")},d.prototype.revertHideElementsByAnimations=function(a){f.call(this,a,"")},d.prototype.previewTransition=function(a,b,c,d,e){var f;if(f="masterPage"===c?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var g=f.sequence(),h={props:"clip,opacity,transform,transform-origin",immediateRender:!1};return g.add({sourceRefs:a,destRefs:b},d.name,d.duration,d.delay,d.params),g.add(a.concat(b),"BaseClear",0,0,h),e&&g.onCompleteAll(e),g.execute()}},d.prototype.stopPreviewAnimation=function(b){var c=this._aspectSiteAPI.getAllRenderedRoots();a.forEach(c,function(a){a.stopSequence(b,1)})},d.prototype.stopAndClearAllAnimations=function(){a(this._liveSequenceIdsByGroup).keys().forEach(this.stopAndClearAnimations,this).commit()},d.prototype.stopAndClearAnimations=function(b){a.forEach(this._liveSequenceIdsByGroup[b],function(a){var b=this._aspectSiteAPI.getPageById(a.parentId);b&&b.stopSequence(a.sequenceId,1)},this),this._liveSequenceIdsByGroup[b]=[]},d}),define("core/components/siteAspects/loginToWixAspect",["react","lodash","utils","core/core/siteAspectsRegistry","core/bi/events"],function(a,b,c,d,e){"use strict";function i(a,d){d=b.assign(d||{},{renderMode:"iframe"});var e=c.urlUtils.toQueryString(d);return"//"+a.currentUrl.host+"/signin?"+e}function j(a,b){if(!a)return null;for(var c=window.pageYOffset+a.getBoundingClientRect().top,d=h.getActiveAnchor(b,c),e=a;e&&!e.id;)e=e.parentNode;return{activeFold:d.index,totalFolds:d.total,text:a.textContent||e.alt||"",componentId:e?e.id:void 0}}function k(){if(!this.iframeFactory){var b=this.queryParams,c=a.createClass({displayName:"LoginToWixIframe",render:function(){return a.DOM.iframe({src:i(this.props.siteData,b),ref:"iframe",style:{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"block",zIndex:1e4}})}});this.iframeFactory=a.createFactory(c)}return this.iframeFactory}function l(){var a=this.aspectSiteApi.getSiteAPI().getSiteData(),b=k.call(this);return b({siteData:a,displayForm:this.isLoginToWixShown})}function m(){return b.isUndefined(this.isWixSite)&&(this.isWixSite=this.aspectSiteApi.getSiteAPI().getSiteData().isWixSite()),this.isWixSite}function n(a){this.aspectSiteApi=a,this.isLoginToWixShown=!1,this.registeredToMessage=!1,this.iframeFactory=null}var f={postLogin:"http://www.wix.com/my-account",postSignUp:"http://www.wix.com/new/account"},g=c.wixUserApi,h=c.scrollAnchors;return n.prototype={getReactComponents:function(){return this.isLoginToWixShown&&m.call(this)?[l.call(this)]:null},isLoggedInToWix:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();return g.isSessionValid(a)},logout:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();g.logout(a),this.aspectSiteApi.forceUpdate()},openLoginToWixForm:function(a,d,g){if(!this.isLoginToWixShown){this.isWixSite=!0,this.registeredToMessage||(this.aspectSiteApi.registerToMessage(this.handlePostMessage.bind(this)),this.registeredToMessage=!0);var h=c.urlUtils.parseUrl(a).query;this.queryParams=d?h:null,this.postLoginUrl=h.postLogin||f.postLogin,this.postSignupUrl=h.postSignUp||f.postSignUp;var i=a.indexOf("?"),k={targetUrl:-1!==i?a.substring(0,i):a},l=this.aspectSiteApi.getSiteAPI().getSiteData();b.assign(k,b.pick(h,["postLogin","postSignUp","loginCompName"]),j(g,l)),this.aspectSiteApi.reportBI(e.LP_BUTTON_CLICK,k),this.isLoginToWixShown=!0,this.aspectSiteApi.scrollSiteTo(0,0),this.aspectSiteApi.forceUpdate()}},handlePostMessage:function(a){a=a.data?a:a.originalEvent;var b=this.aspectSiteApi;switch(a.data){case"onLoad":break;case"onPostLogin":window.location.href=this.postLoginUrl;break;case"onPostSignUp":window.location.href=this.postSignupUrl;break;case"onClose":this.isLoginToWixShown=!1,setTimeout(function(){b.forceUpdate()},1e3)}}},d.registerSiteAspect("LoginToWix",n),n}),define("core/components/siteAspects/parentFrameAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(){var a=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap,c=b.get(a,"height.SITE_STRUCTURE",0);if(c&&c!==this.storedHeight){this.storedHeight=c;var d;window.parent.postMessage?d=window.parent:window.parent.document.postMessage&&(d=window.parent.document),d&&"undefined"!=typeof d&&d.postMessage(c,"*")}}function d(a){this.aspectSiteApi=a,this.storedHeight=0,a.registerToDidLayout(c.bind(this))}return a.registerSiteAspect("parentFrame",d),d}),define("core/components/siteAspects/vkPostMessageAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var b;try{b=JSON.parse(a.data)}catch(c){return}d.call(this,b.id,b)}function d(a,c){b.forEach(this._registeredCompIds,function(b){if(a===b){var d=this._siteAPI.getComponentById(b);if(!d)return void delete this._registeredCompIds[b];d.onVKPostMessage&&d.onVKPostMessage(c)}},this)}var e=function(a){a.registerToMessage(c.bind(this)),this._siteAPI=a,this._registeredCompIds={}};e.prototype={registerToPostMessage:function(a){this._registeredCompIds[a.props.id]=a.props.id},unRegisterToPostMessage:function(a){delete this._registeredCompIds[a.props.id]}},a.registerSiteAspect("vkPostMessage",e)}),define("core/components/siteAspects/packagePickerAspect",["core/core/siteAspectsRegistry","utils"],function(a,b){"use strict";function c(a){for(var b=document.getElementsByTagName("iframe"),c=0,d=b.length;d>c;c++)if(0===b[c].src.indexOf(a.origin))return b[c];return null}function d(a){var d=c(a);null!==d?d.contentWindow.postMessage(window.location.hash,"*"):b.log.error("Unable to find premium packagePicker iframe source")}function e(a){switch(a=a.data?a:a.originalEvent,a.data){case"openUserLoginMessage":this.siteAPI.getSiteAspect("LoginToWix").openLoginToWixForm("https://users.wix.com/wix-users/login/form?postLogin=/upgrade/website",!1);break;case"sendHashDataToPremium":d(a)}}function f(a){this.siteAPI=a,a.registerToMessage(e.bind(this))}f.prototype={setSelected:function(a){this.selectedPackagePickerId=a.props.id,this.siteAPI.forceUpdate()},isPackagePickerSelected:function(a){return this.selectedPackagePickerId&&a.props.id===this.selectedPackagePickerId}},a.registerSiteAspect("PackagePickerAspect",f)}),define("core/core/pageItemRegistry",["utils"],function(a){"use strict";var b={Image:function(a,b,c){var d={id:"imageZoomComp",key:"imageZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};return b&&(d.propertyQuery=b),c.isMobileView()?(d.skin="wysiwyg.viewer.skins.TouchMediaZoomSlideshow",d.componentType="wysiwyg.viewer.components.TouchMediaZoomSlideshow"):(c.isMobileDevice()||c.isTabletDevice())&&(d.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"),d},PermaLink:function(a,b,c){var d={id:"appPartZoomComp",key:"appPartZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};return b&&(d.propertyQuery=b),c.isMobileView()&&(d.skin="wysiwyg.skins.MobileAppPartZoomSkin"),d}};return{registerPageItem:function(c,d){return b[c]?void a.log.error("page item already registered "+c):void(b[c]=d)},getCompStructure:function(a,c,d,e){return b[a]?b[a](c,d,e):null},clear:function(){b={}}}}),define("core/core/pageItemAspect",["lodash","core/core/pageItemRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/siteAspectsRegistry"],function(a,b,c,d,e){"use strict";function f(b){var c=" ",d=":",e={};if(b){var f=b.split(c);return a.forEach(f,function(a){var b=a.split(d);b[0]&&b[1]&&(e[b[0]]=b[1])}),a.isEmpty(e)?b:e}}function g(b,e,g,h){var i=b.getFocusedRootId(),j=b.getExistingRootNavigationInfo(i),k=f(j.pageItemAdditionalData),l=c.getCompProps(e,g,i,h);if(a.isPlainObject(k)){var m=b.getDataByQuery(k.galleryId)||k.galleryId;m&&(l.pageItemAdditionalData=m)}else l.pageItemAdditionalData=k;var n=d.getCompClass(e.componentType);return n(l)}function h(a,c){var d=c.getDataByQuery(a.pageItemId);if(!d)return null;var e=f(a.pageItemAdditionalData),g=e&&e.propertyQuery,h=b.getCompStructure(d.type,d,g,c);return h?h:null}function i(a){this._aspectSiteAPI=a}i.prototype={getReactComponents:function(a){var b=this._aspectSiteAPI.getSiteData(),c=b.getExistingRootNavigationInfo(b.getFocusedRootId()),d=h(c,b);return d?[g(b,d,this._aspectSiteAPI.getSiteAPI(),a)]:null},getComponentStructures:function(){var a=this._aspectSiteAPI.getSiteData(),b=a.getExistingRootNavigationInfo(a.getFocusedRootId()),c=h(b,a);return c?[c]:null}},e.registerSiteAspect("pageItem",i)}),define("core/core/nonPageItemZoomAspect",["utils","core/core/pageItemRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/siteAspectsRegistry"],function(a,b,c,d,e){"use strict";function f(b,e,f){var g=c.getCompProps(b,e.getSiteAPI(),null,f),h=a.nonPageItemZoom.getZoomedImageData();g.compData=h;var i=d.getCompClass(b.componentType);return g.closeFunction=a.nonPageItemZoom.unzoom,g.pageItemAdditionalData=h.galleryData,i(g)}function g(c){var d=a.nonPageItemZoom.getZoomedImageData();if(void 0===d)return null;var e=b.getCompStructure("Image",d,null,c);return delete e.dataQuery,e.compData=d,e}function h(a){this._aspectSiteAPI=a}h.prototype={getReactComponents:function(a){var b=g(this._aspectSiteAPI.getSiteData());return b&&[f(b,this._aspectSiteAPI,a)]},getComponentStructures:function(){var a=g(this._aspectSiteAPI.getSiteData());return a?[a]:null}},e.registerSiteAspect("nonPageItemZoom",h)}),define("core/components/siteAspects/scriptClass",["react","reactDOM"],function(a,b){"use strict";function c(a){return window.loadedScripts&&window.loadedScripts[a.NAME]}function d(a){return'window.loadedScripts = window.loadedScripts || {}; window.loadedScripts["'+a.NAME+'"] = true;'}var e=a.createClass({displayName:"scriptClass",loaded:!1,componentDidMount:function(){var e,f,g,a=this.props.scriptData,d=c(a.script);d&&!this.loaded?this.fireCallbacks(a,!0):(g=this,d=document.createElement("script"),e=function(){g.fireCallbacks(a,!1),g.loaded=!0,d.removeEventListener("load",e)},d.addEventListener("load",e),d.src=a.script.SRC,f=b.findDOMNode(this),f.replaceChild(d,f.children[0]))},fireCallbacks:function(a,b){a.callbacks.forEach(function(a){var c=a.context;c?a.callback.call(c,{fromCache:b}):a.callback({fromCache:b})}),a.callbacks.length=0},render:function(){var b=this.props.scriptData.script,c="script-"+b.NAME;return a.DOM.div(null,a.DOM.script({id:c,src:b.SRC}),a.DOM.script({dangerouslySetInnerHTML:{__html:d(b)}}))}});return e}),define("core/components/siteAspects/externalScriptLoaderAspect",["react","utils","lodash","core/core/siteAspectsRegistry","core/components/siteAspects/scriptClass"],function(a,b,c,d,e){"use strict";function i(a){this.siteAPI=a,this.loadedScripts={}}var f="v2.4",g="304553036307597",h=c.template("//connect.facebook.net/<%= lang %>/sdk.js#xfbml=1&appId=<%= appId %>&version=<%= sdkVersion %>");i.prototype={getReactComponents:function(){return c.map(this.loadedScripts,this.getNewScript,this)},loadScript:function(a,b,d){var f,g,e=this.loadedScripts[a];b&&(f={callback:b,context:d}),e&&f?e.callbacks.push(f):(g=this.getScriptDescription.apply(this,arguments),c.isFunction(g.actionBefore)&&g.actionBefore(),this.loadedScripts[a]={script:g,callbacks:f?[f]:[]})},unsubscribe:function(a,b){var d,c=this.loadedScripts[a];c&&(d=c.callbacks,d.some(function(a,c){var e=a.callback===b;return e?(d.splice(c,1),e):void 0}))},getNewScript:function(b,c){return a.createElement(e,{key:c,ref:c,scriptData:b})},getScriptDescription:function(a,c,d){return"FACEBOOK"===a?{NAME:"FacebookSDK",SRC:h({lang:this.getFacebookSdkLanguage(d.props.siteData),sdkVersion:f,appId:g})}:"GOOGLE"===a?{NAME:"GoogleApi",SRC:"//apis.google.com/js/plusone.js",actionBefore:function(){var a=d.props.siteData;window.___gcfg={lang:b.wixUserApi.getLanguage(a.requestModel.cookie,a.currentUrl)}}}:void 0},getFacebookSdkLanguage:function(a){var c={en:"en_US",es:"es_ES",pt:"pt_BR",ru:"ru_RU",fr:"fr_FR",de:"de_DE",ja:"ja_JP",ko:"ko_KR",it:"it_IT",pl:"pl_PL",tr:"tr_TR",nl:"nl_NL",sv:"sv_SE",da:"da_DK",no:"nn_NO"};return c[b.wixUserApi.getLanguage(a.requestModel.cookie,a.currentUrl)]||c.en}},d.registerSiteAspect("externalScriptLoader",i)}),define("core/core/SiteMembersAPI",["utils","lodash","experiment"],function(a,b,c){"use strict";function l(j,k,l,m,n,o){var p=a.ajaxLibrary,q=f+j;k=b.merge(k||{},{collectionId:e,metaSiteId:g});var r={url:q,type:"GET",data:k,complete:this.onAjaxComplete,context:this};n&&(b.merge(r.data,{svSession:n,appUrl:d}),o&&(r.data.initiator=o)),h=m,i=l,c.isOpen("newSiteMembersEndPoint")?(b.assign(r.data,{accept:"json"}),b.assign(r,{success:function(a){a&&!a.errorCode?l(a):m(a.errorCode)},error:m}),p.get(r)):(b.assign(r,{dataType:"jsonp"}),p.temp_jsonp(r))}var d,e,f,g,h,i,j={login:"/api/member/login",register:"/api/member/register",apply:"/api/member/apply",sendForgotPasswordMail:"/api/member/sendForgotPasswordMail",resetMemberPassword:"/api/member/changePasswordWithMailToken",getMemberDetails:"/api/member"},k={};return k.initializeData=function(a){g=a.getMetaSiteId();var b=a.getClientSpecMapEntriesByType("sitemembers")[0];e=b&&b.smcollectionId,f=a.serviceTopology.siteMembersUrl,d=a.currentUrl.full},k.onAjaxComplete=function(a,d){if(!c.isOpen("newSiteMembersEndPoint")){if(d&&!d.errorCode)b.isFunction(i)&&i(d);else{var e=d&&d.errorCode||"General_Err";b.isFunction(h)&&h(e)}i=null,h=null}},k.login=function(a,b,c,d,e){l.call(this,j.login,a,b,c,d,e)},k.register=function(a,b,c,d,e){l.call(this,j.register,a,b,c,d,e)},k.apply=function(a,b,c,d,e){l.call(this,j.apply,a,b,c,d,e)},k.sendForgotPasswordMail=function(a,b,c,d){l.call(this,j.sendForgotPasswordMail,{email:a,returnUrl:b},c,d)},k.resetMemberPassword=function(a,b,c){l.call(this,j.resetMemberPassword,a,b,c)},k.getMemberDetails=function(a,b,c){l.call(this,j.getMemberDetails+"/"+a,null,b,c)},k}),define("core/util/translations/siteMembersTranslations",[],{de:{SMApply_Success2:"Der Administrator der Website wird Sie per E-Mail informieren ( {0} ), sobald Ihre Anfrage bestätigt wurde. ",SMApply_Success1:"Vielen Dank! Ihre Anfrage zur Mitgliederanmeldung wurde versandt und wartet auf Bestätigung.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Bitte prüfen Sie Ihren Posteingang.",SMResetPassMail_confirmation_msg:"Wir haben Ihnen eine E-Mail mit einem Link geschickt, mit dem Sie Ihr Passwort zurücksetzen können.",SMResetPass_Reset_Succ:"Sie haben Ihr Passwort erfolgreich zurückgesetzt.",SMResetPass_Continue:"Fortfahren",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Beim Abmelden ist etwas schiefgelaufen. Bitte versuchen Sie es noch einmal.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Abmelden nicht erfolgreich",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sie sind der Besitzer dieser Website und bei Wix.com angemeldet. Bitte melden Sie sich bei Wix.com ab, um die Mitgliederanmeldung zu testen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fehler beim Abmelden",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},en:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Please check your email",SMResetPassMail_confirmation_msg:"We’ve sent you an email with a link that will allow you to reset your password",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},es:{SMApply_Success2:"El administrador de la página web te notificará a través de un email ({0}) una vez que tu solicitud sea aprobada. ",SMApply_Success1:"¡Enhorabuena! Tu solicitud de login de miembros fue enviada y su aprobación está pendiente.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Por favor revisa tu correo",SMResetPassMail_confirmation_msg:"Te hemos enviado un email con un enlace que te permitirá restablecer tu contraseña.",SMResetPass_Reset_Succ:"¡Has restablecido tu contraseña exitosamente!",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo falló en el cierre de sesión. Por favor inténtalo de nuevo.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"No se pudo cerrar sesión",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Tú eres el dueño de esta página web e iniciaste sesión con Wix.com. Por favor cierra tu sesión en Wix.com para que puedas probar la función Miembros del Sitio.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"El cierre de sesión falló",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",
siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},fr:{SMApply_Success2:"L'administrateur du site vous informera par email ({0}) lorsque votre demande aura été approuvée. ",SMApply_Success1:"Bravo ! Votre demande de connexion membre a été envoyée et est actuellement en attente d'approbation.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Veuillez consulter votre boîte e-mail",SMResetPassMail_confirmation_msg:"Un email avec un lien pour réinitialiser votre mot de passe vous a été envoyé",SMResetPass_Reset_Succ:"Vous avez réinitialisé votre mot de passe avec succès",SMResetPass_Continue:"Continuer",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Un problème est survenu lors de la déconnexion. Veuillez réessayer.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Échec Déconnexion",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Vous êtes le propriétaire de ce site internet et vous êtes connecté à Wix.com. Veuillez vous déconnecter de Wix.com afin de tester la fonctionnalité Membres du Site.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Échec déconnexion",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},it:{SMApply_Success2:"L'amministratore del sito ti notificherà via email( {0} ) una volta che la tua richiesta è stata accettata ",SMApply_Success1:"Successo! La tua richiesta di login membro è stata inviata ed è in attesa di approvazione.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Ti preghiamo di controllare la tua email",SMResetPassMail_confirmation_msg:"Ti abbiamo inviato un'email con un link che ti permetterà di ripristinare la tua password",SMResetPass_Reset_Succ:"Hai ripristinato con successo la tua password.",SMResetPass_Continue:"Continua",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Qualcosa è andato storto durante il logout. Ti preghiamo di riprovare.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Non Riuscito",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sei il proprietario di questo sito web e hai effettuato l'accesso a Wix.com. Esci da Wix.com per testare la funzionalità Membri del Sito.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fallimento Logout",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},ja:{SMApply_Success2:"会員登録の承認後、サイト管理者から「{0}」に通知メールが送信されます。 ",SMApply_Success1:"会員登録の申請を送信しました。",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"新着メールをご確認ください",SMResetPassMail_confirmation_msg:"メールのリンクをクリックしてパスワードをリセットしてください。",SMResetPass_Reset_Succ:"パスワードがリセットされました！",SMResetPass_Continue:"続行",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"ログアウトできませんでした。もう一度お試しください。",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"ログアウトできませんでした",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"あなたはサイト所有者として Wix.com にログインしています。サイト会員機能をテストするには、Wix.com からログアウトしてください。",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"ログアウトできませんでした",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},ko:{SMApply_Success2:"회원가입이 승인되면 이메일로 알려드립니다. ",SMApply_Success1:"성공적으로 회원가입 요청이 이루어졌습니다! 현재 회원가입 승인을 기다리고  있습니다.",SMContainer_OK:"확인",SMResetPassMail_confirmation_title:"이메일을 확인해 주세요.",SMResetPassMail_confirmation_msg:"비밀번호 재설정 링크가 이메일로 발송되었습니다.",SMResetPass_Reset_Succ:"비밀번호가 성공적으로 변경되었습니다.",SMResetPass_Continue:"계속",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"로그아웃에 문제가 발생했습니다. 다시 시도해 주세요.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"로그아웃에 실패했습니다.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"사용자님은 이 사이트 소유자이며 Wix.com에 로그인되어 있습니다. 사이트 회원 기능을 테스트하려면 Wix.com에서 로그아웃해 주세요.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"로그아웃 실패",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},pl:{SMApply_Success2:"Administrator powiadomi Cię w emailu,( {0} ) gdy twoja prośba zostanie zatwierdzona. ",SMApply_Success1:"Gratulujemy! Twoja prośba o członkostwo została wysłana i czeka na zatwierdzenie.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Sprawdź swój email",SMResetPassMail_confirmation_msg:"Wysłaliśmy email z linkiem, który umożliwi Ci zresetowanie hasła.",SMResetPass_Reset_Succ:"Zresetowanie hasła powiodło się.",SMResetPass_Continue:"Kontynuuj",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Coś poszło nie tak przy próbie wylogowania. Spróbuj jeszcze raz.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Wylogowanie Nie Powiodło Się",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Jesteś właścicielem tej witryny i jesteś obecnie zalogowany na Wix.com. Wyloguj się z Wix.com, aby przetestować funkcję Login Członka.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Wylogowanie nie powiodło się",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},ru:{SMApply_Success2:"Как только ваш запрос будет подтвержден, администратор сайта отправит вам письмо на {0} ",SMApply_Success1:"Отлично! Ваш запрос регистрации отправлен на подтверждение.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Пожалуйста, проверьте ваш email",SMResetPassMail_confirmation_msg:"Мы отправили вам ссылку для смены пароля.",SMResetPass_Reset_Succ:"Вы успешно сменили пароль.",SMResetPass_Continue:"Продолжить",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Что-то не срослось. Пожалуйста, попробуйте еще раз.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Не получилось выйти",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Чтобы протестировать эту функцию, пожалуйста, выйдите из аккаунта Wix.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Не удалось выйти",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},nl:{SMApply_Success2:"De administrator van de website zal u een e-mailbericht ( {0} ) sturen zodra uw verzoek is goedgekeurd ",SMApply_Success1:"Uw verzoek om toegang is verzonden en wacht op goedkeuring.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Controleer uw e-mailberichten",SMResetPassMail_confirmation_msg:"We hebben u een e-mailbericht gestuurd met een link waarmee u uw wachtwoord opnieuw kunt instellen",SMResetPass_Reset_Succ:"U hebt uw wachtwoord opnieuw ingesteld.",SMResetPass_Continue:"Doorgaan",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Er ging iets fout bij het uitloggen. Probeer het opnieuw.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Uitloggen mislukt",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"U bent de eigenaar van deze website en u bent al ingelogd op Wix.com. Log uit om de functies voor leden van uw website te testen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Uitloggen mislukt",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},tr:{SMApply_Success2:"Talebiniz onaylandığında site yöneticisi size e-posta( {0} ) yoluyla bildirecektir ",SMApply_Success1:"Başarılı! Üye girişi talebiniz gönderildi ve onay bekliyor.",SMContainer_OK:"TAMAM",SMResetPassMail_confirmation_title:"Lütfen e-postanızı kontrol edin",SMResetPassMail_confirmation_msg:"Size şifrenizi sıfırlamanızı sağlayacak bir bağlantı içeren bir e-posta gönderdik.",SMResetPass_Reset_Succ:"Şifrenizi yeniden ayarlama başarılı.",SMResetPass_Continue:"Devam",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Bu oturum kapatma işlemiyle ilgili bir hata oluştu. Lütfen daha sonra deneyin.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Oturum Kapatma Başarısız",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Bu web sitesinin sahibisiniz ve Wix.com'daki oturumuz açık. Lütfen Site Üyelik özelliğini test etmek için Wix.com oturumunuzu kapatın.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Oturum Kapatma Hatası",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},sv:{SMApply_Success2:"Sidans administratör meddelar dig via e-post ({0}) så fort din begäran har godkänts  ",SMApply_Success1:"Klart! Din begäran om medlemsinloggning har skickats och väntar på godkännande.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Kontrollera din e-post",SMResetPassMail_confirmation_msg:"Vi har skickat ett mejl med en länk som gör att du kan återställa ditt lösenord",SMResetPass_Reset_Succ:"Du har återställt ditt lösenord.",SMResetPass_Continue:"Fortsätt",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Något gick fel vid utloggningen. Försök igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Kunde inte logga ut",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du äger den här hemsidan och är inloggad på Wix.com. Logga ut från Wix.com för att testa funktionen sidmedlemmar.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Kunde inte logga ut",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},pt:{SMApply_Success2:"O administrador do site irá enviar-lhe uma notificação via email( {0} ) assim que o pedido for aprovado ",SMApply_Success1:"Seu pedido de login foi enviado com sucesso e aguarda aprovação.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Por favor, verifique seu email",SMResetPassMail_confirmation_msg:"Enviamos um e-mail com um link que lhe permitirá redefinir sua senha",SMResetPass_Reset_Succ:"Você redefiniu sua senha com sucesso.",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo deu errado com este logout. Por favor, tente novamente.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Falha no Logout",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Você é o proprietário deste site, e fez login em Wix.com. Por favor, faça logout do Wix.com para testar o recurso de Membros do Site.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Falha no logout",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},no:{SMApply_Success2:"Nettstedets administrator vil varsle deg via e-post( {0} ) med en gang forespørselen din har blitt godkjent ",SMApply_Success1:"Supert! Din forespørsel om medlemsinnlogging er sendt og venter på godkjenning.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Vennligst sjekk e-posten din",SMResetPassMail_confirmation_msg:"Vi har sendt deg en e-post med en link som vil tillate deg å nullstille passordet ditt",SMResetPass_Reset_Succ:"Du har nå tilbakestillt passordet.",SMResetPass_Continue:"Fortsett",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noe gikk galt ved utlogging. Gi det et nytt forsøk.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Mislykket utlogging",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er eier av dette nettstedet, og er logget inn på Wix.com. Logg ut av Wix.com for å teste nettstedets medlemmer-funksjonen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Feil ved utlogging",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},da:{SMApply_Success2:"Hjemmesideadministratoren vil give dig besked via e-mail( {0} ) når din anmodning er blevet godkendt. ",SMApply_Success1:"Succes! Din anmodning om medlemslogin er sendt og afventer godkendelse.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Tjek venligst dine e-mails",SMResetPassMail_confirmation_msg:"Vi har sendt dig en e-mail med et link, som giver dig mulighed for at nulstille din adgangskode",SMResetPass_Reset_Succ:"Du har med succes nulstillet din adgangskode.",SMResetPass_Continue:"Næste",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noget gik galt ved dit log ud. Prøv venligst igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Log ud mislykkedes",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er ejeren af denne hjemmeside, og er logget ind på Wix.com. Venligst log ud af Wix.com for at teste funktionen for hjemmesidemedlemmer.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fejl ved log ud",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},hi:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"कृपया अपनी ई-मेल देखें",SMResetPassMail_confirmation_msg:"हमने आपको ई-मेल से एक लिंक भेजी है जिसके द्वारा आप अपना पासवर्ड दुबारा सेट कर सकेंगे",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},zh:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"请查看您的电子邮件",SMResetPassMail_confirmation_msg:"我们已向您发送一封包含链接的电子邮件，供您重置密码。",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},cs:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Please check your email",SMResetPassMail_confirmation_msg:"We’ve sent you an email with a link that will allow you to reset your password",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."}}),define("core/siteRender/SiteMembersAspect",["lodash","utils","core/core/siteAspectsRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/SiteMembersAPI","core/bi/events","core/util/translations/siteMembersTranslations"],function(a,b,c,d,e,f,g,h){"use strict";function n(a,b,c){return{componentType:a,type:"Component",id:b,key:b,skin:c}}function o(){return n("wysiwyg.viewer.components.dialogs.CreditsDialog","creditsDialog","wysiwyg.viewer.skins.dialogs.creditsDialogSkin")}function p(){return n("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog","wysiwyg.viewer.skins.dialogs.notificationDialogSkin")}function q(){return n("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkin")}function r(){return n("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkin")}function s(){return n("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkin")}function t(){return n("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkin")}function u(){return n("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog","wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkin")}function v(a,b,c,d){var e=c(),f=x.call(this,e,a,b);return d.call(this,f),w.call(this,e,f)}function w(a,b){b.notClosable=this.notClosable;var c=e.getCompClass(a.componentType);return c(b)}function x(a,b,c){var e=d.getCompProps(a,b,null,c),f=this.dialogToDisplay;return e.language=X[f]&&X[f].language||X[this.siteData.siteId].language,e.onCloseDialogCallback=Q.bind(this),e}function y(b){b.onSubmitCallback=I.bind(this);var c=X[k.SignUp]&&X[k.SignUp].language||null;b.onSwitchDialogLinkClick=G.bind(this,k.SignUp,a.noop,c),b.onForgetYourPasswordClick=G.bind(this,k.ResetPasswordEmail,a.noop,c),b.needLoginMessage=this._showDialogMessage}function z(b){b.onSubmitCallback=J.bind(this);var c=X[k.SignUp]&&X[k.SignUp].language||null;b.onSwitchDialogLinkClick=G.bind(this,k.Login,a.noop,c),b.needLoginMessage=this._showDialogMessage}function A(b){var c=X[k.SignUp]&&X[k.SignUp].language||null;b.onSwitchDialogLinkClick=G.bind(this,k.Login,a.noop,c),b.onSubmitCallback=K.bind(this)}function B(a,b,c){var e=d.getCompProps(a,b,null,c);return e.onSubmitCallback=M.bind(this),e.notClosable=!0,w.call(this,a,e)}function C(a){var b=a.language;switch(this.notifcationToDisplay){case k.SignUp:var c=X[this.siteData.siteId].siteMember,d=c.details.email;a.title="",a.description=ca(b,"SMApply_Success1")+" "+ca(b,"SMApply_Success2").replace("{0}",d),a.buttonText=ca(b,"SMContainer_OK");break;case k.ResetPasswordEmail:a.title=ca(b,"SMResetPassMail_confirmation_title"),a.description=ca(b,"SMResetPassMail_confirmation_msg"),a.buttonText=ca(b,"SMContainer_OK");break;case k.ResetPasswordNewPassword:a.title=ca(b,"SMResetPass_Reset_Succ"),a.description="",a.buttonText=ca(b,"SMResetPass_Continue"),a.onButtonClick=G.bind(this,k.Login);break;case"siteowner":a.title=ca(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE"),a.description=ca(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE"),a.buttonText=ca(b,"SMContainer_OK")}}function D(a){a.onSubmitCallback=this.handlePasswordEntered.bind(this,this.nextPageInfo)}function E(a){return i.SHA256.b64_sha256(a)}function F(a,b){var c=a.cookieName||m.SM_SESSION,d=a.sessionToken,e=a.rememberMe?a.expirationDate:0;j.setCookie(c,d,e,b.currentUrl.hostname,b.getMainPagePath(),!1)}function G(a,b,c){b&&(this.dialogProcessSuccessCallback=b),c&&(X[a]={language:c}),this.dialogToDisplay=a,this.aspectSiteApi.forceUpdate()}function H(a,b){this.notifcationToDisplay=a,this.dialogToDisplay=k.Notification,b&&(X[k.Notification]={language:b}),this.aspectSiteApi.forceUpdate()}function I(a,b){delete this.dialogToDisplay;var c=j.getCookie(m.SV_SESSION),d=null;f.login(a,S.bind(this,b),b.setErrorMessageByCode,c,d)}function J(b,c){var d=this.siteData.rendererModel.clientSpecMap,e=a.find(d,{type:"sitemembers"}),g=e.collectionType;"Open"===g?f.register(b,T.bind(this,c),c.setErrorMessageByCode):"ApplyForMembership"===g&&f.apply(b,U.bind(this,c.props.language),c.setErrorMessageByCode)}function K(a,b){var c=this.siteData.currentUrl.full;f.sendForgotPasswordMail(a.email,c,H.bind(this,l.ResetPasswordEmail),b.setErrorMessageByCode)}function L(){delete this.siteData.currentUrl.query.forgotPasswordToken,H.call(this,l.ResetPasswordNewPassword)}function M(a,b){f.resetMemberPassword(a,L.bind(this),b.setErrorMessageByCode)}function N(b,c){return a.includes(b.rendererModel.passwordProtectedPages,c)}function O(a,b,c){var d=a.getDataByQuery(b.pageId)&&a.getDataByQuery(b.pageId).pageSecurity;if(!d)return{isAllowed:!0,defaultDialog:k.ResetPasswordNewPassword};if(!Z(a,b.pageId)){if(d.passwordDigest)return{isAllowed:!1,defaultDialog:k.PasswordProtected,pageSecurity:d};if(N(a,b.pageId))return{isAllowed:!1,defaultDialog:k.PasswordProtected,pageSecurity:d}}return d.requireLogin&&!c?{isAllowed:!1,defaultDialog:k.SignUp,pageSecurity:d}:{isAllowed:!0,defaultDialog:null}}function P(b){return a.has(this.siteData.currentUrl.query,"forgotPasswordToken")?{isAllowed:O(this.siteData,b,this.isLoggedIn()).isAllowed,defaultDialog:k.ResetPasswordNewPassword}:O(this.siteData,b,this.isLoggedIn())}function Q(a,b){this.currentDialog=null,this.dialogToDisplay=null,a.performCloseDialog(function(){this._showDialogMessage=!1,b?this.nextPageInfo?this.aspectSiteApi.navigateToPage(this.nextPageInfo):this.aspectSiteApi.forceUpdate():this.nextPageInfo&&this.nextPageInfo.pageId===this.siteData.getCurrentUrlPageId()?(R.call(this),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()})):this.aspectSiteApi.forceUpdate()}.bind(this))}function R(){this.dontShowDialog=!0}function S(b,c){F(c.payload,this.siteData),V.call(this,function(){var d=X[this.siteData.siteId].siteMember;d.details=c.payload.siteMemberDto,a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),Q.call(this,b,!0),this.aspectSiteApi.reportBI(g.SITE_MEMBER_LOGIN_SUCCESS,{userName:d.details.attribute&&d.details.attribute.name||d.details.email})}.bind(this))}function T(b,c){F(c.payload,this.siteData),V.call(this,function(){this.nextPageInfo&&this.aspectSiteApi.navigateToPage(this.nextPageInfo);var d=X[this.siteData.siteId].siteMember;d.details=c.payload.siteMemberDto,a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),Q.call(this,b,!0)}.bind(this))}function U(b,c){var d=X[this.siteData.siteId].siteMember;d.details=c.payload,a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),H.call(this,l.SignUp,b)}function V(a){var b=this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap");b.reloadClientSpecMap(a,!0)}function W(a,b,c){this._showDialogMessage=!0,this.nextPageInfo=a,c&&c.passwordDigest&&(this._passwordDigest=c.passwordDigest),this.dialogToDisplay=b,c&&(c.dialogLanguage&&(X[b]={language:c.dialogLanguage}),X[this.siteData.siteId].language="en")}function Y(a){X[a.siteId]={approvedPasswordPages:[],siteMember:{details:null},language:"en"}}function Z(b,c){return a.includes(X[b.siteId].approvedPasswordPages,c)}function $(a){X[this.siteData.siteId].approvedPasswordPages.push(a)}function _(a,c,d,e){var f=this.siteData.serviceTopology.protectedPageResolverUrl,g={password:a,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:c.pageId};b.ajaxLibrary.ajax({type:"POST",url:f,data:g,dataType:"json",cache:!1,contentType:"application/json",success:d,error:e})}function aa(a,b,c){var d=E(a);d===this._passwordDigest?b(this.nextPageInfo):c()}function ba(b){this.aspectSiteApi=b,this.siteData=b.getSiteData(),this.dialogProcessSuccessCallback=null,Y(this.siteData),f.initializeData(this.siteData),this.dialogToDisplay=a.has(this.siteData.currentUrl.query,"forgotPasswordToken")?k.ResetPasswordNewPassword:null}function ca(a,b){return h[a]?h[a][b]:h.en[b]}var i=b.hashUtils,j=b.cookieUtils,k={Login:"login",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword"},l={SiteOwner:"siteowner",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword"},m={SV_SESSION:"svSession",SM_SESSION:"smSession",WIX_CLIENT:"wixClient"},X={};ba.prototype={dialogToDisplay:null,notifcationToDisplay:null,nextPageInfo:null,_passwordDigest:null,_showDialogMessage:!1,getComponentStructures:function(){switch(this.dialogToDisplay){case k.Login:return[q()];case k.SignUp:return[r()];case k.ResetPasswordEmail:return[s()];case k.ResetPasswordNewPassword:return[t()];case k.Notification:return[p()];case k.Credits:return[o()];case k.PasswordProtected:return[u()];case k.AdminLogin:return[u()];default:return null}},getReactComponents:function(b){if(this.dontShowDialog)return this.dontShowDialog=!1,null;var d,e,c=this.aspectSiteApi.getSiteAPI();switch(this.dialogToDisplay){case k.Login:d=y,e=q;break;case k.SignUp:d=z,e=r;break;case k.ResetPasswordEmail:d=A,e=s;break;case k.ResetPasswordNewPassword:var f=t();return B.call(this,f,c,b);case k.Notification:d=C.bind(this),e=p;break;case k.Credits:d=a.noop,e=o;break;case k.PasswordProtected:d=D,e=u}return this.currentDialog=e&&v.call(this,c,b,e,d),this.currentDialog},isLoggedIn:function(){return!!this.siteData.getSMToken()},showSignUpDialog:function(a,b){G.call(this,k.SignUp,a,b)},showCreditsDialog:function(){G.call(this,k.Credits)},getMemberDetails:function(a){var b=X[this.siteData.siteId].siteMember;return this.isLoggedIn()&&!b.details?(f.getMemberDetails(this.siteData.getSMToken(),function(c){b.details=c.payload,a&&a(b.details),this.aspectSiteApi.forceUpdate()}.bind(this),function(){}),null):(a&&a(b.details),b.details)},isPageAllowed:function(a){if(this.siteData.renderFlags.isPageProtectionEnabled){var b=P.call(this,a);return b.isAllowed}return!0},showDialogOnNextRender:function(a){var b=P.call(this,a);this.dialogToDisplay||b.isAllowed||(this.notClosable=a.pageId===this.siteData.getCurrentUrlPageId()&&a.pageId===this.siteData.getMainPageId(),W.call(this,a,b.defaultDialog,b.pageSecurity))},logout:function(a){var b=X[this.siteData.siteId].siteMember;j.getCookie(m.WIX_CLIENT)&&b.details&&b.details.owner?H.call(this,l.SiteOwner,a):(j.deleteCookie(m.SM_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath()),j.deleteCookie(m.SV_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath()),V.call(this,function(){b.details=null,this.notifcationToDisplay=null,this.aspectSiteApi.forceUpdate()}.bind(this)))},forceCloseDialog:function(){R.call(this)},handlePasswordEntered:function(b,c,d){var e=function(){d.setErrorMessage("PasswordLogin_Wrong_Password")},f=function(a){Q.call(this,d,!0),$.call(this,a.pageId),this.aspectSiteApi.navigateToPage(a),this._passwordDigest=null}.bind(this);return a.isEmpty(c.password)?d.setErrorMessage("PasswordLogin_Wrong_Password"):void(N(this.siteData,b.pageId)?_.call(this,c.password,b,function(a){b.jsonUrls=a.payload.urls,f(b)},e):aa.call(this,c.password,f,e))}},c.registerSiteAspect("siteMembers",ba)}),define("core/components/siteAspects/windowFocusEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";var d=c.stringUtils,e=["focus","blur"],f=function(a){this._aspectSiteAPI=a,this._registerToFocusEvents()};f.prototype={_registerToFocusEvents:function(){this._compsRegistry={},a.forEach(e,function(a){this._compsRegistry[a]={},this._aspectSiteAPI.registerToFocusEvents(a,this.propagateFocusEvent.bind(this,a))},this)},registerToFocusEvent:function(a,b){this._compsRegistry[a][b.props.id]=b.props.id},unregisterFromFocusEvent:function(a,b){delete this._compsRegistry[a][b.props.id]},propagateFocusEvent:function(b){var f,c=this._compsRegistry[b],e="on"+d.capitalize(b);a.forEach(c,function(a){f=this._aspectSiteAPI.getComponentById(a),f?f[e]&&f[e]():delete this._compsRegistry[b][a]},this)}},b.registerSiteAspect("windowFocusEvents",f)}),define("core/components/siteAspects/windowScrollEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this._registeredCompIds={},this._prevScrollPosition={x:0,y:0},this._aspectSiteAPI.registerToSiteReady(function(){this._aspectSiteAPI.registerToScroll(this.propagateScrollEvent.bind(this))}.bind(this))}c.prototype={registerToScroll:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToScroll:function(a){delete this._registeredCompIds[a.props.id]},propagateScrollEvent:function(){var b={x:window.pageXOffset||document.body.scrollLeft,y:window.pageYOffset||document.body.scrollTop},c=this.getScrollDirection(b);this._prevScrollPosition=b,a.forEach(this._registeredCompIds,function(a){var d=this._aspectSiteAPI.getComponentById(a);d?d.onScroll&&d.onScroll(b,c):delete this._registeredCompIds[a]},this)},getScrollDirection:function(a){return a.y!==this._prevScrollPosition.y?a.y>this._prevScrollPosition.y?"DOWN":"UP":a.x!==this._prevScrollPosition.x?a.x>this._prevScrollPosition.x?"RIGHT":"LEFT":void 0},getScrollPosition:function(){return{x:window.pageXOffset||document.body.scrollLeft,y:window.pageYOffset||document.body.scrollTop}}},b.registerSiteAspect("windowScrollEvent",c)}),define("core/components/siteAspects/windowResizeEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this._registeredCompIds={},this._registeredCompIdsOrientation={},this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this)),this._aspectSiteAPI.registerToOrientationChange(this.propagateOrientationEvent.bind(this))}c.prototype={registerToResize:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToResize:function(a){delete this._registeredCompIds[a.props.id]},registerToOrientationChange:function(a){this._registeredCompIdsOrientation[a.props.id]=a.props.id},unregisterToOrientationChange:function(a){delete this._registeredCompIdsOrientation[a.props.id]},propagateResizeEvent:function(){
a.forEach(this._registeredCompIds,function(a){var b=this._aspectSiteAPI.getComponentById(a);b?b.onResize&&b.onResize():delete this._registeredCompIds[a]},this)},propagateOrientationEvent:function(){a.forEach(this._registeredCompIdsOrientation,function(a){var b=this._aspectSiteAPI.getComponentById(a);b?b.onOrientationChange&&b.onOrientationChange():delete this._registeredCompIdsOrientation[a]},this)}},b.registerSiteAspect("windowResizeEvent",c)}),define("core/components/siteAspects/windowKeyboardEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function d(a){this._aspectSiteAPI=a,this._aspectSiteAPI.registerToKeyDown(this.propagateKeyboardEvent.bind(this)),this._registeredCompIds={Escape:[],ArrowRight:[],ArrowLeft:[]}}var c={39:"ArrowRight",37:"ArrowLeft",27:"Escape"};d.prototype={registerToEscapeKey:function(a){this._registeredCompIds.Escape.push(a.props.id)},registerToArrowRightKey:function(a){this._registeredCompIds.ArrowRight.push(a.props.id)},registerToArrowLeftKey:function(a){this._registeredCompIds.ArrowLeft.push(a.props.id)},unRegisterKeys:function(b){a.forEach(this._registeredCompIds,function(c,d){this._registeredCompIds[d]=a.without(this._registeredCompIds[d],b.props.id)},this)},propagateKeyboardEvent:function(b){var d=c[b.keyCode||b.which];if(!a.isEmpty(this._registeredCompIds[d])){var e=a.last(this._registeredCompIds[d]),f=this._aspectSiteAPI.getComponentById(e),g="on"+d+"Key";f?f[g]&&(b.preventDefault(),f[g]()):this._registeredCompIds[d]=a.without(this._registeredCompIds[d],e)}}},b.registerSiteAspect("windowKeyboardEvent",d)}),define("core/components/siteAspects/MobileActionsMenuAspect",["core/core/siteAspectsRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory"],function(a,b,c){"use strict";function d(a){if(!a.isMobileDevice()||!a.renderFlags.renderMobileActionMenu)return null;var b=a.getSiteMetaData();return b&&b.quickActions&&b.quickActions.configuration.quickActionsMenuEnabled?{id:"MOBILE_ACTIONS_MENU",skin:"wysiwyg.viewer.skins.mobile.MobileActionsMenuSkin",componentType:"wysiwyg.viewer.components.MobileActionsMenu",styleId:"mobileActionsMenu",layout:{position:"static"}}:null}function e(a){this._siteAspectsSiteAPI=a}e.prototype={getReactComponents:function(a){var e=this._siteAspectsSiteAPI.getSiteData(),f=d(e);if(!f)return null;var g=b.getCompProps(f,this._siteAspectsSiteAPI.getSiteAPI(),null,a);g.userColorScheme=e.rendererModel.siteMetaData.quickActions.colorScheme;var h=c.getCompClass(f.componentType);return[h(g)]},getComponentStructures:function(){var a=d(this._siteAspectsSiteAPI.getSiteData());return a?[a]:null}},a.registerSiteAspect("mobileActionsMenu",e)}),define("core/components/siteAspects/addComponentAspect",["core/core/siteAspectsRegistry","lodash","core/core/componentPropsBuilder","core/siteRender/compFactory"],function(a,b,c,d){"use strict";function e(a){this._aspectSiteAPI=a,this._componentsToRender={}}e.prototype={addComponent:function(a,b,c){this._componentsToRender[a]={structure:b,props:c},this._aspectSiteAPI.forceUpdate()},deleteComponent:function(a){delete this._componentsToRender[a],this._aspectSiteAPI.forceUpdate()},getComponentStructures:function(){return b.pluck(this._componentsToRender,"structure")},getReactComponents:function(a){return b.map(this._componentsToRender,function(e){var f=c.getCompProps(e.structure,this._aspectSiteAPI.getSiteAPI(),null,a);b.assign(f,e.props);var g=d.getCompClass(e.structure.componentType);return g(f)},this)}},a.registerSiteAspect("addComponent",e)}),define("core/components/siteAspects/AudioAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function h(b,c){return a.assign({url:j(b.siteAPI.getSiteData().serviceTopology),flashVersion:9,preferFlash:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,html5PollingInterval:100,onready:function(){b.soundManagerReady=!0}},c||{})}function i(){e=d}function j(a){var c=a.scriptsDomainUrl;return b.stringUtils.endsWith(c,"/")||(c+="/"),c+"services/third-party/soundmanager2/V2.97a.20150601/"}function k(a){m!==l&&(a.soundManagerReady=!1,a.soundManagerOnResetup=!0,a.siteAPI.forceUpdate(),m=l,l(a))}function l(a){var b=h(a,{preferFlash:!0,useHTML5Audio:!1,onready:function(){a.soundManagerReady=!0,a.soundManagerOnResetup=!1,a.siteAPI.forceUpdate()}});a.soundManager.destruct(),a.soundManager.reset().setup(b),a.soundManager.beginDelayedInit()}function p(a){this.siteAPI=a,this.nowPlayingComp=null,this.soundManagerReady=!1,this.soundManagerOnResetup=!1,this.soundManager=null,this.shouldForceHTML5Audio=o(a.getSiteData())}var d=10,e=d,f=1.5,g=1e4,m=function(a){var b=h(a);a.soundManager.setup(b),setTimeout(function(){n(a)},e)},n=function(a){null===a.soundManager?require(["SoundManager"],function(b){a.soundManager=b.getInstance(),n(a)}):a.soundManagerReady?(a.siteAPI.forceUpdate(),i()):g>e?(m(a),e*=f):(i(),b.log.verbose("Failed to setup SoundManager."))},o=function(a){var b=a.browser;return b&&b.safari===!0};return p.prototype={loadSoundManagerAPI:function(){n(this)},isSoundManagerReady:function(){return this.soundManagerReady},isSoundManagerOnResetup:function(){return this.soundManagerOnResetup},onHTML5ErrorTryToReloadWithFlash:function(){k(this)},createAudioObj:function(a){return this.soundManagerReady?(a.id&&this.soundManager.getSoundById(a.id)&&this.soundManager.destroySound(a.id),this.soundManager.createSound(a)):(this.loadSoundManagerAPI(),!1)},isCompPlaying:function(a){return this.nowPlayingComp===a.props.id},updatePlayingComp:function(a){this.soundManagerReady||this.loadSoundManagerAPI(),this.nowPlayingComp=a.props.id,this.siteAPI.forceUpdate()},updatePausingComp:function(){this.nowPlayingComp="",this.soundManagerReady&&this.siteAPI.forceUpdate()}},c.registerSiteAspect("AudioAspect",p),p}),define("core/components/actionsAspectActions/bgScrubAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e){"use strict";function h(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviors=[],this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1}var f=c.balataConsts,g={BackgroundParallax:[f.BALATA,f.MEDIA],BackgroundReveal:[f.BALATA,f.MEDIA],BackgroundZoom:[f.BALATA,f.MEDIA],BackgroundFadeIn:[f.BALATA],BackgroundBlurIn:[f.BALATA,f.MEDIA],SiteBackgroundParallax:[]};return h.prototype=a.create(Object.prototype,{constructor:h,ACTION_TRIGGERS:[d.PAGE_CHANGED,d.PAGE_RELOADED,d.TRANSITION_ENDED,d.SCROLL,d.RESIZE],ACTION_NAME:"bgScrub",_currentScroll:{x:0,y:0},_currentPopupScroll:{x:0,y:0},shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this._currentPageBehaviors=[],this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},executeAction:function(){a.isEmpty(this._currentPageBehaviors)||this.setAnimationsProgress()},setSequenceProgress:function(a,b,d){var e=d.getSequence(a.sequenceId);e?e.progress(b):c.log.error("sequence id %s returned no sequence",a.sequenceId)},setAnimationsProgress:function(){var b=Math.max(this._currentScroll.y,0);a.forEach(this._liveSequenceIds,function(a){if(this.isComponentInViewport(a.compId,a.parentId)){var c=this._viewportHeight+b-a.componentTop,d=c/a.maxTravel;this.setSequenceProgress(a,d,this.getComponentParent(a.parentId))}},this)},getComponentMeasure:function(b){var c=this._siteData.measureMap||{},d=a.get(c,["height",b],0),e=a.get(c,["absoluteTop",b],0);return{height:d,top:e}},setSiteMeasure:function(){this._viewportHeight=this._siteData.getScreenHeight(),this._siteHeight=this.getSiteHeight()},initiateBehaviors:function(){this._currentPageBehaviors=this.getCurrentPageBehaviors(this._behaviors,this._siteData.getPrimaryPageId())},getComponentParent:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():"siteBackground"===a?this._aspectSiteAPI.getComponentById("SITE_BACKGROUND"):this._aspectSiteAPI.getCurrentPage()},isComponentInViewport:function(a,b){if(c.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,b))return!0;var d,f=this._currentScroll;return e.isOpen("sv_popups")&&(d=this._aspectSiteAPI.getCurrentPopupId(),d&&d===this._aspectSiteAPI.getRootOfComponentId(a)&&(f=this._currentPopupScroll)),c.viewportUtils.isInViewport(this._aspectSiteAPI,f,a)},getSequenceParams:function(){return{suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0}},getCurrentPageBehaviors:function(b,c){return a.filter(b,function(a){return a.action===this.ACTION_NAME&&(a.pageId===c||"masterPage"===a.pageId||"siteBackground"===a.pageId)},this)},createSequences:function(){this._liveSequenceIds=a.map(this._currentPageBehaviors,function(c){var d,e="siteBackground"===c.pageId,f=this.getComponentParent(c.pageId),h=f.sequence(),i=this.getComponentMeasure(c.targetId),j=b.getProperties(c.name),k=j.getMaxTravel||a.noop,l=k(i,this._viewportHeight,this._siteHeight)||this._viewportHeight,m=c.params||{};m.browserFlags=this._siteData.browserFlags(),m.componentTop=i.top,m.componentHeight=i.height,m.viewPortHeight=this._viewportHeight,d=[[c.targetId].concat(g[c.name])],h.add(d,c.name,c.duration,c.delay,m);var n=h.execute(this.getSequenceParams());return{path:d,compId:c.targetId,parentId:c.pageId,behaviorName:c.name,componentTop:e?this._viewportHeight:i.top,componentHeight:i.height,maxTravel:l,sequenceId:n}},this)},handleTrigger:function(a){if(this._isEnabled)switch(this._currentScroll=this._aspectSiteAPI.getSiteScroll(),e.isOpen("sv_popups")&&(this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll()),a){case d.PAGE_CHANGED:case d.TRANSITION_ENDED:this.clearAllAndReload(0),this._animateOnNextTick=!0,this._behaviorsUpdated=!1;break;case d.PAGE_RELOADED:case d.SCROLL:case d.RESIZE:(this._behaviorsUpdated||this._viewportHeightUpdated)&&(this.clearAllAndReload(0),this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1),this._animateOnNextTick=!0}},_shouldForceResizeEvent:function(){this._siteData.getScreenHeight()!==this._viewportHeight&&(this._viewportHeight=this._siteData.getScreenHeight(),this._viewportHeightUpdated=!0,this.handleTrigger(d.RESIZE))},_executeActionOnTick:function(){this._shouldForceResizeEvent(),this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},clearAllAndReload:function(a){this.stopAndClearAnimations(a),this.initiateBehaviors(),this.setSiteMeasure(),this.createSequences()},stopAndClearAnimations:function(b){b=a.isNumber(b)?b:1,a.forEach(this._liveSequenceIds,function(a){var c=this.getComponentParent(a.parentId);c.getSequence(a.sequenceId)&&c.stopSequence(a.sequenceId,b)},this),this._liveSequenceIds=[]},handleBehaviorsUpdate:function(a){this._behaviors=a,this._behaviorsUpdated=!0},getSiteHeight:function(){var b=this._aspectSiteAPI,c=b.getSiteData().measureMap||{},d=this._siteData.renderFlags,e=a.get(c,"height.SITE_STRUCTURE",0)+(c.siteMarginBottom||0)+(d.extraSiteHeight||0);return e}}),h}),define("core/components/actionsAspectActions/baseAction",["lodash","animations","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c){"use strict";function d(b){this._aspectSiteAPI=b,this._siteData=b.getSiteData(),this._isEnabled=!1,this._triggeredOnce={},a.bindAll(this)}return d.prototype=a.create(Object.prototype,{constructor:d,ACTION_TRIGGERS:[],ACTION_NAME:"BASE_ACTION",ACTIONS_SUPPORTED:["BASE_ACTION"],shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled||(this._triggeredOnce={},this._currentActions={},this._delayActionByTransitionDuration=0,this._executeOnNextTick=[],this.resetActionState(),this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._executeOnNextTick=[],b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this._isEnabled=!1,this._delayActionByTransitionDuration=0,this.resetActionState())},isEnabled:function(){return this._isEnabled},triggerActions:function(b,c){var d=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");return a.forEach(b,function(a){this._triggeredOnce[a]=!0},this),c=a.defaults(c||{},{action:this.ACTION_NAME}),d.handleActions(a(this._currentActions).pick(b).values().value(),c)},registerPageTransitionDuration:function(a){this._delayActionByTransitionDuration=a},handleBehaviorsUpdate:a.noop,executeAction:a.noop,_executeActionOnTick:function(){if(!a.isEmpty(this._executeOnNextTick)){var b=this._executeOnNextTick;this._executeOnNextTick=[],a.forEach(b,function(a){a()})}},executeOnNextTick:function(b){this._executeOnNextTick=a(this._executeActionOnTick).concat([b]).uniq().value()},handleTrigger:function(b){var d=a.toArray(arguments);switch(b){case c.ACTIONS_ADDED_LAYOUTED:d[1]=a.pick(d[1],function(b){return a.includes(this.ACTIONS_SUPPORTED,b.name)},this),a.assign(this._currentActions,d[1]);break;case c.ACTIONS_REMOVED:d[1]=a.pick(d[1],function(b){return a.includes(this.ACTIONS_SUPPORTED,b.name)},this),this._currentActions=a.omit(this._currentActions,a.keys(d[1]))}this._isEnabled&&this.handleActionTrigger.apply(this,d)},handleActionTrigger:function(){throw"Need to implement handleTrigger in specific actions"},resetActionState:function(){throw"Need to implement resetActionState in specific actions"}}),d}),define("core/components/actionsAspectActions/loadAction",["lodash","utils","core/components/actionsAspectActions/baseAction","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";function e(){c.apply(this,arguments)}function f(c){return a.pick(c,function(a){return a.sourceId===b.siteConstants.SITE_STRUCTURE_ID})}return e.prototype=a.create(c.prototype,{constructor:e,ACTION_TRIGGERS:[d.SITE_READY,d.PAGE_RELOADED,d.PAGE_CHANGED,d.DID_LAYOUT,d.ACTIONS_REMOVED,d.ACTIONS_ADDED_LAYOUTED],ACTION_NAME:"load",ACTIONS_SUPPORTED:["load"],shouldEnable:a.constant(!0),runAction:function(){var b=a(this._currentActions).omit(a.keys(this._triggeredOnce)).keys().value();this.triggerActions(b)},handleActionTrigger:function(b){switch(b){case d.ACTIONS_REMOVED:this._triggeredOnce=a(this._triggeredOnce).omit(a.keys(arguments[1])).omit(a.keys(f(this._currentActions))).value();break;case d.SITE_READY:case d.PAGE_RELOADED:case d.PAGE_CHANGED:case d.DID_LAYOUT:this.executeOnNextTick(this.runAction)}},resetActionState:a.noop}),e}),define("core/components/actionsAspectActions/screenInAction",["lodash","utils","core/components/actionsAspectActions/baseAction","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e){"use strict";function h(){c.apply(this,arguments),this._currentScroll={x:0,y:0},e.isOpen("sv_popups")&&(this._currentPopupScroll={x:0,y:0})}var f=.2,g=.15;return h.prototype=a.create(c.prototype,{constructor:h,ACTION_TRIGGERS:[d.SCROLL,d.RESIZE,d.ACTIONS_ADDED_LAYOUTED,d.ACTIONS_REMOVED,d.DID_LAYOUT],ACTION_NAME:"screenIn",ACTIONS_SUPPORTED:["screenIn"],getComponentParent:function(a){return this._aspectSiteAPI.getPageById(a)},isComponentInViewport:function(a){var c=e.isOpen("sv_popups")&&this._aspectSiteAPI.getCurrentPopupId()===a.pageId?this._currentPopupScroll:this._currentScroll;return b.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,a.sourceId)||b.viewportUtils.isInViewport(this._aspectSiteAPI,c,a.sourceId,g)||this.isChildOfFixedFooter(a.pageId,a.sourceId)},isChildOfFixedFooter:function(a,b){var c=!1,d=this._aspectSiteAPI.getSiteData().measureMap.custom.SITE_FOOTER;if("masterPage"===a&&d&&d.isFixedPosition){var e=this._aspectSiteAPI.getMasterPage().refs.SITE_FOOTER;c=this.isDescendantOf(e.props.structure,b)}return c},isDescendantOf:function(b,c){return b.components?a.some(b.components,function(a){return a.id===c?!0:this.isDescendantOf(a,c)},this):!1},runAction:function(){var b=a(this._currentActions).omit(a.keys(this._triggeredOnce)).pick(this.isComponentInViewport).keys().value();this.triggerActions(b)},handleActionTrigger:function(b){switch(this._currentScroll=this._aspectSiteAPI.getSiteScroll(),e.isOpen("sv_popups")&&(this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll()),b){case d.ACTIONS_REMOVED:this._triggeredOnce=a.omit(this._triggeredOnce,a.keys(a.toArray(arguments)[1]));break;case d.DID_LAYOUT:case d.SCROLL:case d.RESIZE:case d.ACTIONS_ADDED_LAYOUTED:case d.PAGE_CHANGED:var c=1e3*Math.max(this._delayActionByTransitionDuration-f,0);c>0?a.delay(function(){this._delayActionByTransitionDuration=0,this.executeOnNextTick(this.runAction)}.bind(this),c):this.executeOnNextTick(this.runAction)}},shouldEnable:function(){var a="undefined"!=typeof window;return a},resetActionState:a.noop}),h}),define("core/components/actionsAspectActions/modeChangeAction",["lodash","zepto","utils","animations","core/components/actionsAspectActions/triggerTypesConsts","reactDOM"],function(a,b,c,d,e,f){"use strict";function k(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._behaviorsById={},this.playingSequences={},this.componentAnimationsInfo={}}var g={ENTER:c.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:c.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:c.siteConstants.Animations.Modes.AnimationType.TRANSITION},h={};h[g.ENTER]=g.LEAVE,h[g.LEAVE]=g.ENTER;var i={};i[g.ENTER]="modeIn",i[g.LEAVE]="modeOut",i[g.TRANSITION]="modeChange";var j={"wysiwyg.viewer.components.SiteButton":c.siteConstants.Animations.TransitionType.NO_SCALE,"wysiwyg.viewer.components.WRichText":c.siteConstants.Animations.TransitionType.NO_SCALE};return k.prototype=a.create(Object.prototype,{constructor:k,ACTION_TRIGGERS:[e.MODE_CHANGED_INIT,e.MODE_CHANGED_EXECUTE],ACTION_NAME:["modeChange","modeIn","modeOut"],shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice();return a&&!b&&!c},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),d.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,d.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._behaviorsById),this._behaviorsById={},this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},needToRunPreConditions:function(){return!1},_executeActionOnTick:function(){this._animateOnNextTick&&(this._executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){this._behaviorsById={},a.forEach(this.playingSequences,function(a,b){var c=this.getComponentPage(a.parentId);c.stopSequence(a.sequence.getId(),1),this.handleSequenceEnded(b,a.parentId,a.type)},this),a.forEach(this.componentAnimationsInfo,function(a,b){a.hasPendingAnimation=!1,this.handleSequenceEnded(b,a.pageId,a.type)},this)},_executeAction:function(){a.isEmpty(this._behaviorsById)||a.assign(this.playingSequences,this.playJsAnimations())},executeAction:function(){this.handleTrigger.apply(this,arguments)},clearPlayedBehaviors:function(b){this._behaviorsById=a.omit(this._behaviorsById,function(a,c){return b[c]})},convertBehaviorTimingFunctionToCSS:function(a){return c.siteConstants.Animations.TimingFunctions[a]},clearCssTransitionFromNode:function(a){a.css({"transition-duration":"","transition-delay":"","transition-timing-function":"","-webkit-transition-timing-function":"","-moz-transition-timing-function":"","-o-transition-timing-function":""})},addCssTransitionToNode:function(a,b){var c=this.convertBehaviorTimingFunctionToCSS(a.params.timingFunction);b.css({"transition-duration":a.duration+"s !important","transition-delay":a.delay+"s !important","transition-timing-function":c+" !important","-webkit-transition-timing-function":c+" !important","-moz-transition-timing-function":c+" !important","-o-transition-timing-function":c+" !important"})},initCssTransitions:function(){var c=a.filter(this._behaviorsById,{animationType:"transition"});c.length&&a.forEach(c,function(a){var c=a.targetId,d=b(this.getComponentNode(a.pageId,c));this.componentAnimationsInfo[c].didCssTransitionStartExecuting||(this.componentAnimationsInfo[c].didCssTransitionStartExecuting=!0,this.addCssTransitionToNode(a,d))},this)},handleSequenceEnded:function(a,c,d){d===g.TRANSITION&&this.clearCssTransitionFromNode(b(this.getComponentNode(c,a))),delete this.playingSequences[a],this.notifyAnimationEnded(a)},playJsAnimations:function(){var b={},c={};return a.forEach(this._behaviorsById,function(a){var d=this.getComponentPage(a.pageId),e=a.targetId,f=this.playingSequences[e],g=f&&h[f.type]===a.animationType,i=f&&f.type===a.animationType;if(b[e]=!0,!i){if(g)return void this.reverseAnimation(a);f&&d.stopSequence(f.sequence.id),c[e]={sequence:d.sequence(),parentId:a.pageId,type:a.animationType},this.addAnimationToSequence(a,this.componentAnimationsInfo[a.targetId],c[a.targetId].sequence)}},this),a.forEach(c,this.executeSequenceIfNeeded,this),this.clearPlayedBehaviors(b),c},reverseAnimation:function(a){var b=a.targetId,c=this.getComponentPage(a.pageId),d=this.playingSequences[b];d.type=a.animationType,this.componentAnimationsInfo[b].hasPendingAnimation=!1,c.reverseSequence(d.sequence.getId())},executeSequenceIfNeeded:function(a,b){var c=a.sequence;if(c.hasAnimations()){var d=this.componentAnimationsInfo[b].progress,e=this.handleSequenceEnded.bind(this,b,a.parentId,a.type);this.componentAnimationsInfo[b].hasPendingAnimation=!1,c.onCompleteAll(e),c.onReverseAll(e),d&&c.onInit(function(a){a.progress(1-d)}),c.execute()}},getComponentPage:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()},getComponentNode:function(a,b){var c=this.getComponentPage(a),d=c.refs[b];return d?f.findDOMNode(d):null},addAnimationToSequence:function(b,d,e){var f=this.getComponentPage(b.pageId),h=b.targetId;if(!f.refs[h])return null;var i=f.refs[h].props.structure,k=a.get(i,"layout.rotationInDegrees"),l="clip,opacity"+(k?"":",transform"),m=b.duration,n=b.delay;if(b.animationType===g.TRANSITION){var o=d.prevLayout,p=b.name+(j[i.componentType]||c.siteConstants.Animations.TransitionType.SCALE);e.add(h,p,m,n,{from:o})}else e.add(h,b.name,m,n,b.params,0);return e.add(h,"BaseClear",0,0,{props:l,immediateRender:!1}),h},hideElementsByAnimationType:function(b){a.forEach(b,function(a,b){if(d.getProperties(a.name).hideOnStart){var c=this.getComponentNode(a.pageId,b);c.style.visibility="hidden"}},this)},revertHideElementsByAnimationType:function(b){a.forEach(b,function(b){a.forEach(b,function(a,b){if(d.getProperties(a.name).hideOnStart){var c=this.getComponentNode(a.pageId,b);c.style.visibility=""}},this)},this)},shouldBehaviorBePlayed:function(a,b){return"modeIn"===b.action&&"enter"===a[b.targetId]||"modeOut"===b.action&&"leave"===a[b.targetId]||"modeChange"===b.action&&"transition"===a[b.targetId]},getBehaviorsToPlay:function(b,c){var d=a.filter(b,this.shouldBehaviorBePlayed.bind(this,c));return d=a.map(d,function(b){var d=a.clone(b);return d.animationType=c[b.targetId],d}),a.indexBy(d,"targetId")},initiateBehaviors:function(b,c,d,e){var f=this.getBehaviorsToPlay(this._behaviors,c);this._behaviorsById=a.assign(this._behaviorsById,f),a.forEach(c,function(a,c){var f=this.componentAnimationsInfo[c]=this.componentAnimationsInfo[c]||{};f.pageId=b,f.type=a,f.hasPendingAnimation=!0,f.onComplete=e,a===g.TRANSITION&&(f.prevLayout=d[c])},this)},handleBehaviorsUpdate:function(a){this._behaviors=a},runJsAnimationsOnNextTick:function(){this._animateOnNextTick=!0},notifyAnimationEnded:function(a){if(this.componentAnimationsInfo[a]&&!this.componentAnimationsInfo[a].hasPendingAnimation){var b={};b[a]=this.componentAnimationsInfo[a].type;var c=this.componentAnimationsInfo[a].onComplete;delete this.componentAnimationsInfo[a],c(b)}},getCompRegisteredBehaviorsByAction:function(b,c){return a.filter(this._behaviors,{targetId:b,action:c})},filterCompAnimationWithNoCompatibleBehaviors:function(b){return a.pick(b,function(b,c){var d=this.getCompRegisteredBehaviorsByAction(c,i[b]);return a.isEmpty(d)}.bind(this))},filterCompAnimationThatHaveCompatibleBehaviors:function(b){return a.pick(b,function(b,c){var d=this.getCompRegisteredBehaviorsByAction(c,i[b]);return!a.isEmpty(d)}.bind(this))},handleDidLayout:function(){this._aspectSiteAPI.unRegisterFromDidLayout(),this.runJsAnimationsOnNextTick()},handleReverseTransitionAnimations:function(b){var c=a.transform(b,function(a,b,c){b===g.TRANSITION&&a.push(c)},[]),d=a.transform(this.playingSequences,function(a,b,c){b.type===g.TRANSITION&&a.push(c)},[]),e=a.intersection(c,d);a.forEach(e,function(a){var b=this.componentAnimationsInfo[a],c=this.getComponentPage(b.pageId),d=this.playingSequences[a].sequence.getId(),e=c.getSequence(d),f=this.getComponentNode(b.pageId,a);b.progress=e.progress(),e.set(f,{clearProps:"clip,opacity,transform"}),c.stopSequence(d,1),delete this.playingSequences[a]},this)},handleTrigger:function(a,b){if(!this._isEnabled)return void(b&&b.onComplete&&b.onComplete(b.componentAnimations));switch(a){case e.MODE_CHANGED_INIT:var c=this.filterCompAnimationThatHaveCompatibleBehaviors(b.componentAnimations),d=this.filterCompAnimationWithNoCompatibleBehaviors(b.componentAnimations);this.initiateBehaviors(b.pageId,c,b.transitioningComponentsPrevLayout,b.onComplete),this.handleReverseTransitionAnimations(b.componentAnimations),this.initCssTransitions(),b.onComplete(d);break;case e.MODE_CHANGED_EXECUTE:this.hideElementsByAnimationType(this._behaviorsById),this._aspectSiteAPI.registerToDidLayout(this.handleDidLayout.bind(this))}}}),k}),define("core/components/actionsAspectActions/pageTransitionAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";function e(a,b){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=b,this._isEnabled=!1,this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null}return a.assign(e.prototype,{ACTION_TRIGGERS:[d.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled=!0},disableAction:function(){this._isEnabled=!1},isEnabled:function(){return this._isEnabled},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData),this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null},handleTrigger:function(b){this._isEnabled||a.isEmpty(this._nextPageTransition)||(this._nextPageTransition.duration=0,this._nextPageTransition.transitionName="NoTransition"),b===d.PAGE_CHANGED&&this.executeAction()},handleBehaviorsUpdate:function(a){this._behaviors=a},registerNextPageTransition:function(a,b,c,d,e,f,g,h){this._nextPageTransition={comp:a,previousRef:b,currentRef:c,transitionName:d,duration:e,delay:f,params:g,callbacks:h}},registerNextBGPageTransition:function(a,b,c,d){this._nextPageBGTransition={comp:a,previousRef:b,currentRef:c,callbacks:d}},registerNextAnchorScroll:function(a){this._nextPageInitialScrollData=a},disableNextAnchorScroll:function(){this._isNextAnchorScrollDisabled=!0},getNormalizedTransitionDuration:function(a,b){b=b||{};var c=1.2,d=a;return b.width?d=a*b.width/b.siteWidth:b.height&&(d=a*(Math.max(b.height,b.screenHeight)/b.screenHeight)),Math.min(d,c)},executeTransitions:function(d,e,f){var j,k,g=this._aspectSiteAPI,h="function"==typeof d.params?d.params():d.params,i=this.getNormalizedTransitionDuration(d.duration||0,h);if(!a.isEmpty(d)){j=d.comp.sequence(),k=d.callbacks||{},k.onStart&&j.onStartAll(k.onStart),k.onInterrupt&&j.onInterruptAll(k.onInterrupt),k.onComplete&&j.onCompleteAll(k.onComplete);var l={sourceRefs:d.previousRef,destRefs:d.currentRef};j.add(l,d.transitionName,i,d.delay,h).add([d.previousRef,d.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:!1}).execute()}a.isEmpty(e)||e.comp.transition(e.previousRef,e.currentRef,d.transitionName,i,d.delay,h,e.callbacks);var m=g.getSiteData(),n=c.scrollAnchors.calcAnchorScrollToPosition(f,g);return f=n.anchorQuery,this._isNextAnchorScrollDisabled?void(this._isNextAnchorScrollDisabled=!1):void b.animate("BaseScroll",g.getSiteContainer(),i,d.delay,{x:n.x||0,y:n.y||0,callbacks:{onComplete:function(){var a=this._aspectSiteAPI.getSiteAspect("anchorChangeEvent");a&&a.setSelectedAnchorAsync(m,f,m.getPrimaryPageId(),c.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)}.bind(this)}})}}),e}),define("core/components/actionsAspectActions/exitAction",["lodash","animations","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._pendingComponentExits=[]}return d.prototype=a.create(Object.prototype,{constructor:d,ACTION_TRIGGERS:[c.PAGE_CHANGED,c.PAGE_RELOADED],ACTION_NAME:"exit",shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this._pendingComponentExits=[],this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},executeAction:function(){if(!a.isEmpty(this._pendingComponentExits)){var b=this._pendingComponentExits;this._pendingComponentExits=[],a.forEach(b,function(a){this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations(a.leavingCompIds,a.callback))},this)}},playPageAnimations:function(b,c){function i(){h--,0===h&&c()}var d={},e={},f=[],g=a(this._behaviors).filter(function(c){return c.action===this.ACTION_NAME&&a.includes(b,c.sourceId)},this).indexBy("sourceId").value();a.forEach(g,function(a){var b=this.getComponentParent(a.pageId);b.refs[a.sourceId]&&(e[a.pageId]||(e[a.pageId]=b.sequence(),d[a.pageId]=[]),d[a.pageId].push(this.addAnimationToSequence(a,e)))},this);var h=1;return a.forEach(e,function(b,c){b.hasAnimations()&&(h++,b.onCompleteAll(i),d[c]=a.compact(d[c]),f.push({parentId:c,sequenceId:b.getId()}),b.execute())},this),i(),f},getComponentParent:function(a){return this._aspectSiteAPI.getPageById(a)},addAnimationToSequence:function(b,c){var d,e,f,g,h=c[b.pageId];return g=this.getComponentParent(b.pageId),f=g.refs[b.targetId].props.structure,e=a.get(f,"layout.rotationInDegrees"),d="clip,opacity"+(e?"":",transform"),h.add(b.targetId,b.name,b.duration,b.delay,b.params,0),h.add(b.targetId,"BaseClear",0,0,{props:d,immediateRender:!1}),b.targetId},registerComponentsExit:function(a,b){this._pendingComponentExits.push({leavingCompIds:a,callback:b}),this._isEnabled?this._animateOnNextTick=!0:b()},handleTrigger:function(){},handleBehaviorsUpdate:function(a){this._behaviors=a},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){a.forEach(this._liveSequenceIds,function(a){
var b=this.getComponentParent(a.parentId);b&&b.stopSequence(a.sequenceId,1)},this),this._liveSequenceIds=[]}}),d}),define("core/components/siteAspects/actionsAspect",["lodash","core/core/siteAspectsRegistry","core/components/actionsAspectActions/bgScrubAction","core/components/actionsAspectActions/loadAction","core/components/actionsAspectActions/screenInAction","core/components/actionsAspectActions/modeChangeAction","core/components/actionsAspectActions/pageTransitionAction","core/components/actionsAspectActions/exitAction","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(b){this._aspectSiteAPI=b,this._siteData=b.getSiteData(),this._behaviors=[],this._pageTransitionComplete=[],this._isDuringPageTransition=!1,this._navigationComplete=[],this._actions={},this._previouslyRegisteredPages=[],this._didFirstLayout=!1,this._didPageChange=!1,this.registerAction(c),j.isOpen("sv_popups")&&this.registerAction(d),this.registerAction(e),this.registerAction(g),this.registerAction(h),j.isOpen("sv_hoverBox")&&this.registerAction(f),this.enableAction("pageTransition"),"preview"===a.get(this._siteData,["renderFlags","componentViewMode"],"preview")&&(this.enableAction("bgScrub"),this.enableAction("screenIn"),this.enableAction("exit"),j.isOpen("sv_hoverBox")&&this.enableAction("modeChange"),j.isOpen("sv_popups")&&this.enableAction("load")),this._registerTriggers(),b.registerToAddedRenderedRootsDidLayout(l.bind(this))}function l(b){a.some(b,this._siteData.isPopupPage,this._siteData)&&this.handleNavigationComplete()}k.prototype.previewAnimation=function(a,b,c,d){var e=this._aspectSiteAPI.getPageById(b),f=e.sequence(),g={props:"clip,opacity,transform,transform-origin",immediateRender:!1};return f.add(a,c.name,c.duration,c.delay,c.params),f.add(a,"BaseClear",0,0,g),d&&f.onCompleteAll(d),f.execute()},k.prototype.previewTransition=function(a,b,c,d,e){var f;if(f="masterPage"===c?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var g=f.sequence(),h={props:"clip,opacity,transform,transform-origin",immediateRender:!1};return g.add({sourceRefs:a,destRefs:b},d.name,d.duration,d.delay,d.params),g.add(a.concat(b),"BaseClear",0,0,h),e&&g.onCompleteAll(e),g.execute()}},k.prototype.stopPreviewAnimation=function(a){var c,b=this._aspectSiteAPI.getMasterPage();c=j.isOpen("sv_popups")?this._aspectSiteAPI.getCurrentPopup()||this._aspectSiteAPI.getCurrentPage():this._aspectSiteAPI.getCurrentPage(),c.stopSequence(a,1),b.stopSequence(a,1)},k.prototype.enableAction=function(a){this._actions[a]&&this._actions[a].shouldEnable()&&this._actions[a].enableAction()},k.prototype.isActionDisabled=function(a){return this._actions[a]&&!this._actions[a].isEnabled()},k.prototype.needToRunPreConditions=function(a){var b=a.name;return!this._actions[b]||!this._actions[b].needToRunPreConditions||this._actions[b].needToRunPreConditions(a)},k.prototype.disableAction=function(a){this._actions[a]&&this._actions[a].disableAction()},k.prototype.executeAction=function(b,c){var d=a.drop(arguments,2);if(this._actions[b]){var e=this._actions[b];e.executeAction.apply(e,[c].concat(d))}},j.isOpen("sv_hoverBox")||(k.prototype.isPageRegistered=function(b){return a.includes(this._previouslyRegisteredPages,b)},k.prototype.setPageAsRegistered=function(a){this.isPageRegistered(a)||this._previouslyRegisteredPages.push(a)}),k.prototype.registerBehaviors=function(b,c,d){d=a.isString(d)?JSON.parse(d):d,d=a.map(d,function(d){return a.assign(d,{pageId:c,sourceId:b,targetId:d&&d.targetId||b})}),this.unRegisterBehaviors(b,d,!1),this._behaviors=this._behaviors.concat(d),this._propagateBehaviorsUpdate(this._behaviors)},k.prototype.unRegisterBehaviors=function(b,c,d){d=d!==!1,a.forEach(c,function(c){this._behaviors=a.reject(this._behaviors,{sourceId:b,action:c&&c.action,name:c&&c.name})},this),d&&this._propagateBehaviorsUpdate(this._behaviors)},k.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[],this._behaviors=[],this._propagateBehaviorsUpdate(this._behaviors)},k.prototype.registerNextPageTransition=function(a,b,c,d,e,f,g,h){this._isDuringPageTransition=!0,this._actions.pageTransition.registerNextPageTransition(a,b,c,d,e,f,g,h),this._actions.screenIn.registerPageTransitionDuration(e)},k.prototype.registerPageTransitionComplete=function(b){a.isFunction(b)&&this._pageTransitionComplete.push(b)},k.prototype.handlePageTransitionComplete=function(b,c){this._isDuringPageTransition=!1,a.forEach(this._pageTransitionComplete,function(a){a(b,c)}),this._pageTransitionComplete=[],this.handleNavigationComplete()},k.prototype.isDuringPageTransition=function(){return this._isDuringPageTransition},k.prototype.registerNavigationComplete=function(b){a.isFunction(b)&&this._navigationComplete.push(b)},k.prototype.handleNavigationComplete=function(){this._isDuringPageTransition||(a.forEach(this._navigationComplete,function(a){a()}),this._navigationComplete=[])},k.prototype.registerNextBGPageTransition=function(a,b,c,d){this._actions.pageTransition.registerNextBGPageTransition(a,b,c,d)},k.prototype.registerNextAnchorScroll=function(a){this._actions.pageTransition.registerNextAnchorScroll(a)},k.prototype.disableNextAnchorScroll=function(){this._actions.pageTransition.disableNextAnchorScroll()},k.prototype.registerComponentsExit=function(a,b){this._actions.exit.registerComponentsExit(a,b)},k.prototype.registerAction=function(b){var c=new b(this._aspectSiteAPI),d=[].concat(c.ACTION_NAME);a.forEach(d,function(a){if(this._actions[a])throw new Error("Action "+a+" already registered");if(!a)throw new Error("Action missing it's ACTION_NAME parameter, cannot register it");this._actions[a]=c},this)},k.prototype._propagateTrigger=function(b){var c=arguments;a.forEach(this._actions,function(d){a.includes(d.ACTION_TRIGGERS,b)&&d.handleTrigger.apply(d,c)})},k.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._didPageChange||!this._didFirstLayout){var a=this._aspectSiteAPI.getSiteData(),b=a.getExistingRootNavigationInfo(a.getPrimaryPageId()),c=this._aspectSiteAPI.getSiteAspect("siteMembers").isPageAllowed(b);c&&this._propagateTrigger(i.PAGE_CHANGED)}this._didPageChange=!1,this._propagateTrigger(i.DID_LAYOUT)},k.prototype._enablePageChangeTransitionsAfterLayout=function(){this._didFirstLayout?this._didPageChange=!0:this._didFirstLayout=!0},k.prototype.reloadPageAnimations=function(){this._propagateTrigger(i.PAGE_RELOADED)},k.prototype._propagateBehaviorsUpdate=function(b){a.forEach(this._actions,function(c){c.handleBehaviorsUpdate(a.cloneDeep(b))})},k.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,i.SITE_READY)),this.registerPageTransitionComplete(this._propagateTrigger.bind(this,i.TRANSITION_ENDED)),this._aspectSiteAPI.registerToUrlPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),j.isOpen("sv_popups")&&this._aspectSiteAPI.registerToPopupChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this)),this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,i.SCROLL)),this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,i.RESIZE)),j.isOpen("sv_hoverBox")&&(this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,i.MODE_CHANGED_INIT)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,i.MODE_CHANGED_EXECUTE)))},k.prototype.actionsRemoved=function(a){this._propagateTrigger(i.ACTIONS_REMOVED,a)},k.prototype.actionsAddedLayouted=function(a){this._propagateTrigger(i.ACTIONS_ADDED_LAYOUTED,a)},b.registerSiteAspect("actionsAspect",k)}),define("core/components/siteAspects/DynamicClientSpecMapAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function d(a){var b=a.replace(/\/$/,"")+"/_api/dynamicmodel";return c&&(b=b.replace(/^[^:]+:/,window.location.protocol)),b}function f(a,b,c){var f="error",g={url:d(a.getExternalBaseUrl()),destination:["dynamicClientSpecMapLoaded"],force:c,cache:e,syncCache:!0,transformFunc:function(){return!0},callback:function(c,d){f="success",d.clientSpecMap&&(a.rendererModel.clientSpecMap=d.clientSpecMap),d.svSession&&a.pubSvSession(d.svSession),d.hs&&(a.hs=d.hs),d.ctToken&&(a.ctToken=d.ctToken),b&&b(d)}};a.store.loadBatch([g],function(){"error"===f&&b({status:f})}),e=!1}function g(a){var b=a.getSiteData();if(this.reloadClientSpecMap=function(a,c){b&&b.isViewerMode()&&f(b,a,c)},c){var d=!1;this.reloadClientSpecMap(function(c){b.dynamicModelState="error"===c.status?"error":"success",d&&a.forceUpdate()},!0),d=!0}}var c="undefined"!=typeof window,e=!0;b.registerSiteAspect("dynamicClientSpecMap",g)}),define("core/components/siteAspects/dynamicColorsAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var c=this.aspectSiteAPI.getSiteData().measureMap;return c?{top:c.absoluteTop[a],left:b.get(c,"custom["+a+"].backgroundLeft",0)+c.absoluteLeft[a],height:c.height[a],width:b.get(c,"custom["+a+"].backgroundWidth",c.width[a])}:{}}function d(a,c){return!b.isEqual(b.pick(a,"height","top","left","width"),c)}function e(a){var e=c.call(this,a.id);d(a,e)&&(b.assign(a,e),a.isDirty=!0)}function f(){b.forEach(this.colorElementInfo,e,this)}function g(a){b.forEach(a,function(a){delete a.isDirty})}function h(a){b.forEach(this.observers,function(b){b(a)},this)}function i(){f.call(this);var a=b.filter(this.colorElementInfo,"isDirty");a.length&&(h.call(this,a),g(a))}function j(a){this.aspectSiteAPI=a,this.colorElementInfo={},this.observers=[],a.registerToDidLayout(i.bind(this))}j.prototype={updateInformation:function(a,c){var d=this.colorElementInfo[a],f=b.assign({id:a},d,c);e.call(this,f),b.isEqual(f,d)||(this.colorElementInfo[a]=f,h.call(this,[f]),g([f]))},getInformation:function(a){return a?b.cloneDeep(this.colorElementInfo[a]):b.cloneDeep(this.colorElementInfo)},registerObserver:function(a){this.observers.push(a)},unregisterObserver:function(a){b.pull(this.observers,a)}},a.registerSiteAspect("dynamicColorElements",j)}),define("core/components/siteAspects/VideoBackgroundAspect",["lodash","utils","core/core/siteAspectsRegistry","animations","experiment"],function(a,b,c,d,e){"use strict";function i(b){var c=a.find(b,{quality:f});if(!c){var d=a.last(b);parseInt(d.quality,10)<parseInt(f,10)&&(c=d)}return c||{}}function j(a,c,d){var e=c.formats[0];return b.urlUtils.joinURL(d.getSiteData().getStaticVideoHeadRequestUrl(),a,c.quality,e,"file."+e)}function k(a,b){var c=a.getSiteData(),d=c.getFocusedRootId(),f=c.getDataByQuery(b,d);return e.isOpen("designData")&&(f=f||c.getDataByQuery(b,d,"design_data")),f}function l(b,c){if(b.testingQuality=i(b.qualities),b){var d=m(b);if("undefined"!=typeof window&&d>0){clearTimeout(b.timerInterval);var e=this.loadDummyVideo.bind(this,c,b.testingQuality);b.timerInterval=setTimeout(e,d)}else b.qualities=a.filter(b.qualities,{quality:b.readyQuality.quality})}}function m(b){var c=a.now()-b.timeStamp;if(c>4*b.duration)return 0;var d=c>b.duration&&c<=2*b.duration?4:8;return Math.max(g,b.duration/d)}function n(a){this.siteAPI=a,this.isEnabled=!0,this.playingChangeList=[],this.notifyQualityReadyList=[],this.shouldPlayOnNextTick=!1,this.currentScroll={x:0,y:0},this.currentPopupScroll={x:0,y:0},this._lastVisitedPageId=null,this.registerdVideoComponents=[],this.videoAvailabilityCollection=[],a.registerToDidLayout(this.playOnDidLayout.bind(this)),a.registerToScroll(this.playOnNextTick.bind(this)),a.registerToSlideChange(this.playOnSlideChange.bind(this)),a.registerToVisibilityChange(this.togglePlayStateByVisibility.bind(this)),"undefined"!=typeof window&&(this._tickerCallback=this.playOnTick.bind(this),d.addTickerEvent(this._tickerCallback))}var f="1080p",g=5e3,h={IN_PROCESS:"in_process",PLAYING_PREVIEW:"playing_preview",IDLE:"idle",NO_VIDEO:"no_video"};return n.prototype=a.create(Object.prototype,{constructor:n,playOnNextTick:function(){this.shouldPlayOnNextTick=this.isEnabled,this.currentScroll=this.siteAPI.getSiteScroll(),e.isOpen("sv_popups")&&(this.currentPopupScroll=this.siteAPI.getCurrentPopupScroll())},playOnSlideChange:function(){this.togglePlayStateByVisibility()},playOnDidLayout:function(){if(this.isEnabled){var b=this.siteAPI.getSiteData(),c=b.getFocusedRootId(),d=b.getExistingRootNavigationInfo(b.getPrimaryPageId()),e=a.isEmpty(d)?!1:this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(d);e&&c&&this._lastVisitedPageId!==c&&(this._lastVisitedPageId=c,this.togglePlayStateByVisibility())}},playOnTick:function(){this.shouldPlayOnNextTick&&(this.shouldPlayOnNextTick=!1,this.playAll())},togglePlayStateByVisibility:function(){var a=this.siteAPI.getVisibilityState();a.hidden?(this.shouldPlayOnNextTick=!1,this.pauseAll()):this.playOnNextTick()},playAll:function(b){var c=this.getCurrentPageVideos();a.forEach(c,function(a){this.play(a.compId,!b)},this)},play:function(b,c){var d=a.find(this.registerdVideoComponents,{compId:b});if(!a.isEmpty(d)){var e=this.getQuality(b);this.isComponentInViewport(d.structureComponentId)?d.compInstance.play(e,c):d.compInstance.pause()}},stopAll:function(){var b=this.getCurrentPageVideos();a.forEach(b,function(a){this.stop(a.compId)},this)},stop:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});c&&c.compInstance.stop()},pauseAll:function(){var b=this.getCurrentPageVideos();a.forEach(b,function(a){this.pause(a.compId)},this)},pause:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});c&&c.compInstance.pause()},enableVideoPlayback:function(a){this.isEnabled=!0,a||this.playAll(!0)},disableVideoPlayback:function(a){this.isEnabled=!1,this._lastVisitedPageId=null,this.shouldPlayOnNextTick=!1,a||this.stopAll()},getQuality:function(b){var c=a.find(this.registerdVideoComponents,{compId:b}),d=a.find(this.videoAvailabilityCollection,{videoId:c.videoId});return d.readyQuality||d.testingQuality},loadDummyVideo:function(a,c){b.ajaxLibrary.ajax({url:j(a,c,this.siteAPI),type:"HEAD",success:this._canPlay.bind(this,a),error:this._onError.bind(this,a)})},getReadyState:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});return a.isEmpty(c)?h.NO_VIDEO:this.getVideoReadyState(c.videoId)},getVideoReadyState:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});return c&&c.readyQuality?i(c.qualities).quality===c.readyQuality.quality?h.IDLE:h.PLAYING_PREVIEW:h.IN_PROCESS},getCurrentPageVideos:function(){return this.registerdVideoComponents},isPlaying:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});return c&&c.compInstance&&c.compInstance.isPlaying()},isComponentInViewport:function(a){var c,d=this.currentScroll;return e.isOpen("sv_popups")&&(c=this.siteAPI.getCurrentPopupId(),c&&c===this.siteAPI.getRootOfComponentId(a)&&(d=this.currentPopupScroll)),b.viewportUtils.isAlwaysInViewport(this.siteAPI,a)||b.viewportUtils.isInViewport(this.siteAPI,d,a)},_onError:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});if(c){var d=c.testingQuality.quality,e=a.findIndex(c.qualities,{quality:d}),f=e-1;f>=0&&!this._isNextQualityReady(f,c)?(c.testingQuality=c.qualities[f],this.loadDummyVideo(b,c.testingQuality)):l.call(this,c,b)}},_isNextQualityReady:function(a,b){return b.readyQuality&&b.readyQuality.quality===b.qualities[a].quality},_canPlay:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});if(c){c.readyQuality=c.testingQuality;var d=a.filter(this.registerdVideoComponents,{videoId:b});this.getVideoReadyState(b)!==h.IDLE&&l.call(this,c,b),this.notifyQualityReady(c.readyQuality,b),a.forEach(d,function(a){this.notifyPlayingChanged(a.compId)},this)}},unregisterToQualityAvailability:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});if(c){var d=a.find(this.videoAvailabilityCollection,{videoId:c.videoId});"undefined"==typeof window||a.isEmpty(d)||(1===d.compCount&&this.getVideoReadyState(d.videoId)!==h.IDLE?(clearInterval(d.timerInterval),this.videoAvailabilityCollection=a.reject(this.videoAvailabilityCollection,"videoId",c.videoId)):d.compCount--)}},registerToQualityAvailability:function(b){var c=k(this.siteAPI,b.videoItemRef),d=a.find(this.videoAvailabilityCollection,{videoId:b.videoId});a.isEmpty(d)?(d={videoId:b.videoId,readyQuality:null,testingQuality:i(c.qualities),qualities:c.qualities,timeStamp:(new Date).getTime(),duration:1e3*c.duration,compCount:1,timerInterval:0},this.videoAvailabilityCollection.push(d),this.loadDummyVideo(b.videoId,d.testingQuality)):d.compCount++},registerVideo:function(b,c,d,e,f){var g=k(this.siteAPI,d),h={compId:b,structureComponentId:c,videoId:g.videoId,videoItemRef:d,compInstance:f};a.find(this.registerdVideoComponents,{compId:b})&&this.unregisterVideo(b),this.registerdVideoComponents.push(h),this.registerToQualityAvailability(h),this.registerToQualityReady(b,h.videoId,e)},unregisterVideo:function(b){this.unregisterToQualityAvailability(b),this.registerdVideoComponents=a.reject(this.registerdVideoComponents,"compId",b),this.unregisterToQualityReady(b)},registerToQualityReady:function(a,b,c){this.notifyQualityReadyList.push({id:a,videoId:b,callback:c})},registerToPlayingChange:function(a,b){this.playingChangeList.push({id:a,callback:b})},unregisterToQualityReady:function(b){this.notifyQualityReadyList=a.reject(this.notifyQualityReadyList,"id",b)},unregisterToPlayingChange:function(b){this.playingChangeList=a.reject(this.playingChangeList,"id",b)},notifyPlayingChanged:function(b){var c=a.find(this.playingChangeList,{id:b});c&&c.callback&&c.callback(this.isPlaying(b))},notifyQualityReady:function(b,c){var d=a.filter(this.notifyQualityReadyList,{videoId:c});a.forEach(d,function(a){a.callback&&a.callback(b,a.videoId)})},willUnmount:function(){d.removeTickerEvent(this._tickerCallback),"undefined"!=typeof window&&a.forEach(this.videoAvailabilityCollection,function(a){clearTimeout(a.timerInterval)})}}),c.registerSiteAspect("VideoBackgroundAspect",n),n}),define("core/components/siteAspects/touchEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";function h(a){g=a,i()}function i(){f.forEach(function(a){e[a]={},g.registerToWindowTouchEvent(a,j)},this)}function j(b){var j,c=b.type.slice("touch".length),f="WindowTouch"+d.capitalize(c),h=e[b.type],i="on"+f;a.forEach(h,function(a){j=g.getComponentById(a),j?j[i]&&j[i](b):delete h[a]},this)}var g,d=c.stringUtils,e={},f=["touchstart","touchmove","touchend","touchcancel"];h.prototype={registerToWindowTouchEvent:function(a,b){e[a.toLowerCase()][b.props.id]=b.props.id},unregisterFromWindowTouchEvent:function(a,b){delete e[a.toLowerCase()][b.props.id]}},b.registerSiteAspect("windowTouchEvents",h)}),define("core/components/siteAspects/anchorLinkChangeEventAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a,this._registeredCompCallbacks={},this._activeAnchor=null,a.registerToScroll(this.onScroll.bind(this))}function e(c,d,e){e=e||c.currentPageInfo.pageId;var f=b.scrollAnchors.getPageAnchors(c,e),g=b.scrollAnchors.getSortedAnchorsByY(c,f);return a.find(g,"id",d.replace("#",""))}function f(a,b,c){if(b){var d=e(a,b,c);d&&(this._activeAnchor={activeAnchorComp:d},this.propagateAnchorChangeEvent())}}d.prototype={registerToAnchorChange:function(a){a.onAnchorChange&&(this._registeredCompCallbacks[a.props.id]=a.onAnchorChange)},unregisterToAnchorChange:function(a){delete this._registeredCompCallbacks[a.props.id]},onScroll:function(){if(!a.isEmpty(this._registeredCompCallbacks)){var c=this._aspectSiteAPI.getSiteData(),d=window.pageYOffset||(c.isMobileView()?document.scrollTop:document.body.scrollTop),e=b.scrollAnchors.getActiveAnchor(c,d);(null===this._activeAnchor&&e||this._activeAnchor&&e&&this._activeAnchor.activeAnchorComp.id!==e.activeAnchorComp.id)&&(this._activeAnchor=e,this.propagateAnchorChangeEvent())}},setSelectedAnchorAsync:function(a,b,c,d){b&&(b=b.replace("#",""),setTimeout(f.bind(this,a,b,c),d))},getActiveAnchor:function(){return this._activeAnchor},propagateAnchorChangeEvent:function(){a.forEach(this._registeredCompCallbacks,function(a){a(this._activeAnchor)},this)}},c.registerSiteAspect("anchorChangeEvent",d)}),define("core/components/siteAspects/siteScrollingBlockerAspect",["core/core/siteAspectsRegistry","lodash","zepto"],function(a,b,c){"use strict";function d(){this._blockersList=[]}function e(){this._scrollCorrection=window.scrollY,c("html").addClass("blockSiteScrolling").css({marginTop:-Math.max(.5,this._scrollCorrection)+"px"})}function f(){c("html").removeClass("blockSiteScrolling").css({marginTop:""}),window.scrollTo(0,this._scrollCorrection)}function g(a,c){var d=b.first(this._blockersList);this._blockersList=c?b(this._blockersList).concat(a).uniq().value():b.without(this._blockersList,a);var g=b.first(this._blockersList);d!==g&&(g?e:f).call(this)}d.prototype.setSiteScrollingBlocked=g,a.registerSiteAspect("siteScrollingBlocker",d)}),define("core/components/siteAspects/SlideShowComponentAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this.callbacks=[]}return c.prototype={reportSlideChange:function(a){this._aspectSiteAPI.notifyAspects("slideChange",a);var b=this.callbacks.shift();b&&b()},registerOnSlideChangeComplete:function(a){a&&this.callbacks.push(a)}},b.registerSiteAspect("SlideShowComponentAspect",c),c}),define("core/components/siteAspects/FormManagerAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this.siteAPI=a,this._formsPerPage={}}return c.prototype={registerCompToForm:function(b,c){var d=this.siteAPI.getSiteData().getPrimaryPageId(),e=this.getFormOfComp(d,b);e&&this.unRegisterCompFromForm(b,e.formName),a.has(this._formsPerPage,d)?a.has(this._formsPerPage,[d,b])||(this._formsPerPage[d][c]=[]):(this._formsPerPage[d]={},this._formsPerPage[d][c]=[]),this._formsPerPage[d][c].push(b)},unRegisterCompFromForm:function(b,c){var d=this.siteAPI.getSiteData().getPrimaryPageId();if(a.has(this._formsPerPage,d)&&a.has(this._formsPerPage,[d,c])){var e=this._formsPerPage[d][c];if(a.includes(e,b)){if(1===e.length)return void delete this._formsPerPage[d][c];var f=e.indexOf(b);e.splice(f,1),this._forms[d][c]=e}}},getCompsOnForm:function(b){var c=this.siteAPI.getSiteData().getPrimaryPageId();if(a.has(this._formsPerPage,c)&&a.has(this._formsPerPage,[c,b]))return this._formsPerPage[c][b]},getFormOfComp:function(b,c){for(var d in this._formsPerPage[b])if(this._formsPerPage[b].hasOwnProperty(d)){var e=this._formsPerPage[b][d];if(a.includes(e,c))return d}return null},isFormExistOnPage:function(b){var c=this.siteAPI.getSiteData().getPrimaryPageId();return a.has(this._formsPerPage,c)?!!a.has(this._formsPerPage,[c,b]):!1}},b.registerSiteAspect("FormManagerAspect",c),c}),define("core/components/siteAspects/RadioGroupsAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(){this.radioGroups={}}return c.prototype={setRadioGroup:function(a,b){if(this.removeRadioFromGroup(a),b){var c=this.radioGroups[b];this.radioGroups[b]=c||{children:[]};var d=this.radioGroups[b].children;this.radioGroups[b].children=d.concat([a])}},removeRadioFromGroup:function(b){var c=a.findKey(this.radioGroups,function(c){return a.includes(c.children,b)});c&&(this.radioGroups[c].selected===b&&delete this.radioGroups[c].value,a.pull(this.radioGroups[c].children,b))},getRadioGroup:function(a){return this.radioGroups[a]},setRadioGroupValue:function(b,c){var d=a.findKey(this.radioGroups,function(c){return a.includes(c.children,b)});d&&(this.radioGroups[d].value=c,this.radioGroups[d].selected=b)}},b.registerSiteAspect("radioGroups",c),c}),define("core/components/siteAspects/aspectsCollector",["core/core/siteAspectsRegistry","core/components/siteAspects/BehaviorsAspect","core/components/siteAspects/animationsAspect","core/components/siteAspects/loginToWixAspect","core/components/siteAspects/parentFrameAspect","core/components/siteAspects/vkPostMessageAspect","core/components/siteAspects/packagePickerAspect","core/core/pageItemAspect","core/core/nonPageItemZoomAspect","core/components/siteAspects/externalScriptLoaderAspect","core/siteRender/SiteMembersAspect","core/components/siteAspects/windowFocusEventsAspect","core/components/siteAspects/windowScrollEventAspect","core/components/siteAspects/windowResizeEventAspect","core/components/siteAspects/windowKeyboardEventAspect","core/components/siteAspects/MobileActionsMenuAspect","core/components/siteAspects/addComponentAspect","core/components/siteAspects/AudioAspect","core/components/siteAspects/actionsAspect","core/components/siteAspects/DynamicClientSpecMapAspect","core/components/siteAspects/dynamicColorsAspect","core/components/siteAspects/VideoBackgroundAspect","core/components/siteAspects/touchEventsAspect","core/components/siteAspects/anchorLinkChangeEventAspect","core/components/siteAspects/siteScrollingBlockerAspect","core/components/siteAspects/SlideShowComponentAspect","core/components/siteAspects/FormManagerAspect","core/components/siteAspects/RadioGroupsAspect"],function(a,b,c){"use strict";a.registerSiteAspect("behaviorsAspect",b),a.registerSiteAspect("animationsAspect",c)}),define("core/components/behaviorHandlers/prefetchPagesBehaviorHandler",["lodash"],function(a){"use strict";var b=function(b,c){var d=c.getSiteData(),e=d.getPagesDataItems(),f=b.params.prefetchFilters,g=a(e).filter(function(b){return a.every(f,function(c,d){return a.includes(c,b[d])})}).map("id").value();if(!a.isEmpty(g)){var h=c.getSiteDataAPI(),i=0;a.forEach(g,function(a){var b={pageId:a};h.loadPage(b,function(){++i,i===g.length&&(d.addPrefetchPages(g),c.forceUpdate())})})}},c=function(){return!0};return{prefetchPages:b,isEnabled:c}}),define("core/components/behaviorHandlers/siteBehaviorHandler",["lodash","experiment","utils","core/components/behaviorHandlers/prefetchPagesBehaviorHandler"],function(a,b,c,d){"use strict";function e(){function a(a){return"editor"===a.renderFlags.componentViewMode}function b(a,b){var c=a.getRuntimeDal();return c.hasBeenPopupOpened(b)}function c(c,d,e){var f=e.targetId;return c.isZoomOpened()?!1:a(d)?!1:b(c,f)||c.isPopupOpened()?!1:d.isMobileView()?Boolean(e.params.openInMobile):Boolean(e.params.openInDesktop)}function d(a){return 1e3*(a.params.delay||0)}var e;return function(a,b){clearTimeout(e);var f=b.getSiteData();c(b,f,a)&&(e=setTimeout(function(d){var e=f.getPrimaryPageId()!==d;e||c(b,f,a)&&b.openPopupPage(a.targetId)},d(a),f.getPrimaryPageId()))}}function f(){return!0}function g(){return{"default":function(a){c.log.error("Invalid behavior",a)},openPopup:b.isOpen("sv_popups")?e():a.noop,prefetchPages:d.prefetchPages}}function h(){return{"default":function(a){c.log.error("Invalid behavior",a)},openPopup:b.isOpen("sv_popups")?f:a.noop,prefetchPages:d.isEnabled}}var i,j;return{handle:function(a,b){i=i||g();var c=i[a.name]||i["default"];c(a,b)},isEnabled:function(a,b){j=j||h();var c=j[a.name]||j["default"];return c(b)}}}),define("core/siteRender/siteBehaviorsRegistrar",["core/components/behaviorHandlers/behaviorHandlersFactory","core/components/behaviorHandlers/siteBehaviorHandler"],function(a,b){"use strict";a.registerHandler("site",b)}),define("core",["utils","core/core/site","core/siteRender/compFactory","core/siteRender/compRegistrar","core/siteRender/styleCollector","core/core/dataRequirementsChecker","core/core/siteAspectsRegistry","core/core/widgetCollectorRegistry","core/components/animationsMixin","core/components/baseCompMixin","core/components/baseCompMixinOld","core/components/skinBasedComp","core/components/skinBasedCompOld","core/components/compDesignMixin","core/components/fixedPositionContainerMixin","core/components/galleryAutoPlay","core/components/optionInput","core/components/skinInfo","core/core/componentPropsBuilder","core/core/SiteDataAPI","core/siteRender/SiteAPI","core/core/data/RuntimeDal","core/components/audioMixin","core/components/facebookComponentMixin","core/components/twitterComponentMixin","core/components/util/galleryPagingCalculations","core/components/util/galleriesHelperFunctions","core/components/util/boxSlideShowCommon","core/components/textCompMixin","core/components/mediaZoomWrapperMixin","core/components/galleryImageExpandedActionMixin","core/components/buttonMixin","core/components/textScaleMixin","core/components/util/matrixAnimationManipulation","core/components/uniquePageIdMixin","core/components/bgVideoMixin","core/siteRender/WixSiteHeadRenderer","core/activities/activityTypes","core/activities/activityService","core/siteRender/SiteAspectsSiteAPI","core/bi/events","core/components/renderDoneMixin","core/components/wixTransitionGroup","core/components/wixTransitionItem","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/socialCompMixin","core/components/propsSelectors/SantaTypes","core/core/data/pointers/pointers","core/siteRender/WixSiteReact","core/components/fullScreenOverlay/fullScreenOverlayMixin","core/bi/errors","core/components/compStateMixin","core/components/siteAspects/aspectsCollector","core/components/siteAspects/AudioAspect","core/siteRender/siteBehaviorsRegistrar"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z){"use strict";return{SiteData:a.SiteData,SiteDataAPI:t,SiteAPI:u,RuntimeDal:v,MobileDeviceAnalyzer:a.MobileDeviceAnalyzer,renderer:b,WixSiteHeadRenderer:K,compFactory:c,compRegistrar:d,styleCollector:e,dataRequirementsChecker:f,siteAspectsRegistry:g,widgetCollectorRegistry:h,componentPropsBuilder:s,compMixins:{intervalsMixin:a.timerMixins.intervalsMixin,timeoutsMixin:a.timerMixins.timeoutsMixin,fixedPositionContainerMixin:o,skinBasedComp:m,skinBasedCompRR:l,animationsMixin:i,galleryAutoPlay:p,optionInput:q,skinInfo:r,audioMixin:w,facebookComponentMixin:x,twitterComponentMixin:y,textCompMixin:C,mediaZoomWrapperMixin:D,galleryImageExpandedActionMixin:E,buttonMixin:F,textScaleMixin:G,baseCompMixin:k.baseComp,baseCompMixinRR:j.baseComp,postMessageCompMixin:a.postMessageCompMixin,uniquePageIdMixin:I,bgVideoMixin:J,renderDoneMixin:P,socialCompMixin:T,compDesignMixin:n,fullScreenOverlayMixin:X,compStateMixin:Z},componentUtils:{galleryPagingCalculations:z,matrixAnimationManipulation:H,galleriesHelperFunctions:A,boxSlideShowCommon:B},SantaTypes:U,activityTypes:L,activityService:M,SiteAspectsSiteAPI:N,behaviorHandlersFactory:S,wixTransitionGroup:Q,wixTransitionItem:R,biEvents:O,DataAccessPointers:V.DataAccessPointers,PointersCache:V.PointersCache,pointerGeneratorsRegistry:V.pointerGeneratorsRegistry,forTests:{WixSiteReact:W},errors:Y}});